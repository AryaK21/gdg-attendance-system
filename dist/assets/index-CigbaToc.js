(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function Yf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var of={exports:{}},lu={},af={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function BE(){if(xg)return Ke;xg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.iterator;function R(z){return z===null||typeof z!="object"?null:(z=k&&z[k]||z["@@iterator"],typeof z=="function"?z:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,Y={};function le(z,X,Ae){this.props=z,this.context=X,this.refs=Y,this.updater=Ae||Z}le.prototype.isReactComponent={},le.prototype.setState=function(z,X){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,X,"setState")},le.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function Ve(){}Ve.prototype=le.prototype;function Re(z,X,Ae){this.props=z,this.context=X,this.refs=Y,this.updater=Ae||Z}var De=Re.prototype=new Ve;De.constructor=Re,ee(De,le.prototype),De.isPureReactComponent=!0;var et=Array.isArray,ct=Object.prototype.hasOwnProperty,$e={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function N(z,X,Ae){var Te,we={},pe=null,Ze=null;if(X!=null)for(Te in X.ref!==void 0&&(Ze=X.ref),X.key!==void 0&&(pe=""+X.key),X)ct.call(X,Te)&&!F.hasOwnProperty(Te)&&(we[Te]=X[Te]);var He=arguments.length-2;if(He===1)we.children=Ae;else if(1<He){for(var ft=Array(He),Gt=0;Gt<He;Gt++)ft[Gt]=arguments[Gt+2];we.children=ft}if(z&&z.defaultProps)for(Te in He=z.defaultProps,He)we[Te]===void 0&&(we[Te]=He[Te]);return{$$typeof:i,type:z,key:pe,ref:Ze,props:we,_owner:$e.current}}function M(z,X){return{$$typeof:i,type:z.type,key:X,ref:z.ref,props:z.props,_owner:z._owner}}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function b(z){var X={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ae){return X[Ae]})}var j=/\/+/g;function O(z,X){return typeof z=="object"&&z!==null&&z.key!=null?b(""+z.key):X.toString(36)}function Qe(z,X,Ae,Te,we){var pe=typeof z;(pe==="undefined"||pe==="boolean")&&(z=null);var Ze=!1;if(z===null)Ze=!0;else switch(pe){case"string":case"number":Ze=!0;break;case"object":switch(z.$$typeof){case i:case e:Ze=!0}}if(Ze)return Ze=z,we=we(Ze),z=Te===""?"."+O(Ze,0):Te,et(we)?(Ae="",z!=null&&(Ae=z.replace(j,"$&/")+"/"),Qe(we,X,Ae,"",function(Gt){return Gt})):we!=null&&(B(we)&&(we=M(we,Ae+(!we.key||Ze&&Ze.key===we.key?"":(""+we.key).replace(j,"$&/")+"/")+z)),X.push(we)),1;if(Ze=0,Te=Te===""?".":Te+":",et(z))for(var He=0;He<z.length;He++){pe=z[He];var ft=Te+O(pe,He);Ze+=Qe(pe,X,Ae,ft,we)}else if(ft=R(z),typeof ft=="function")for(z=ft.call(z),He=0;!(pe=z.next()).done;)pe=pe.value,ft=Te+O(pe,He++),Ze+=Qe(pe,X,Ae,ft,we);else if(pe==="object")throw X=String(z),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ze}function Vt(z,X,Ae){if(z==null)return z;var Te=[],we=0;return Qe(z,Te,"","",function(pe){return X.call(Ae,pe,we++)}),Te}function ht(z){if(z._status===-1){var X=z._result;X=X(),X.then(function(Ae){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ae)},function(Ae){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ae)}),z._status===-1&&(z._status=0,z._result=X)}if(z._status===1)return z._result.default;throw z._result}var dt={current:null},J={transition:null},Pe={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:J,ReactCurrentOwner:$e};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:Vt,forEach:function(z,X,Ae){Vt(z,function(){X.apply(this,arguments)},Ae)},count:function(z){var X=0;return Vt(z,function(){X++}),X},toArray:function(z){return Vt(z,function(X){return X})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ke.Component=le,Ke.Fragment=t,Ke.Profiler=l,Ke.PureComponent=Re,Ke.StrictMode=o,Ke.Suspense=E,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pe,Ke.act=ne,Ke.cloneElement=function(z,X,Ae){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Te=ee({},z.props),we=z.key,pe=z.ref,Ze=z._owner;if(X!=null){if(X.ref!==void 0&&(pe=X.ref,Ze=$e.current),X.key!==void 0&&(we=""+X.key),z.type&&z.type.defaultProps)var He=z.type.defaultProps;for(ft in X)ct.call(X,ft)&&!F.hasOwnProperty(ft)&&(Te[ft]=X[ft]===void 0&&He!==void 0?He[ft]:X[ft])}var ft=arguments.length-2;if(ft===1)Te.children=Ae;else if(1<ft){He=Array(ft);for(var Gt=0;Gt<ft;Gt++)He[Gt]=arguments[Gt+2];Te.children=He}return{$$typeof:i,type:z.type,key:we,ref:pe,props:Te,_owner:Ze}},Ke.createContext=function(z){return z={$$typeof:p,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:c,_context:z},z.Consumer=z},Ke.createElement=N,Ke.createFactory=function(z){var X=N.bind(null,z);return X.type=z,X},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(z){return{$$typeof:v,render:z}},Ke.isValidElement=B,Ke.lazy=function(z){return{$$typeof:C,_payload:{_status:-1,_result:z},_init:ht}},Ke.memo=function(z,X){return{$$typeof:I,type:z,compare:X===void 0?null:X}},Ke.startTransition=function(z){var X=J.transition;J.transition={};try{z()}finally{J.transition=X}},Ke.unstable_act=ne,Ke.useCallback=function(z,X){return dt.current.useCallback(z,X)},Ke.useContext=function(z){return dt.current.useContext(z)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(z){return dt.current.useDeferredValue(z)},Ke.useEffect=function(z,X){return dt.current.useEffect(z,X)},Ke.useId=function(){return dt.current.useId()},Ke.useImperativeHandle=function(z,X,Ae){return dt.current.useImperativeHandle(z,X,Ae)},Ke.useInsertionEffect=function(z,X){return dt.current.useInsertionEffect(z,X)},Ke.useLayoutEffect=function(z,X){return dt.current.useLayoutEffect(z,X)},Ke.useMemo=function(z,X){return dt.current.useMemo(z,X)},Ke.useReducer=function(z,X,Ae){return dt.current.useReducer(z,X,Ae)},Ke.useRef=function(z){return dt.current.useRef(z)},Ke.useState=function(z){return dt.current.useState(z)},Ke.useSyncExternalStore=function(z,X,Ae){return dt.current.useSyncExternalStore(z,X,Ae)},Ke.useTransition=function(){return dt.current.useTransition()},Ke.version="18.3.1",Ke}var Lg;function Jf(){return Lg||(Lg=1,af.exports=BE()),af.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function jE(){if(Ng)return lu;Ng=1;var i=Jf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function p(v,E,I){var C,k={},R=null,Z=null;I!==void 0&&(R=""+I),E.key!==void 0&&(R=""+E.key),E.ref!==void 0&&(Z=E.ref);for(C in E)o.call(E,C)&&!c.hasOwnProperty(C)&&(k[C]=E[C]);if(v&&v.defaultProps)for(C in E=v.defaultProps,E)k[C]===void 0&&(k[C]=E[C]);return{$$typeof:e,type:v,key:R,ref:Z,props:k,_owner:l.current}}return lu.Fragment=t,lu.jsx=p,lu.jsxs=p,lu}var Og;function HE(){return Og||(Og=1,of.exports=jE()),of.exports}var oe=HE(),Be=Jf();const oh=Yf(Be);var Hc={},lf={exports:{}},Yn={},uf={exports:{}},cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function WE(){return Dg||(Dg=1,(function(i){function e(J,Pe){var ne=J.length;J.push(Pe);e:for(;0<ne;){var z=ne-1>>>1,X=J[z];if(0<l(X,Pe))J[z]=Pe,J[ne]=X,ne=z;else break e}}function t(J){return J.length===0?null:J[0]}function o(J){if(J.length===0)return null;var Pe=J[0],ne=J.pop();if(ne!==Pe){J[0]=ne;e:for(var z=0,X=J.length,Ae=X>>>1;z<Ae;){var Te=2*(z+1)-1,we=J[Te],pe=Te+1,Ze=J[pe];if(0>l(we,ne))pe<X&&0>l(Ze,we)?(J[z]=Ze,J[pe]=ne,z=pe):(J[z]=we,J[Te]=ne,z=Te);else if(pe<X&&0>l(Ze,ne))J[z]=Ze,J[pe]=ne,z=pe;else break e}}return Pe}function l(J,Pe){var ne=J.sortIndex-Pe.sortIndex;return ne!==0?ne:J.id-Pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var p=Date,v=p.now();i.unstable_now=function(){return p.now()-v}}var E=[],I=[],C=1,k=null,R=3,Z=!1,ee=!1,Y=!1,le=typeof setTimeout=="function"?setTimeout:null,Ve=typeof clearTimeout=="function"?clearTimeout:null,Re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function De(J){for(var Pe=t(I);Pe!==null;){if(Pe.callback===null)o(I);else if(Pe.startTime<=J)o(I),Pe.sortIndex=Pe.expirationTime,e(E,Pe);else break;Pe=t(I)}}function et(J){if(Y=!1,De(J),!ee)if(t(E)!==null)ee=!0,ht(ct);else{var Pe=t(I);Pe!==null&&dt(et,Pe.startTime-J)}}function ct(J,Pe){ee=!1,Y&&(Y=!1,Ve(N),N=-1),Z=!0;var ne=R;try{for(De(Pe),k=t(E);k!==null&&(!(k.expirationTime>Pe)||J&&!b());){var z=k.callback;if(typeof z=="function"){k.callback=null,R=k.priorityLevel;var X=z(k.expirationTime<=Pe);Pe=i.unstable_now(),typeof X=="function"?k.callback=X:k===t(E)&&o(E),De(Pe)}else o(E);k=t(E)}if(k!==null)var Ae=!0;else{var Te=t(I);Te!==null&&dt(et,Te.startTime-Pe),Ae=!1}return Ae}finally{k=null,R=ne,Z=!1}}var $e=!1,F=null,N=-1,M=5,B=-1;function b(){return!(i.unstable_now()-B<M)}function j(){if(F!==null){var J=i.unstable_now();B=J;var Pe=!0;try{Pe=F(!0,J)}finally{Pe?O():($e=!1,F=null)}}else $e=!1}var O;if(typeof Re=="function")O=function(){Re(j)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Vt=Qe.port2;Qe.port1.onmessage=j,O=function(){Vt.postMessage(null)}}else O=function(){le(j,0)};function ht(J){F=J,$e||($e=!0,O())}function dt(J,Pe){N=le(function(){J(i.unstable_now())},Pe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){ee||Z||(ee=!0,ht(ct))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_getFirstCallbackNode=function(){return t(E)},i.unstable_next=function(J){switch(R){case 1:case 2:case 3:var Pe=3;break;default:Pe=R}var ne=R;R=Pe;try{return J()}finally{R=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,Pe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ne=R;R=J;try{return Pe()}finally{R=ne}},i.unstable_scheduleCallback=function(J,Pe,ne){var z=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?z+ne:z):ne=z,J){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ne+X,J={id:C++,callback:Pe,priorityLevel:J,startTime:ne,expirationTime:X,sortIndex:-1},ne>z?(J.sortIndex=ne,e(I,J),t(E)===null&&J===t(I)&&(Y?(Ve(N),N=-1):Y=!0,dt(et,ne-z))):(J.sortIndex=X,e(E,J),ee||Z||(ee=!0,ht(ct))),J},i.unstable_shouldYield=b,i.unstable_wrapCallback=function(J){var Pe=R;return function(){var ne=R;R=Pe;try{return J.apply(this,arguments)}finally{R=ne}}}})(cf)),cf}var Mg;function qE(){return Mg||(Mg=1,uf.exports=WE()),uf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function GE(){if(bg)return Yn;bg=1;var i=Jf(),e=qE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function c(n,s){p(n,s),p(n+"Capture",s)}function p(n,s){for(l[n]=s,n=0;n<s.length;n++)o.add(s[n])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},k={};function R(n){return E.call(k,n)?!0:E.call(C,n)?!1:I.test(n)?k[n]=!0:(C[n]=!0,!1)}function Z(n,s,u,f){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function ee(n,s,u,f){if(s===null||typeof s>"u"||Z(n,s,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Y(n,s,u,f,g,_,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=s,this.sanitizeURL=_,this.removeEmptyString=S}var le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){le[n]=new Y(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];le[s]=new Y(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){le[n]=new Y(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){le[n]=new Y(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){le[n]=new Y(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){le[n]=new Y(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){le[n]=new Y(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){le[n]=new Y(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){le[n]=new Y(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ve=/[\-:]([a-z])/g;function Re(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(Ve,Re);le[s]=new Y(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(Ve,Re);le[s]=new Y(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(Ve,Re);le[s]=new Y(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){le[n]=new Y(n,1,!1,n.toLowerCase(),null,!1,!1)}),le.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){le[n]=new Y(n,1,!1,n.toLowerCase(),null,!0,!0)});function De(n,s,u,f){var g=le.hasOwnProperty(s)?le[s]:null;(g!==null?g.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(ee(s,u,g,f)&&(u=null),f||g===null?R(s)&&(u===null?n.removeAttribute(s):n.setAttribute(s,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(s=g.attributeName,f=g.attributeNamespace,u===null?n.removeAttribute(s):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?n.setAttributeNS(f,s,u):n.setAttribute(s,u))))}var et=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ct=Symbol.for("react.element"),$e=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),b=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),Vt=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),dt=Symbol.for("react.offscreen"),J=Symbol.iterator;function Pe(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var ne=Object.assign,z;function X(n){if(z===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);z=s&&s[1]||""}return`
`+z+n}var Ae=!1;function Te(n,s){if(!n||Ae)return"";Ae=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Q){var f=Q}Reflect.construct(n,[],s)}else{try{s.call()}catch(Q){f=Q}n.call(s.prototype)}else{try{throw Error()}catch(Q){f=Q}n()}}catch(Q){if(Q&&f&&typeof Q.stack=="string"){for(var g=Q.stack.split(`
`),_=f.stack.split(`
`),S=g.length-1,x=_.length-1;1<=S&&0<=x&&g[S]!==_[x];)x--;for(;1<=S&&0<=x;S--,x--)if(g[S]!==_[x]){if(S!==1||x!==1)do if(S--,x--,0>x||g[S]!==_[x]){var V=`
`+g[S].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=S&&0<=x);break}}}finally{Ae=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?X(n):""}function we(n){switch(n.tag){case 5:return X(n.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return n=Te(n.type,!1),n;case 11:return n=Te(n.type.render,!1),n;case 1:return n=Te(n.type,!0),n;default:return""}}function pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case $e:return"Portal";case M:return"Profiler";case N:return"StrictMode";case O:return"Suspense";case Qe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b:return(n.displayName||"Context")+".Consumer";case B:return(n._context.displayName||"Context")+".Provider";case j:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Vt:return s=n.displayName||null,s!==null?s:pe(n.type)||"Memo";case ht:s=n._payload,n=n._init;try{return pe(n(s))}catch{}}return null}function Ze(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(s);case 8:return s===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function He(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ft(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Gt(n){var s=ft(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),f=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,_.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function oi(n){n._valueTracker||(n._valueTracker=Gt(n))}function Br(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return n&&(f=ft(n)?n.checked?"true":"false":n.value),n=f,n!==u?(s.setValue(n),!0):!1}function hr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Cs(n,s){var u=s.checked;return ne({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function bo(n,s){var u=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;u=He(s.value!=null?s.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function zi(n,s){s=s.checked,s!=null&&De(n,"checked",s,!1)}function jr(n,s){zi(n,s);var u=He(s.value),f=s.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Nt(n,s.type,u):s.hasOwnProperty("defaultValue")&&Nt(n,s.type,He(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ai(n,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,u||s===n.value||(n.value=s),n.defaultValue=s}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function Nt(n,s,u){(s!=="number"||hr(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var St=Array.isArray;function Rn(n,s,u,f){if(n=n.options,s){s={};for(var g=0;g<u.length;g++)s["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=s.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&f&&(n[u].defaultSelected=!0)}else{for(u=""+He(u),s=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Rs(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ks(n,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(St(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}n._wrapperState={initialValue:He(u)}}function Ra(n,s){var u=He(s.value),f=He(s.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),s.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function li(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Ui(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bi(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Ui(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Hr,ka=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,f,g){MSApp.execUnsafeLocalFunction(function(){return n(s,u,f,g)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Hr=Hr||document.createElement("div"),Hr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Hr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function ui(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xa=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(n){xa.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Wr[s]=Wr[n]})});function qr(n,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||Wr.hasOwnProperty(n)&&Wr[n]?(""+s).trim():s+"px"}function ci(n,s){n=n.style;for(var u in s)if(s.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=qr(u,s[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,g):n[u]=g}}var xs=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function er(n,s){if(s){if(xs[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function dr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function Ls(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fr=null,pr=null,Et=null;function Vo(n){if(n=us(n)){if(typeof fr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Za(s),fr(n.stateNode,n.type,s))}}function di(n){pr?Et?Et.push(n):Et=[n]:pr=n}function fi(){if(pr){var n=pr,s=Et;if(Et=pr=null,Vo(n),s)for(n=0;n<s.length;n++)Vo(s[n])}}function La(n,s){return n(s)}function Na(){}var mr=!1;function Ns(n,s,u){if(mr)return n(s,u);mr=!0;try{return La(n,s,u)}finally{mr=!1,(pr!==null||Et!==null)&&(Na(),fi())}}function ji(n,s){var u=n.stateNode;if(u===null)return null;var f=Za(u);if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var pi=!1;if(v)try{var mi={};Object.defineProperty(mi,"passive",{get:function(){pi=!0}}),window.addEventListener("test",mi,mi),window.removeEventListener("test",mi,mi)}catch{pi=!1}function Oa(n,s,u,f,g,_,S,x,V){var Q=Array.prototype.slice.call(arguments,3);try{s.apply(u,Q)}catch(ae){this.onError(ae)}}var Ft=!1,ye=null,Hi=!1,kn=null,Fo={onError:function(n){Ft=!0,ye=n}};function zo(n,s,u,f,g,_,S,x,V){Ft=!1,ye=null,Oa.apply(Fo,arguments)}function Wi(n,s,u,f,g,_,S,x,V){if(zo.apply(this,arguments),Ft){if(Ft){var Q=ye;Ft=!1,ye=null}else throw Error(t(198));Hi||(Hi=!0,kn=Q)}}function Un(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function gr(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Uo(n){if(Un(n)!==n)throw Error(t(188))}function Da(n){var s=n.alternate;if(!s){if(s=Un(n),s===null)throw Error(t(188));return s!==n?null:n}for(var u=n,f=s;;){var g=u.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===u)return Uo(g),n;if(_===f)return Uo(g),s;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=_;else{for(var S=!1,x=g.child;x;){if(x===u){S=!0,u=g,f=_;break}if(x===f){S=!0,f=g,u=_;break}x=x.sibling}if(!S){for(x=_.child;x;){if(x===u){S=!0,u=_,f=g;break}if(x===f){S=!0,f=_,u=g;break}x=x.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:s}function Ma(n){return n=Da(n),n!==null?qi(n):null}function qi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=qi(n);if(s!==null)return s;n=n.sibling}return null}var Bo=e.unstable_scheduleCallback,Gi=e.unstable_cancelCallback,Zi=e.unstable_shouldYield,Bn=e.unstable_requestPaint,_t=e.unstable_now,Ml=e.unstable_getCurrentPriorityLevel,Os=e.unstable_ImmediatePriority,jo=e.unstable_UserBlockingPriority,Ki=e.unstable_NormalPriority,$i=e.unstable_LowPriority,_r=e.unstable_IdlePriority,gi=null,pn=null;function _i(n){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(gi,n,void 0,(n.current.flags&128)===128)}catch{}}var ze=Math.clz32?Math.clz32:jn,nt=Math.log,on=Math.LN2;function jn(n){return n>>>=0,n===0?32:31-(nt(n)/on|0)|0}var an=64,yr=4194304;function fe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function lt(n,s){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,_=n.pingedLanes,S=u&268435455;if(S!==0){var x=S&~g;x!==0?f=fe(x):(_&=S,_!==0&&(f=fe(_)))}else S=u&~g,S!==0?f=fe(S):_!==0&&(f=fe(_));if(f===0)return 0;if(s!==0&&s!==f&&(s&g)===0&&(g=f&-f,_=s&-s,g>=_||g===16&&(_&4194240)!==0))return s;if((f&4)!==0&&(f|=u&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=f;0<s;)u=31-ze(s),g=1<<u,f|=n[u],s&=~g;return f}function Gr(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vr(n,s){for(var u=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,_=n.pendingLanes;0<_;){var S=31-ze(_),x=1<<S,V=g[S];V===-1?((x&u)===0||(x&f)!==0)&&(g[S]=Gr(x,s)):V<=s&&(n.expiredLanes|=x),_&=~x}}function Xt(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ho(){var n=an;return an<<=1,(an&4194240)===0&&(an=64),n}function yi(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function xn(n,s,u){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-ze(s),n[s]=u}function Pt(n,s){var u=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-ze(u),_=1<<g;s[g]=0,f[g]=-1,n[g]=-1,u&=~_}}function tr(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var f=31-ze(u),g=1<<f;g&s|n[f]&s&&(n[f]|=s),u&=~g}}var qe=0;function mn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Qi,wr,Yi,Ji,vi,Hn=!1,wi=[],Ln=null,nr=null,Dt=null,Xi=new Map,xe=new Map,At=[],ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zr(n,s){switch(n){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Xi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":xe.delete(s.pointerId)}}function Nn(n,s,u,f,g,_){return n===null||n.nativeEvent!==_?(n={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},s!==null&&(s=us(s),s!==null&&wr(s)),n):(n.eventSystemFlags|=f,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function Ds(n,s,u,f,g){switch(s){case"focusin":return Ln=Nn(Ln,n,s,u,f,g),!0;case"dragenter":return nr=Nn(nr,n,s,u,f,g),!0;case"mouseover":return Dt=Nn(Dt,n,s,u,f,g),!0;case"pointerover":var _=g.pointerId;return Xi.set(_,Nn(Xi.get(_)||null,n,s,u,f,g)),!0;case"gotpointercapture":return _=g.pointerId,xe.set(_,Nn(xe.get(_)||null,n,s,u,f,g)),!0}return!1}function Ei(n){var s=ls(n.target);if(s!==null){var u=Un(s);if(u!==null){if(s=u.tag,s===13){if(s=gr(u),s!==null){n.blockedOn=s,vi(n.priority,function(){Yi(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function tt(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=ns(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);hi=f,u.target.dispatchEvent(f),hi=null}else return s=us(u),s!==null&&wr(s),n.blockedOn=u,!1;s.shift()}return!0}function Ms(n,s,u){tt(n)&&u.delete(s)}function es(){Hn=!1,Ln!==null&&tt(Ln)&&(Ln=null),nr!==null&&tt(nr)&&(nr=null),Dt!==null&&tt(Dt)&&(Dt=null),Xi.forEach(Ms),xe.forEach(Ms)}function yt(n,s){n.blockedOn===s&&(n.blockedOn=null,Hn||(Hn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,es)))}function gn(n){function s(g){return yt(g,n)}if(0<wi.length){yt(wi[0],n);for(var u=1;u<wi.length;u++){var f=wi[u];f.blockedOn===n&&(f.blockedOn=null)}}for(Ln!==null&&yt(Ln,n),nr!==null&&yt(nr,n),Dt!==null&&yt(Dt,n),Xi.forEach(s),xe.forEach(s),u=0;u<At.length;u++)f=At[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<At.length&&(u=At[0],u.blockedOn===null);)Ei(u),u.blockedOn===null&&At.shift()}var Er=et.ReactCurrentBatchConfig,Tr=!0;function Ir(n,s,u,f){var g=qe,_=Er.transition;Er.transition=null;try{qe=1,ts(n,s,u,f)}finally{qe=g,Er.transition=_}}function Wo(n,s,u,f){var g=qe,_=Er.transition;Er.transition=null;try{qe=4,ts(n,s,u,f)}finally{qe=g,Er.transition=_}}function ts(n,s,u,f){if(Tr){var g=ns(n,s,u,f);if(g===null)r(n,s,f,Sr,u),Zr(n,f);else if(Ds(g,n,s,u,f))f.stopPropagation();else if(Zr(n,f),s&4&&-1<ut.indexOf(n)){for(;g!==null;){var _=us(g);if(_!==null&&Qi(_),_=ns(n,s,u,f),_===null&&r(n,s,f,Sr,u),_===g)break;g=_}g!==null&&f.stopPropagation()}else r(n,s,f,null,u)}}var Sr=null;function ns(n,s,u,f){if(Sr=null,n=Ls(f),n=ls(n),n!==null)if(s=Un(n),s===null)n=null;else if(u=s.tag,u===13){if(n=gr(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Sr=n,null}function Ge(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ml()){case Os:return 1;case jo:return 4;case Ki:case $i:return 16;case _r:return 536870912;default:return 16}default:return 16}}var On=null,en=null,Dn=null;function qo(){if(Dn)return Dn;var n,s=en,u=s.length,f,g="value"in On?On.value:On.textContent,_=g.length;for(n=0;n<u&&s[n]===g[n];n++);var S=u-n;for(f=1;f<=S&&s[u-f]===g[_-f];f++);return Dn=g.slice(n,1<f?1-f:void 0)}function rs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Wn(){return!0}function Go(){return!1}function Zt(n){function s(u,f,g,_,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(u=n[x],this[x]=u?u(_):_[x]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Wn:Go,this.isPropagationStopped=Go,this}return ne(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),s}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=Zt(Pr),Ar=ne({},Pr,{view:0,detail:0}),bs=Zt(Ar),ln,Vs,_n,yn=ne({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oe,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_n&&(_n&&n.type==="mousemove"?(ln=n.screenX-_n.screenX,Vs=n.screenY-_n.screenY):Vs=ln=0,_n=n),ln)},movementY:function(n){return"movementY"in n?n.movementY:Vs}}),Fs=Zt(yn),Zo=ne({},yn,{dataTransfer:0}),zs=Zt(Zo),Us=ne({},Ar,{relatedTarget:0}),zt=Zt(Us),Ko=ne({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),ba=Zt(Ko),Ti=ne({},Pr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h=Zt(Ti),y=ne({},Pr,{data:0}),T=Zt(y),A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function he(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=K[n])?!!s[n]:!1}function Oe(){return he}var rt=ne({},Ar,{key:function(n){if(n.key){var s=A[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=rs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?H[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oe,charCode:function(n){return n.type==="keypress"?rs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?rs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ot=Zt(rt),Rt=ne({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mn=Zt(Rt),rr=ne({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oe}),qn=Zt(rr),Cr=ne({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bs=Zt(Cr),js=ne({},yn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$h=Zt(js),ir=[9,13,27,32],Ii=v&&"CompositionEvent"in window,$o=null;v&&"documentMode"in document&&($o=document.documentMode);var Kr=v&&"TextEvent"in window&&!$o,Gu=v&&(!Ii||$o&&8<$o&&11>=$o),ss=" ",Zu=!1;function Hs(n,s){switch(n){case"keyup":return ir.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $r=!1;function Qh(n,s){switch(n){case"compositionend":return bl(s);case"keypress":return s.which!==32?null:(Zu=!0,ss);case"textInput":return n=s.data,n===ss&&Zu?null:n;default:return null}}function Si(n,s){if($r)return n==="compositionend"||!Ii&&Hs(n,s)?(n=qo(),Dn=en=On=null,$r=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gu&&s.locale!=="ko"?null:s.data;default:return null}}var Va={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ku(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Va[n.type]:s==="textarea"}function Fa(n,s,u,f){di(f),s=d(s,"onChange"),0<s.length&&(u=new is("onChange","change",null,u,f),n.push({event:u,listeners:s}))}var Qo=null,bn=null;function Yh(n){ql(n,0)}function Qr(n){var s=cs(n);if(Br(s))return n}function Jh(n,s){if(n==="change")return s}var Rr=!1;if(v){var Ws;if(v){var za="oninput"in document;if(!za){var Ua=document.createElement("div");Ua.setAttribute("oninput","return;"),za=typeof Ua.oninput=="function"}Ws=za}else Ws=!1;Rr=Ws&&(!document.documentMode||9<document.documentMode)}function Yo(){Qo&&(Qo.detachEvent("onpropertychange",Ba),bn=Qo=null)}function Ba(n){if(n.propertyName==="value"&&Qr(bn)){var s=[];Fa(s,bn,n,Ls(n)),Ns(Yh,s)}}function ja(n,s,u){n==="focusin"?(Yo(),Qo=s,bn=u,Qo.attachEvent("onpropertychange",Ba)):n==="focusout"&&Yo()}function qs(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qr(bn)}function Ha(n,s){if(n==="click")return Qr(s)}function Vl(n,s){if(n==="input"||n==="change")return Qr(s)}function $u(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var sr=typeof Object.is=="function"?Object.is:$u;function Pi(n,s){if(sr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!E.call(s,g)||!sr(n[g],s[g]))return!1}return!0}function Qu(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Fl(n,s){var u=Qu(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=s&&f>=s)return{node:u,offset:s-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Qu(u)}}function Yu(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Yu(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function zl(){for(var n=window,s=hr();s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=hr(n.document)}return s}function Ul(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function kr(n){var s=zl(),u=n.focusedElem,f=n.selectionRange;if(s!==u&&u&&u.ownerDocument&&Yu(u.ownerDocument.documentElement,u)){if(f!==null&&Ul(u)){if(s=f.start,n=f.end,n===void 0&&(n=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(n,u.value.length);else if(n=(s=u.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!n.extend&&_>f&&(g=f,f=_,_=g),g=Fl(u,_);var S=Fl(u,f);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),_>f?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=u;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)n=s[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Wa=v&&"documentMode"in document&&11>=document.documentMode,Gs=null,Zs=null,Jo=null,qa=!1;function Ju(n,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;qa||Gs==null||Gs!==hr(f)||(f=Gs,"selectionStart"in f&&Ul(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Jo&&Pi(Jo,f)||(Jo=f,f=d(Zs,"onSelect"),0<f.length&&(s=new is("onSelect","select",null,s,u),n.push({event:s,listeners:f}),s.target=Gs)))}function Ai(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var Ks={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionend:Ai("Transition","TransitionEnd")},Ci={},Bl={};v&&(Bl=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Xo(n){if(Ci[n])return Ci[n];if(!Ks[n])return n;var s=Ks[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in Bl)return Ci[n]=s[u];return n}var Xu=Xo("animationend"),xr=Xo("animationiteration"),jl=Xo("animationstart"),Hl=Xo("transitionend"),$s=new Map,ec="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(n,s){$s.set(n,s),c(s,[n])}for(var os=0;os<ec.length;os++){var Ga=ec[os],tc=Ga.toLowerCase(),Xh=Ga[0].toUpperCase()+Ga.slice(1);or(tc,"on"+Xh)}or(Xu,"onAnimationEnd"),or(xr,"onAnimationIteration"),or(jl,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(Hl,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qs));function Wl(n,s,u){var f=n.type||"unknown-event";n.currentTarget=u,Wi(f,s,void 0,n),n.currentTarget=null}function ql(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],g=f.event;f=f.listeners;e:{var _=void 0;if(s)for(var S=f.length-1;0<=S;S--){var x=f[S],V=x.instance,Q=x.currentTarget;if(x=x.listener,V!==_&&g.isPropagationStopped())break e;Wl(g,x,Q),_=V}else for(S=0;S<f.length;S++){if(x=f[S],V=x.instance,Q=x.currentTarget,x=x.listener,V!==_&&g.isPropagationStopped())break e;Wl(g,x,Q),_=V}}}if(Hi)throw n=kn,Hi=!1,kn=null,n}function gt(n,s){var u=s[eo];u===void 0&&(u=s[eo]=new Set);var f=n+"__bubble";u.has(f)||(rc(s,n,2,!1),u.add(f))}function Gl(n,s,u){var f=0;s&&(f|=4),rc(u,n,f,s)}var ea="_reactListening"+Math.random().toString(36).slice(2);function Ys(n){if(!n[ea]){n[ea]=!0,o.forEach(function(u){u!=="selectionchange"&&(nc.has(u)||Gl(u,!1,n),Gl(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ea]||(s[ea]=!0,Gl("selectionchange",!1,s))}}function rc(n,s,u,f){switch(Ge(s)){case 1:var g=Ir;break;case 4:g=Wo;break;default:g=ts}u=g.bind(null,s,u,n),g=void 0,!pi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(s,u,{capture:!0,passive:g}):n.addEventListener(s,u,!0):g!==void 0?n.addEventListener(s,u,{passive:g}):n.addEventListener(s,u,!1)}function r(n,s,u,f,g){var _=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var x=f.stateNode.containerInfo;if(x===g||x.nodeType===8&&x.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var V=S.tag;if((V===3||V===4)&&(V=S.stateNode.containerInfo,V===g||V.nodeType===8&&V.parentNode===g))return;S=S.return}for(;x!==null;){if(S=ls(x),S===null)return;if(V=S.tag,V===5||V===6){f=_=S;continue e}x=x.parentNode}}f=f.return}Ns(function(){var Q=_,ae=Ls(u),ue=[];e:{var se=$s.get(n);if(se!==void 0){var ge=is,Ee=n;switch(n){case"keypress":if(rs(u)===0)break e;case"keydown":case"keyup":ge=ot;break;case"focusin":Ee="focus",ge=zt;break;case"focusout":Ee="blur",ge=zt;break;case"beforeblur":case"afterblur":ge=zt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=zs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=qn;break;case Xu:case xr:case jl:ge=ba;break;case Hl:ge=Bs;break;case"scroll":ge=bs;break;case"wheel":ge=$h;break;case"copy":case"cut":case"paste":ge=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Mn}var Ie=(s&4)!==0,Mt=!Ie&&n==="scroll",q=Ie?se!==null?se+"Capture":null:se;Ie=[];for(var U=Q,G;U!==null;){G=U;var ce=G.stateNode;if(G.tag===5&&ce!==null&&(G=ce,q!==null&&(ce=ji(U,q),ce!=null&&Ie.push(a(U,ce,G)))),Mt)break;U=U.return}0<Ie.length&&(se=new ge(se,Ee,null,u,ae),ue.push({event:se,listeners:Ie}))}}if((s&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",ge=n==="mouseout"||n==="pointerout",se&&u!==hi&&(Ee=u.relatedTarget||u.fromElement)&&(ls(Ee)||Ee[pt]))break e;if((ge||se)&&(se=ae.window===ae?ae:(se=ae.ownerDocument)?se.defaultView||se.parentWindow:window,ge?(Ee=u.relatedTarget||u.toElement,ge=Q,Ee=Ee?ls(Ee):null,Ee!==null&&(Mt=Un(Ee),Ee!==Mt||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(ge=null,Ee=Q),ge!==Ee)){if(Ie=Fs,ce="onMouseLeave",q="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=Mn,ce="onPointerLeave",q="onPointerEnter",U="pointer"),Mt=ge==null?se:cs(ge),G=Ee==null?se:cs(Ee),se=new Ie(ce,U+"leave",ge,u,ae),se.target=Mt,se.relatedTarget=G,ce=null,ls(ae)===Q&&(Ie=new Ie(q,U+"enter",Ee,u,ae),Ie.target=G,Ie.relatedTarget=Mt,ce=Ie),Mt=ce,ge&&Ee)t:{for(Ie=ge,q=Ee,U=0,G=Ie;G;G=m(G))U++;for(G=0,ce=q;ce;ce=m(ce))G++;for(;0<U-G;)Ie=m(Ie),U--;for(;0<G-U;)q=m(q),G--;for(;U--;){if(Ie===q||q!==null&&Ie===q.alternate)break t;Ie=m(Ie),q=m(q)}Ie=null}else Ie=null;ge!==null&&w(ue,se,ge,Ie,!1),Ee!==null&&Mt!==null&&w(ue,Mt,Ee,Ie,!0)}}e:{if(se=Q?cs(Q):window,ge=se.nodeName&&se.nodeName.toLowerCase(),ge==="select"||ge==="input"&&se.type==="file")var Se=Jh;else if(Ku(se))if(Rr)Se=Vl;else{Se=qs;var Le=ja}else(ge=se.nodeName)&&ge.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Se=Ha);if(Se&&(Se=Se(n,Q))){Fa(ue,Se,u,ae);break e}Le&&Le(n,se,Q),n==="focusout"&&(Le=se._wrapperState)&&Le.controlled&&se.type==="number"&&Nt(se,"number",se.value)}switch(Le=Q?cs(Q):window,n){case"focusin":(Ku(Le)||Le.contentEditable==="true")&&(Gs=Le,Zs=Q,Jo=null);break;case"focusout":Jo=Zs=Gs=null;break;case"mousedown":qa=!0;break;case"contextmenu":case"mouseup":case"dragend":qa=!1,Ju(ue,u,ae);break;case"selectionchange":if(Wa)break;case"keydown":case"keyup":Ju(ue,u,ae)}var Ne;if(Ii)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else $r?Hs(n,u)&&(Fe="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Fe="onCompositionStart");Fe&&(Gu&&u.locale!=="ko"&&($r||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&$r&&(Ne=qo()):(On=ae,en="value"in On?On.value:On.textContent,$r=!0)),Le=d(Q,Fe),0<Le.length&&(Fe=new T(Fe,n,null,u,ae),ue.push({event:Fe,listeners:Le}),Ne?Fe.data=Ne:(Ne=bl(u),Ne!==null&&(Fe.data=Ne)))),(Ne=Kr?Qh(n,u):Si(n,u))&&(Q=d(Q,"onBeforeInput"),0<Q.length&&(ae=new T("onBeforeInput","beforeinput",null,u,ae),ue.push({event:ae,listeners:Q}),ae.data=Ne))}ql(ue,s)})}function a(n,s,u){return{instance:n,listener:s,currentTarget:u}}function d(n,s){for(var u=s+"Capture",f=[];n!==null;){var g=n,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=ji(n,u),_!=null&&f.unshift(a(n,_,g)),_=ji(n,s),_!=null&&f.push(a(n,_,g))),n=n.return}return f}function m(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function w(n,s,u,f,g){for(var _=s._reactName,S=[];u!==null&&u!==f;){var x=u,V=x.alternate,Q=x.stateNode;if(V!==null&&V===f)break;x.tag===5&&Q!==null&&(x=Q,g?(V=ji(u,_),V!=null&&S.unshift(a(u,V,x))):g||(V=ji(u,_),V!=null&&S.push(a(u,V,x)))),u=u.return}S.length!==0&&n.push({event:s,listeners:S})}var P=/\r\n?/g,D=/\u0000|\uFFFD/g;function W(n){return(typeof n=="string"?n:""+n).replace(P,`
`).replace(D,"")}function $(n,s,u){if(s=W(s),W(n)!==s&&u)throw Error(t(425))}function ie(){}var de=null,ke=null;function We(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kt=typeof setTimeout=="function"?setTimeout:void 0,Ut=typeof clearTimeout=="function"?clearTimeout:void 0,Vn=typeof Promise=="function"?Promise:void 0,vn=typeof queueMicrotask=="function"?queueMicrotask:typeof Vn<"u"?function(n){return Vn.resolve(null).then(n).catch(Js)}:Kt;function Js(n){setTimeout(function(){throw n})}function Zl(n,s){var u=s,f=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){n.removeChild(g),gn(s);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);gn(s)}function Ri(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function ic(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}var as=Math.random().toString(36).slice(2),Lr="__reactFiber$"+as,Xs="__reactProps$"+as,pt="__reactContainer$"+as,eo="__reactEvents$"+as,ed="__reactListeners$"+as,td="__reactHandles$"+as;function ls(n){var s=n[Lr];if(s)return s;for(var u=n.parentNode;u;){if(s=u[pt]||u[Lr]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=ic(n);n!==null;){if(u=n[Lr])return u;n=ic(n)}return s}n=u,u=n.parentNode}return null}function us(n){return n=n[Lr]||n[pt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function cs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Za(n){return n[Xs]||null}var nd=[],Ka=-1;function to(n){return{current:n}}function Tt(n){0>Ka||(n.current=nd[Ka],nd[Ka]=null,Ka--)}function vt(n,s){Ka++,nd[Ka]=n.current,n.current=s}var no={},wn=to(no),Gn=to(!1),ta=no;function $a(n,s){var u=n.type.contextTypes;if(!u)return no;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in u)g[_]=s[_];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function Zn(n){return n=n.childContextTypes,n!=null}function sc(){Tt(Gn),Tt(wn)}function Jp(n,s,u){if(wn.current!==no)throw Error(t(168));vt(wn,s),vt(Gn,u)}function Xp(n,s,u){var f=n.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in s))throw Error(t(108,Ze(n)||"Unknown",g));return ne({},u,f)}function oc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||no,ta=wn.current,vt(wn,n),vt(Gn,Gn.current),!0}function em(n,s,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=Xp(n,s,ta),f.__reactInternalMemoizedMergedChildContext=n,Tt(Gn),Tt(wn),vt(wn,n)):Tt(Gn),vt(Gn,u)}var hs=null,ac=!1,rd=!1;function tm(n){hs===null?hs=[n]:hs.push(n)}function oE(n){ac=!0,tm(n)}function ro(){if(!rd&&hs!==null){rd=!0;var n=0,s=qe;try{var u=hs;for(qe=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}hs=null,ac=!1}catch(g){throw hs!==null&&(hs=hs.slice(n+1)),Bo(Os,ro),g}finally{qe=s,rd=!1}}return null}var Qa=[],Ya=0,lc=null,uc=0,Nr=[],Or=0,na=null,ds=1,fs="";function ra(n,s){Qa[Ya++]=uc,Qa[Ya++]=lc,lc=n,uc=s}function nm(n,s,u){Nr[Or++]=ds,Nr[Or++]=fs,Nr[Or++]=na,na=n;var f=ds;n=fs;var g=32-ze(f)-1;f&=~(1<<g),u+=1;var _=32-ze(s)+g;if(30<_){var S=g-g%5;_=(f&(1<<S)-1).toString(32),f>>=S,g-=S,ds=1<<32-ze(s)+g|u<<g|f,fs=_+n}else ds=1<<_|u<<g|f,fs=n}function id(n){n.return!==null&&(ra(n,1),nm(n,1,0))}function sd(n){for(;n===lc;)lc=Qa[--Ya],Qa[Ya]=null,uc=Qa[--Ya],Qa[Ya]=null;for(;n===na;)na=Nr[--Or],Nr[Or]=null,fs=Nr[--Or],Nr[Or]=null,ds=Nr[--Or],Nr[Or]=null}var ar=null,lr=null,Ct=!1,Yr=null;function rm(n,s){var u=Vr(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=n,s=n.deletions,s===null?(n.deletions=[u],n.flags|=16):s.push(u)}function im(n,s){switch(n.tag){case 5:var u=n.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,ar=n,lr=Ri(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,ar=n,lr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=na!==null?{id:ds,overflow:fs}:null,n.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=Vr(18,null,null,0),u.stateNode=s,u.return=n,n.child=u,ar=n,lr=null,!0):!1;default:return!1}}function od(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ad(n){if(Ct){var s=lr;if(s){var u=s;if(!im(n,s)){if(od(n))throw Error(t(418));s=Ri(u.nextSibling);var f=ar;s&&im(n,s)?rm(f,u):(n.flags=n.flags&-4097|2,Ct=!1,ar=n)}}else{if(od(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ct=!1,ar=n}}}function sm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ar=n}function cc(n){if(n!==ar)return!1;if(!Ct)return sm(n),Ct=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!We(n.type,n.memoizedProps)),s&&(s=lr)){if(od(n))throw om(),Error(t(418));for(;s;)rm(n,s),s=Ri(s.nextSibling)}if(sm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(s===0){lr=Ri(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}n=n.nextSibling}lr=null}}else lr=ar?Ri(n.stateNode.nextSibling):null;return!0}function om(){for(var n=lr;n;)n=Ri(n.nextSibling)}function Ja(){lr=ar=null,Ct=!1}function ld(n){Yr===null?Yr=[n]:Yr.push(n)}var aE=et.ReactCurrentBatchConfig;function Kl(n,s,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var g=f,_=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===_?s.ref:(s=function(S){var x=g.refs;S===null?delete x[_]:x[_]=S},s._stringRef=_,s)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function hc(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function am(n){var s=n._init;return s(n._payload)}function lm(n){function s(q,U){if(n){var G=q.deletions;G===null?(q.deletions=[U],q.flags|=16):G.push(U)}}function u(q,U){if(!n)return null;for(;U!==null;)s(q,U),U=U.sibling;return null}function f(q,U){for(q=new Map;U!==null;)U.key!==null?q.set(U.key,U):q.set(U.index,U),U=U.sibling;return q}function g(q,U){return q=ho(q,U),q.index=0,q.sibling=null,q}function _(q,U,G){return q.index=G,n?(G=q.alternate,G!==null?(G=G.index,G<U?(q.flags|=2,U):G):(q.flags|=2,U)):(q.flags|=1048576,U)}function S(q){return n&&q.alternate===null&&(q.flags|=2),q}function x(q,U,G,ce){return U===null||U.tag!==6?(U=Xd(G,q.mode,ce),U.return=q,U):(U=g(U,G),U.return=q,U)}function V(q,U,G,ce){var Se=G.type;return Se===F?ae(q,U,G.props.children,ce,G.key):U!==null&&(U.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===ht&&am(Se)===U.type)?(ce=g(U,G.props),ce.ref=Kl(q,U,G),ce.return=q,ce):(ce=Mc(G.type,G.key,G.props,null,q.mode,ce),ce.ref=Kl(q,U,G),ce.return=q,ce)}function Q(q,U,G,ce){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=ef(G,q.mode,ce),U.return=q,U):(U=g(U,G.children||[]),U.return=q,U)}function ae(q,U,G,ce,Se){return U===null||U.tag!==7?(U=ha(G,q.mode,ce,Se),U.return=q,U):(U=g(U,G),U.return=q,U)}function ue(q,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Xd(""+U,q.mode,G),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case ct:return G=Mc(U.type,U.key,U.props,null,q.mode,G),G.ref=Kl(q,null,U),G.return=q,G;case $e:return U=ef(U,q.mode,G),U.return=q,U;case ht:var ce=U._init;return ue(q,ce(U._payload),G)}if(St(U)||Pe(U))return U=ha(U,q.mode,G,null),U.return=q,U;hc(q,U)}return null}function se(q,U,G,ce){var Se=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Se!==null?null:x(q,U,""+G,ce);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case ct:return G.key===Se?V(q,U,G,ce):null;case $e:return G.key===Se?Q(q,U,G,ce):null;case ht:return Se=G._init,se(q,U,Se(G._payload),ce)}if(St(G)||Pe(G))return Se!==null?null:ae(q,U,G,ce,null);hc(q,G)}return null}function ge(q,U,G,ce,Se){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return q=q.get(G)||null,x(U,q,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case ct:return q=q.get(ce.key===null?G:ce.key)||null,V(U,q,ce,Se);case $e:return q=q.get(ce.key===null?G:ce.key)||null,Q(U,q,ce,Se);case ht:var Le=ce._init;return ge(q,U,G,Le(ce._payload),Se)}if(St(ce)||Pe(ce))return q=q.get(G)||null,ae(U,q,ce,Se,null);hc(U,ce)}return null}function Ee(q,U,G,ce){for(var Se=null,Le=null,Ne=U,Fe=U=0,rn=null;Ne!==null&&Fe<G.length;Fe++){Ne.index>Fe?(rn=Ne,Ne=null):rn=Ne.sibling;var at=se(q,Ne,G[Fe],ce);if(at===null){Ne===null&&(Ne=rn);break}n&&Ne&&at.alternate===null&&s(q,Ne),U=_(at,U,Fe),Le===null?Se=at:Le.sibling=at,Le=at,Ne=rn}if(Fe===G.length)return u(q,Ne),Ct&&ra(q,Fe),Se;if(Ne===null){for(;Fe<G.length;Fe++)Ne=ue(q,G[Fe],ce),Ne!==null&&(U=_(Ne,U,Fe),Le===null?Se=Ne:Le.sibling=Ne,Le=Ne);return Ct&&ra(q,Fe),Se}for(Ne=f(q,Ne);Fe<G.length;Fe++)rn=ge(Ne,q,Fe,G[Fe],ce),rn!==null&&(n&&rn.alternate!==null&&Ne.delete(rn.key===null?Fe:rn.key),U=_(rn,U,Fe),Le===null?Se=rn:Le.sibling=rn,Le=rn);return n&&Ne.forEach(function(fo){return s(q,fo)}),Ct&&ra(q,Fe),Se}function Ie(q,U,G,ce){var Se=Pe(G);if(typeof Se!="function")throw Error(t(150));if(G=Se.call(G),G==null)throw Error(t(151));for(var Le=Se=null,Ne=U,Fe=U=0,rn=null,at=G.next();Ne!==null&&!at.done;Fe++,at=G.next()){Ne.index>Fe?(rn=Ne,Ne=null):rn=Ne.sibling;var fo=se(q,Ne,at.value,ce);if(fo===null){Ne===null&&(Ne=rn);break}n&&Ne&&fo.alternate===null&&s(q,Ne),U=_(fo,U,Fe),Le===null?Se=fo:Le.sibling=fo,Le=fo,Ne=rn}if(at.done)return u(q,Ne),Ct&&ra(q,Fe),Se;if(Ne===null){for(;!at.done;Fe++,at=G.next())at=ue(q,at.value,ce),at!==null&&(U=_(at,U,Fe),Le===null?Se=at:Le.sibling=at,Le=at);return Ct&&ra(q,Fe),Se}for(Ne=f(q,Ne);!at.done;Fe++,at=G.next())at=ge(Ne,q,Fe,at.value,ce),at!==null&&(n&&at.alternate!==null&&Ne.delete(at.key===null?Fe:at.key),U=_(at,U,Fe),Le===null?Se=at:Le.sibling=at,Le=at);return n&&Ne.forEach(function(UE){return s(q,UE)}),Ct&&ra(q,Fe),Se}function Mt(q,U,G,ce){if(typeof G=="object"&&G!==null&&G.type===F&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case ct:e:{for(var Se=G.key,Le=U;Le!==null;){if(Le.key===Se){if(Se=G.type,Se===F){if(Le.tag===7){u(q,Le.sibling),U=g(Le,G.props.children),U.return=q,q=U;break e}}else if(Le.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===ht&&am(Se)===Le.type){u(q,Le.sibling),U=g(Le,G.props),U.ref=Kl(q,Le,G),U.return=q,q=U;break e}u(q,Le);break}else s(q,Le);Le=Le.sibling}G.type===F?(U=ha(G.props.children,q.mode,ce,G.key),U.return=q,q=U):(ce=Mc(G.type,G.key,G.props,null,q.mode,ce),ce.ref=Kl(q,U,G),ce.return=q,q=ce)}return S(q);case $e:e:{for(Le=G.key;U!==null;){if(U.key===Le)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){u(q,U.sibling),U=g(U,G.children||[]),U.return=q,q=U;break e}else{u(q,U);break}else s(q,U);U=U.sibling}U=ef(G,q.mode,ce),U.return=q,q=U}return S(q);case ht:return Le=G._init,Mt(q,U,Le(G._payload),ce)}if(St(G))return Ee(q,U,G,ce);if(Pe(G))return Ie(q,U,G,ce);hc(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(u(q,U.sibling),U=g(U,G),U.return=q,q=U):(u(q,U),U=Xd(G,q.mode,ce),U.return=q,q=U),S(q)):u(q,U)}return Mt}var Xa=lm(!0),um=lm(!1),dc=to(null),fc=null,el=null,ud=null;function cd(){ud=el=fc=null}function hd(n){var s=dc.current;Tt(dc),n._currentValue=s}function dd(n,s,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),n===u)break;n=n.return}}function tl(n,s){fc=n,ud=el=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Kn=!0),n.firstContext=null)}function Dr(n){var s=n._currentValue;if(ud!==n)if(n={context:n,memoizedValue:s,next:null},el===null){if(fc===null)throw Error(t(308));el=n,fc.dependencies={lanes:0,firstContext:n}}else el=el.next=n;return s}var ia=null;function fd(n){ia===null?ia=[n]:ia.push(n)}function cm(n,s,u,f){var g=s.interleaved;return g===null?(u.next=u,fd(s)):(u.next=g.next,g.next=u),s.interleaved=u,ps(n,f)}function ps(n,s){n.lanes|=s;var u=n.alternate;for(u!==null&&(u.lanes|=s),u=n,n=n.return;n!==null;)n.childLanes|=s,u=n.alternate,u!==null&&(u.childLanes|=s),u=n,n=n.return;return u.tag===3?u.stateNode:null}var io=!1;function pd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ms(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function so(n,s,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(st&2)!==0){var g=f.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),f.pending=s,ps(n,u)}return g=f.interleaved,g===null?(s.next=s,fd(f)):(s.next=g.next,g.next=s),f.interleaved=s,ps(n,u)}function pc(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,tr(n,u)}}function dm(n,s){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?g=_=S:_=_.next=S,u=u.next}while(u!==null);_===null?g=_=s:_=_.next=s}else g=_=s;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}function mc(n,s,u,f){var g=n.updateQueue;io=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,x=g.shared.pending;if(x!==null){g.shared.pending=null;var V=x,Q=V.next;V.next=null,S===null?_=Q:S.next=Q,S=V;var ae=n.alternate;ae!==null&&(ae=ae.updateQueue,x=ae.lastBaseUpdate,x!==S&&(x===null?ae.firstBaseUpdate=Q:x.next=Q,ae.lastBaseUpdate=V))}if(_!==null){var ue=g.baseState;S=0,ae=Q=V=null,x=_;do{var se=x.lane,ge=x.eventTime;if((f&se)===se){ae!==null&&(ae=ae.next={eventTime:ge,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Ee=n,Ie=x;switch(se=s,ge=u,Ie.tag){case 1:if(Ee=Ie.payload,typeof Ee=="function"){ue=Ee.call(ge,ue,se);break e}ue=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ie.payload,se=typeof Ee=="function"?Ee.call(ge,ue,se):Ee,se==null)break e;ue=ne({},ue,se);break e;case 2:io=!0}}x.callback!==null&&x.lane!==0&&(n.flags|=64,se=g.effects,se===null?g.effects=[x]:se.push(x))}else ge={eventTime:ge,lane:se,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ae===null?(Q=ae=ge,V=ue):ae=ae.next=ge,S|=se;if(x=x.next,x===null){if(x=g.shared.pending,x===null)break;se=x,x=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);if(ae===null&&(V=ue),g.baseState=V,g.firstBaseUpdate=Q,g.lastBaseUpdate=ae,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else _===null&&(g.shared.lanes=0);aa|=S,n.lanes=S,n.memoizedState=ue}}function fm(n,s,u){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var f=n[s],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var $l={},ki=to($l),Ql=to($l),Yl=to($l);function sa(n){if(n===$l)throw Error(t(174));return n}function md(n,s){switch(vt(Yl,s),vt(Ql,n),vt(ki,$l),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Bi(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Bi(s,n)}Tt(ki),vt(ki,s)}function nl(){Tt(ki),Tt(Ql),Tt(Yl)}function pm(n){sa(Yl.current);var s=sa(ki.current),u=Bi(s,n.type);s!==u&&(vt(Ql,n),vt(ki,u))}function gd(n){Ql.current===n&&(Tt(ki),Tt(Ql))}var kt=to(0);function gc(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var _d=[];function yd(){for(var n=0;n<_d.length;n++)_d[n]._workInProgressVersionPrimary=null;_d.length=0}var _c=et.ReactCurrentDispatcher,vd=et.ReactCurrentBatchConfig,oa=0,xt=null,$t=null,tn=null,yc=!1,Jl=!1,Xl=0,lE=0;function En(){throw Error(t(321))}function wd(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!sr(n[u],s[u]))return!1;return!0}function Ed(n,s,u,f,g,_){if(oa=_,xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_c.current=n===null||n.memoizedState===null?dE:fE,n=u(f,g),Jl){_=0;do{if(Jl=!1,Xl=0,25<=_)throw Error(t(301));_+=1,tn=$t=null,s.updateQueue=null,_c.current=pE,n=u(f,g)}while(Jl)}if(_c.current=Ec,s=$t!==null&&$t.next!==null,oa=0,tn=$t=xt=null,yc=!1,s)throw Error(t(300));return n}function Td(){var n=Xl!==0;return Xl=0,n}function xi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?xt.memoizedState=tn=n:tn=tn.next=n,tn}function Mr(){if($t===null){var n=xt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var s=tn===null?xt.memoizedState:tn.next;if(s!==null)tn=s,$t=n;else{if(n===null)throw Error(t(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},tn===null?xt.memoizedState=tn=n:tn=tn.next=n}return tn}function eu(n,s){return typeof s=="function"?s(n):s}function Id(n){var s=Mr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=$t,g=f.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}f.baseQueue=g=_,u.pending=null}if(g!==null){_=g.next,f=f.baseState;var x=S=null,V=null,Q=_;do{var ae=Q.lane;if((oa&ae)===ae)V!==null&&(V=V.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),f=Q.hasEagerState?Q.eagerState:n(f,Q.action);else{var ue={lane:ae,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};V===null?(x=V=ue,S=f):V=V.next=ue,xt.lanes|=ae,aa|=ae}Q=Q.next}while(Q!==null&&Q!==_);V===null?S=f:V.next=x,sr(f,s.memoizedState)||(Kn=!0),s.memoizedState=f,s.baseState=S,s.baseQueue=V,u.lastRenderedState=f}if(n=u.interleaved,n!==null){g=n;do _=g.lane,xt.lanes|=_,aa|=_,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function Sd(n){var s=Mr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,g=u.pending,_=s.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do _=n(_,S.action),S=S.next;while(S!==g);sr(_,s.memoizedState)||(Kn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),u.lastRenderedState=_}return[_,f]}function mm(){}function gm(n,s){var u=xt,f=Mr(),g=s(),_=!sr(f.memoizedState,g);if(_&&(f.memoizedState=g,Kn=!0),f=f.queue,Pd(vm.bind(null,u,f,n),[n]),f.getSnapshot!==s||_||tn!==null&&tn.memoizedState.tag&1){if(u.flags|=2048,tu(9,ym.bind(null,u,f,g,s),void 0,null),nn===null)throw Error(t(349));(oa&30)!==0||_m(u,s,g)}return g}function _m(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=xt.updateQueue,s===null?(s={lastEffect:null,stores:null},xt.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function ym(n,s,u,f){s.value=u,s.getSnapshot=f,wm(s)&&Em(n)}function vm(n,s,u){return u(function(){wm(s)&&Em(n)})}function wm(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!sr(n,u)}catch{return!0}}function Em(n){var s=ps(n,1);s!==null&&ti(s,n,1,-1)}function Tm(n){var s=xi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:n},s.queue=n,n=n.dispatch=hE.bind(null,xt,n),[s.memoizedState,n]}function tu(n,s,u,f){return n={tag:n,create:s,destroy:u,deps:f,next:null},s=xt.updateQueue,s===null?(s={lastEffect:null,stores:null},xt.updateQueue=s,s.lastEffect=n.next=n):(u=s.lastEffect,u===null?s.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,s.lastEffect=n)),n}function Im(){return Mr().memoizedState}function vc(n,s,u,f){var g=xi();xt.flags|=n,g.memoizedState=tu(1|s,u,void 0,f===void 0?null:f)}function wc(n,s,u,f){var g=Mr();f=f===void 0?null:f;var _=void 0;if($t!==null){var S=$t.memoizedState;if(_=S.destroy,f!==null&&wd(f,S.deps)){g.memoizedState=tu(s,u,_,f);return}}xt.flags|=n,g.memoizedState=tu(1|s,u,_,f)}function Sm(n,s){return vc(8390656,8,n,s)}function Pd(n,s){return wc(2048,8,n,s)}function Pm(n,s){return wc(4,2,n,s)}function Am(n,s){return wc(4,4,n,s)}function Cm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Rm(n,s,u){return u=u!=null?u.concat([n]):null,wc(4,4,Cm.bind(null,s,n),u)}function Ad(){}function km(n,s){var u=Mr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&wd(s,f[1])?f[0]:(u.memoizedState=[n,s],n)}function xm(n,s){var u=Mr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&wd(s,f[1])?f[0]:(n=n(),u.memoizedState=[n,s],n)}function Lm(n,s,u){return(oa&21)===0?(n.baseState&&(n.baseState=!1,Kn=!0),n.memoizedState=u):(sr(u,s)||(u=Ho(),xt.lanes|=u,aa|=u,n.baseState=!0),s)}function uE(n,s){var u=qe;qe=u!==0&&4>u?u:4,n(!0);var f=vd.transition;vd.transition={};try{n(!1),s()}finally{qe=u,vd.transition=f}}function Nm(){return Mr().memoizedState}function cE(n,s,u){var f=uo(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Om(n))Dm(s,u);else if(u=cm(n,s,u,f),u!==null){var g=zn();ti(u,n,f,g),Mm(u,s,f)}}function hE(n,s,u){var f=uo(n),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Om(n))Dm(s,g);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var S=s.lastRenderedState,x=_(S,u);if(g.hasEagerState=!0,g.eagerState=x,sr(x,S)){var V=s.interleaved;V===null?(g.next=g,fd(s)):(g.next=V.next,V.next=g),s.interleaved=g;return}}catch{}finally{}u=cm(n,s,g,f),u!==null&&(g=zn(),ti(u,n,f,g),Mm(u,s,f))}}function Om(n){var s=n.alternate;return n===xt||s!==null&&s===xt}function Dm(n,s){Jl=yc=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function Mm(n,s,u){if((u&4194240)!==0){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,tr(n,u)}}var Ec={readContext:Dr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},dE={readContext:Dr,useCallback:function(n,s){return xi().memoizedState=[n,s===void 0?null:s],n},useContext:Dr,useEffect:Sm,useImperativeHandle:function(n,s,u){return u=u!=null?u.concat([n]):null,vc(4194308,4,Cm.bind(null,s,n),u)},useLayoutEffect:function(n,s){return vc(4194308,4,n,s)},useInsertionEffect:function(n,s){return vc(4,2,n,s)},useMemo:function(n,s){var u=xi();return s=s===void 0?null:s,n=n(),u.memoizedState=[n,s],n},useReducer:function(n,s,u){var f=xi();return s=u!==void 0?u(s):s,f.memoizedState=f.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},f.queue=n,n=n.dispatch=cE.bind(null,xt,n),[f.memoizedState,n]},useRef:function(n){var s=xi();return n={current:n},s.memoizedState=n},useState:Tm,useDebugValue:Ad,useDeferredValue:function(n){return xi().memoizedState=n},useTransition:function(){var n=Tm(!1),s=n[0];return n=uE.bind(null,n[1]),xi().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,u){var f=xt,g=xi();if(Ct){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),nn===null)throw Error(t(349));(oa&30)!==0||_m(f,s,u)}g.memoizedState=u;var _={value:u,getSnapshot:s};return g.queue=_,Sm(vm.bind(null,f,_,n),[n]),f.flags|=2048,tu(9,ym.bind(null,f,_,u,s),void 0,null),u},useId:function(){var n=xi(),s=nn.identifierPrefix;if(Ct){var u=fs,f=ds;u=(f&~(1<<32-ze(f)-1)).toString(32)+u,s=":"+s+"R"+u,u=Xl++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=lE++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},fE={readContext:Dr,useCallback:km,useContext:Dr,useEffect:Pd,useImperativeHandle:Rm,useInsertionEffect:Pm,useLayoutEffect:Am,useMemo:xm,useReducer:Id,useRef:Im,useState:function(){return Id(eu)},useDebugValue:Ad,useDeferredValue:function(n){var s=Mr();return Lm(s,$t.memoizedState,n)},useTransition:function(){var n=Id(eu)[0],s=Mr().memoizedState;return[n,s]},useMutableSource:mm,useSyncExternalStore:gm,useId:Nm,unstable_isNewReconciler:!1},pE={readContext:Dr,useCallback:km,useContext:Dr,useEffect:Pd,useImperativeHandle:Rm,useInsertionEffect:Pm,useLayoutEffect:Am,useMemo:xm,useReducer:Sd,useRef:Im,useState:function(){return Sd(eu)},useDebugValue:Ad,useDeferredValue:function(n){var s=Mr();return $t===null?s.memoizedState=n:Lm(s,$t.memoizedState,n)},useTransition:function(){var n=Sd(eu)[0],s=Mr().memoizedState;return[n,s]},useMutableSource:mm,useSyncExternalStore:gm,useId:Nm,unstable_isNewReconciler:!1};function Jr(n,s){if(n&&n.defaultProps){s=ne({},s),n=n.defaultProps;for(var u in n)s[u]===void 0&&(s[u]=n[u]);return s}return s}function Cd(n,s,u,f){s=n.memoizedState,u=u(f,s),u=u==null?s:ne({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Tc={isMounted:function(n){return(n=n._reactInternals)?Un(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var f=zn(),g=uo(n),_=ms(f,g);_.payload=s,u!=null&&(_.callback=u),s=so(n,_,g),s!==null&&(ti(s,n,g,f),pc(s,n,g))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var f=zn(),g=uo(n),_=ms(f,g);_.tag=1,_.payload=s,u!=null&&(_.callback=u),s=so(n,_,g),s!==null&&(ti(s,n,g,f),pc(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=zn(),f=uo(n),g=ms(u,f);g.tag=2,s!=null&&(g.callback=s),s=so(n,g,f),s!==null&&(ti(s,n,f,u),pc(s,n,f))}};function bm(n,s,u,f,g,_,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,_,S):s.prototype&&s.prototype.isPureReactComponent?!Pi(u,f)||!Pi(g,_):!0}function Vm(n,s,u){var f=!1,g=no,_=s.contextType;return typeof _=="object"&&_!==null?_=Dr(_):(g=Zn(s)?ta:wn.current,f=s.contextTypes,_=(f=f!=null)?$a(n,g):no),s=new s(u,_),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tc,n.stateNode=s,s._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=_),s}function Fm(n,s,u,f){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==n&&Tc.enqueueReplaceState(s,s.state,null)}function Rd(n,s,u,f){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},pd(n);var _=s.contextType;typeof _=="object"&&_!==null?g.context=Dr(_):(_=Zn(s)?ta:wn.current,g.context=$a(n,_)),g.state=n.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(Cd(n,s,_,u),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Tc.enqueueReplaceState(g,g.state,null),mc(n,u,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function rl(n,s){try{var u="",f=s;do u+=we(f),f=f.return;while(f);var g=u}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:s,stack:g,digest:null}}function kd(n,s,u){return{value:n,source:null,stack:u??null,digest:s??null}}function xd(n,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var mE=typeof WeakMap=="function"?WeakMap:Map;function zm(n,s,u){u=ms(-1,u),u.tag=3,u.payload={element:null};var f=s.value;return u.callback=function(){kc||(kc=!0,qd=f),xd(n,s)},u}function Um(n,s,u){u=ms(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=s.value;u.payload=function(){return f(g)},u.callback=function(){xd(n,s)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){xd(n,s),typeof f!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),u}function Bm(n,s,u){var f=n.pingCache;if(f===null){f=n.pingCache=new mE;var g=new Set;f.set(s,g)}else g=f.get(s),g===void 0&&(g=new Set,f.set(s,g));g.has(u)||(g.add(u),n=kE.bind(null,n,s,u),s.then(n,n))}function jm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Hm(n,s,u,f,g){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=ms(-1,1),s.tag=2,so(u,s,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var gE=et.ReactCurrentOwner,Kn=!1;function Fn(n,s,u,f){s.child=n===null?um(s,null,u,f):Xa(s,n.child,u,f)}function Wm(n,s,u,f,g){u=u.render;var _=s.ref;return tl(s,g),f=Ed(n,s,u,f,_,g),u=Td(),n!==null&&!Kn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,gs(n,s,g)):(Ct&&u&&id(s),s.flags|=1,Fn(n,s,f,g),s.child)}function qm(n,s,u,f,g){if(n===null){var _=u.type;return typeof _=="function"&&!Jd(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=_,Gm(n,s,_,f,g)):(n=Mc(u.type,null,f,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(_=n.child,(n.lanes&g)===0){var S=_.memoizedProps;if(u=u.compare,u=u!==null?u:Pi,u(S,f)&&n.ref===s.ref)return gs(n,s,g)}return s.flags|=1,n=ho(_,f),n.ref=s.ref,n.return=s,s.child=n}function Gm(n,s,u,f,g){if(n!==null){var _=n.memoizedProps;if(Pi(_,f)&&n.ref===s.ref)if(Kn=!1,s.pendingProps=f=_,(n.lanes&g)!==0)(n.flags&131072)!==0&&(Kn=!0);else return s.lanes=n.lanes,gs(n,s,g)}return Ld(n,s,u,f,g)}function Zm(n,s,u){var f=s.pendingProps,g=f.children,_=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(sl,ur),ur|=u;else{if((u&1073741824)===0)return n=_!==null?_.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,vt(sl,ur),ur|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,vt(sl,ur),ur|=f}else _!==null?(f=_.baseLanes|u,s.memoizedState=null):f=u,vt(sl,ur),ur|=f;return Fn(n,s,g,u),s.child}function Km(n,s){var u=s.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function Ld(n,s,u,f,g){var _=Zn(u)?ta:wn.current;return _=$a(s,_),tl(s,g),u=Ed(n,s,u,f,_,g),f=Td(),n!==null&&!Kn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,gs(n,s,g)):(Ct&&f&&id(s),s.flags|=1,Fn(n,s,u,g),s.child)}function $m(n,s,u,f,g){if(Zn(u)){var _=!0;oc(s)}else _=!1;if(tl(s,g),s.stateNode===null)Sc(n,s),Vm(s,u,f),Rd(s,u,f,g),f=!0;else if(n===null){var S=s.stateNode,x=s.memoizedProps;S.props=x;var V=S.context,Q=u.contextType;typeof Q=="object"&&Q!==null?Q=Dr(Q):(Q=Zn(u)?ta:wn.current,Q=$a(s,Q));var ae=u.getDerivedStateFromProps,ue=typeof ae=="function"||typeof S.getSnapshotBeforeUpdate=="function";ue||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==f||V!==Q)&&Fm(s,S,f,Q),io=!1;var se=s.memoizedState;S.state=se,mc(s,f,S,g),V=s.memoizedState,x!==f||se!==V||Gn.current||io?(typeof ae=="function"&&(Cd(s,u,ae,f),V=s.memoizedState),(x=io||bm(s,u,x,f,se,V,Q))?(ue||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=V),S.props=f,S.state=V,S.context=Q,f=x):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{S=s.stateNode,hm(n,s),x=s.memoizedProps,Q=s.type===s.elementType?x:Jr(s.type,x),S.props=Q,ue=s.pendingProps,se=S.context,V=u.contextType,typeof V=="object"&&V!==null?V=Dr(V):(V=Zn(u)?ta:wn.current,V=$a(s,V));var ge=u.getDerivedStateFromProps;(ae=typeof ge=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==ue||se!==V)&&Fm(s,S,f,V),io=!1,se=s.memoizedState,S.state=se,mc(s,f,S,g);var Ee=s.memoizedState;x!==ue||se!==Ee||Gn.current||io?(typeof ge=="function"&&(Cd(s,u,ge,f),Ee=s.memoizedState),(Q=io||bm(s,u,Q,f,se,Ee,V)||!1)?(ae||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Ee,V),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Ee,V)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||x===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Ee),S.props=f,S.state=Ee,S.context=V,f=Q):(typeof S.componentDidUpdate!="function"||x===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),f=!1)}return Nd(n,s,u,f,_,g)}function Nd(n,s,u,f,g,_){Km(n,s);var S=(s.flags&128)!==0;if(!f&&!S)return g&&em(s,u,!1),gs(n,s,_);f=s.stateNode,gE.current=s;var x=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,n!==null&&S?(s.child=Xa(s,n.child,null,_),s.child=Xa(s,null,x,_)):Fn(n,s,x,_),s.memoizedState=f.state,g&&em(s,u,!0),s.child}function Qm(n){var s=n.stateNode;s.pendingContext?Jp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Jp(n,s.context,!1),md(n,s.containerInfo)}function Ym(n,s,u,f,g){return Ja(),ld(g),s.flags|=256,Fn(n,s,u,f),s.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Dd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Jm(n,s,u){var f=s.pendingProps,g=kt.current,_=!1,S=(s.flags&128)!==0,x;if((x=S)||(x=n!==null&&n.memoizedState===null?!1:(g&2)!==0),x?(_=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),vt(kt,g&1),n===null)return ad(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=f.children,n=f.fallback,_?(f=s.mode,_=s.child,S={mode:"hidden",children:S},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=S):_=bc(S,f,0,null),n=ha(n,f,u,null),_.return=s,n.return=s,_.sibling=n,s.child=_,s.child.memoizedState=Dd(u),s.memoizedState=Od,n):Md(s,S));if(g=n.memoizedState,g!==null&&(x=g.dehydrated,x!==null))return _E(n,s,S,f,x,g,u);if(_){_=f.fallback,S=s.mode,g=n.child,x=g.sibling;var V={mode:"hidden",children:f.children};return(S&1)===0&&s.child!==g?(f=s.child,f.childLanes=0,f.pendingProps=V,s.deletions=null):(f=ho(g,V),f.subtreeFlags=g.subtreeFlags&14680064),x!==null?_=ho(x,_):(_=ha(_,S,u,null),_.flags|=2),_.return=s,f.return=s,f.sibling=_,s.child=f,f=_,_=s.child,S=n.child.memoizedState,S=S===null?Dd(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=n.childLanes&~u,s.memoizedState=Od,f}return _=n.child,n=_.sibling,f=ho(_,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=u),f.return=s,f.sibling=null,n!==null&&(u=s.deletions,u===null?(s.deletions=[n],s.flags|=16):u.push(n)),s.child=f,s.memoizedState=null,f}function Md(n,s){return s=bc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Ic(n,s,u,f){return f!==null&&ld(f),Xa(s,n.child,null,u),n=Md(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function _E(n,s,u,f,g,_,S){if(u)return s.flags&256?(s.flags&=-257,f=kd(Error(t(422))),Ic(n,s,S,f)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(_=f.fallback,g=s.mode,f=bc({mode:"visible",children:f.children},g,0,null),_=ha(_,g,S,null),_.flags|=2,f.return=s,_.return=s,f.sibling=_,s.child=f,(s.mode&1)!==0&&Xa(s,n.child,null,S),s.child.memoizedState=Dd(S),s.memoizedState=Od,_);if((s.mode&1)===0)return Ic(n,s,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var x=f.dgst;return f=x,_=Error(t(419)),f=kd(_,f,void 0),Ic(n,s,S,f)}if(x=(S&n.childLanes)!==0,Kn||x){if(f=nn,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,ps(n,g),ti(f,n,g,-1))}return Yd(),f=kd(Error(t(421))),Ic(n,s,S,f)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=xE.bind(null,n),g._reactRetry=s,null):(n=_.treeContext,lr=Ri(g.nextSibling),ar=s,Ct=!0,Yr=null,n!==null&&(Nr[Or++]=ds,Nr[Or++]=fs,Nr[Or++]=na,ds=n.id,fs=n.overflow,na=s),s=Md(s,f.children),s.flags|=4096,s)}function Xm(n,s,u){n.lanes|=s;var f=n.alternate;f!==null&&(f.lanes|=s),dd(n.return,s,u)}function bd(n,s,u,f,g){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=g)}function eg(n,s,u){var f=s.pendingProps,g=f.revealOrder,_=f.tail;if(Fn(n,s,f.children,u),f=kt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xm(n,u,s);else if(n.tag===19)Xm(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(vt(kt,f),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(u=s.child,g=null;u!==null;)n=u.alternate,n!==null&&gc(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=s.child,s.child=null):(g=u.sibling,u.sibling=null),bd(s,!1,g,u,_);break;case"backwards":for(u=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&gc(n)===null){s.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}bd(s,!0,u,null,_);break;case"together":bd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Sc(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function gs(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),aa|=s.lanes,(u&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,u=ho(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=ho(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function yE(n,s,u){switch(s.tag){case 3:Qm(s),Ja();break;case 5:pm(s);break;case 1:Zn(s.type)&&oc(s);break;case 4:md(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,g=s.memoizedProps.value;vt(dc,f._currentValue),f._currentValue=g;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(vt(kt,kt.current&1),s.flags|=128,null):(u&s.child.childLanes)!==0?Jm(n,s,u):(vt(kt,kt.current&1),n=gs(n,s,u),n!==null?n.sibling:null);vt(kt,kt.current&1);break;case 19:if(f=(u&s.childLanes)!==0,(n.flags&128)!==0){if(f)return eg(n,s,u);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),vt(kt,kt.current),f)break;return null;case 22:case 23:return s.lanes=0,Zm(n,s,u)}return gs(n,s,u)}var tg,Vd,ng,rg;tg=function(n,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Vd=function(){},ng=function(n,s,u,f){var g=n.memoizedProps;if(g!==f){n=s.stateNode,sa(ki.current);var _=null;switch(u){case"input":g=Cs(n,g),f=Cs(n,f),_=[];break;case"select":g=ne({},g,{value:void 0}),f=ne({},f,{value:void 0}),_=[];break;case"textarea":g=Rs(n,g),f=Rs(n,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=ie)}er(u,f);var S;u=null;for(Q in g)if(!f.hasOwnProperty(Q)&&g.hasOwnProperty(Q)&&g[Q]!=null)if(Q==="style"){var x=g[Q];for(S in x)x.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(l.hasOwnProperty(Q)?_||(_=[]):(_=_||[]).push(Q,null));for(Q in f){var V=f[Q];if(x=g!=null?g[Q]:void 0,f.hasOwnProperty(Q)&&V!==x&&(V!=null||x!=null))if(Q==="style")if(x){for(S in x)!x.hasOwnProperty(S)||V&&V.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in V)V.hasOwnProperty(S)&&x[S]!==V[S]&&(u||(u={}),u[S]=V[S])}else u||(_||(_=[]),_.push(Q,u)),u=V;else Q==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,x=x?x.__html:void 0,V!=null&&x!==V&&(_=_||[]).push(Q,V)):Q==="children"?typeof V!="string"&&typeof V!="number"||(_=_||[]).push(Q,""+V):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(l.hasOwnProperty(Q)?(V!=null&&Q==="onScroll"&&gt("scroll",n),_||x===V||(_=[])):(_=_||[]).push(Q,V))}u&&(_=_||[]).push("style",u);var Q=_;(s.updateQueue=Q)&&(s.flags|=4)}},rg=function(n,s,u,f){u!==f&&(s.flags|=4)};function nu(n,s){if(!Ct)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Tn(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(s)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=u,s}function vE(n,s,u){var f=s.pendingProps;switch(sd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(s),null;case 1:return Zn(s.type)&&sc(),Tn(s),null;case 3:return f=s.stateNode,nl(),Tt(Gn),Tt(wn),yd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(cc(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Yr!==null&&(Kd(Yr),Yr=null))),Vd(n,s),Tn(s),null;case 5:gd(s);var g=sa(Yl.current);if(u=s.type,n!==null&&s.stateNode!=null)ng(n,s,u,f,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return Tn(s),null}if(n=sa(ki.current),cc(s)){f=s.stateNode,u=s.type;var _=s.memoizedProps;switch(f[Lr]=s,f[Xs]=_,n=(s.mode&1)!==0,u){case"dialog":gt("cancel",f),gt("close",f);break;case"iframe":case"object":case"embed":gt("load",f);break;case"video":case"audio":for(g=0;g<Qs.length;g++)gt(Qs[g],f);break;case"source":gt("error",f);break;case"img":case"image":case"link":gt("error",f),gt("load",f);break;case"details":gt("toggle",f);break;case"input":bo(f,_),gt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},gt("invalid",f);break;case"textarea":ks(f,_),gt("invalid",f)}er(u,_),g=null;for(var S in _)if(_.hasOwnProperty(S)){var x=_[S];S==="children"?typeof x=="string"?f.textContent!==x&&(_.suppressHydrationWarning!==!0&&$(f.textContent,x,n),g=["children",x]):typeof x=="number"&&f.textContent!==""+x&&(_.suppressHydrationWarning!==!0&&$(f.textContent,x,n),g=["children",""+x]):l.hasOwnProperty(S)&&x!=null&&S==="onScroll"&&gt("scroll",f)}switch(u){case"input":oi(f),ai(f,_,!0);break;case"textarea":oi(f),li(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=ie)}f=g,s.updateQueue=f,f!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ui(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(u,{is:f.is}):(n=S.createElement(u),u==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,u),n[Lr]=s,n[Xs]=f,tg(n,s,!1,!1),s.stateNode=n;e:{switch(S=dr(u,f),u){case"dialog":gt("cancel",n),gt("close",n),g=f;break;case"iframe":case"object":case"embed":gt("load",n),g=f;break;case"video":case"audio":for(g=0;g<Qs.length;g++)gt(Qs[g],n);g=f;break;case"source":gt("error",n),g=f;break;case"img":case"image":case"link":gt("error",n),gt("load",n),g=f;break;case"details":gt("toggle",n),g=f;break;case"input":bo(n,f),g=Cs(n,f),gt("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=ne({},f,{value:void 0}),gt("invalid",n);break;case"textarea":ks(n,f),g=Rs(n,f),gt("invalid",n);break;default:g=f}er(u,g),x=g;for(_ in x)if(x.hasOwnProperty(_)){var V=x[_];_==="style"?ci(n,V):_==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&ka(n,V)):_==="children"?typeof V=="string"?(u!=="textarea"||V!=="")&&ui(n,V):typeof V=="number"&&ui(n,""+V):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(l.hasOwnProperty(_)?V!=null&&_==="onScroll"&&gt("scroll",n):V!=null&&De(n,_,V,S))}switch(u){case"input":oi(n),ai(n,f,!1);break;case"textarea":oi(n),li(n);break;case"option":f.value!=null&&n.setAttribute("value",""+He(f.value));break;case"select":n.multiple=!!f.multiple,_=f.value,_!=null?Rn(n,!!f.multiple,_,!1):f.defaultValue!=null&&Rn(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=ie)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Tn(s),null;case 6:if(n&&s.stateNode!=null)rg(n,s,n.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(u=sa(Yl.current),sa(ki.current),cc(s)){if(f=s.stateNode,u=s.memoizedProps,f[Lr]=s,(_=f.nodeValue!==u)&&(n=ar,n!==null))switch(n.tag){case 3:$(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&$(f.nodeValue,u,(n.mode&1)!==0)}_&&(s.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Lr]=s,s.stateNode=f}return Tn(s),null;case 13:if(Tt(kt),f=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ct&&lr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)om(),Ja(),s.flags|=98560,_=!1;else if(_=cc(s),f!==null&&f.dehydrated!==null){if(n===null){if(!_)throw Error(t(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Lr]=s}else Ja(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tn(s),_=!1}else Yr!==null&&(Kd(Yr),Yr=null),_=!0;if(!_)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=u,s):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(kt.current&1)!==0?Qt===0&&(Qt=3):Yd())),s.updateQueue!==null&&(s.flags|=4),Tn(s),null);case 4:return nl(),Vd(n,s),n===null&&Ys(s.stateNode.containerInfo),Tn(s),null;case 10:return hd(s.type._context),Tn(s),null;case 17:return Zn(s.type)&&sc(),Tn(s),null;case 19:if(Tt(kt),_=s.memoizedState,_===null)return Tn(s),null;if(f=(s.flags&128)!==0,S=_.rendering,S===null)if(f)nu(_,!1);else{if(Qt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(S=gc(n),S!==null){for(s.flags|=128,nu(_,!1),f=S.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=u,u=s.child;u!==null;)_=u,n=f,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,n=S.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return vt(kt,kt.current&1|2),s.child}n=n.sibling}_.tail!==null&&_t()>ol&&(s.flags|=128,f=!0,nu(_,!1),s.lanes=4194304)}else{if(!f)if(n=gc(S),n!==null){if(s.flags|=128,f=!0,u=n.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),nu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!Ct)return Tn(s),null}else 2*_t()-_.renderingStartTime>ol&&u!==1073741824&&(s.flags|=128,f=!0,nu(_,!1),s.lanes=4194304);_.isBackwards?(S.sibling=s.child,s.child=S):(u=_.last,u!==null?u.sibling=S:s.child=S,_.last=S)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=_t(),s.sibling=null,u=kt.current,vt(kt,f?u&1|2:u&1),s):(Tn(s),null);case 22:case 23:return Qd(),f=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(ur&1073741824)!==0&&(Tn(s),s.subtreeFlags&6&&(s.flags|=8192)):Tn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function wE(n,s){switch(sd(s),s.tag){case 1:return Zn(s.type)&&sc(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return nl(),Tt(Gn),Tt(wn),yd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return gd(s),null;case 13:if(Tt(kt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ja()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Tt(kt),null;case 4:return nl(),null;case 10:return hd(s.type._context),null;case 22:case 23:return Qd(),null;case 24:return null;default:return null}}var Pc=!1,In=!1,EE=typeof WeakSet=="function"?WeakSet:Set,ve=null;function il(n,s){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ot(n,s,f)}else u.current=null}function Fd(n,s,u){try{u()}catch(f){Ot(n,s,f)}}var ig=!1;function TE(n,s){if(de=Tr,n=zl(),Ul(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var S=0,x=-1,V=-1,Q=0,ae=0,ue=n,se=null;t:for(;;){for(var ge;ue!==u||g!==0&&ue.nodeType!==3||(x=S+g),ue!==_||f!==0&&ue.nodeType!==3||(V=S+f),ue.nodeType===3&&(S+=ue.nodeValue.length),(ge=ue.firstChild)!==null;)se=ue,ue=ge;for(;;){if(ue===n)break t;if(se===u&&++Q===g&&(x=S),se===_&&++ae===f&&(V=S),(ge=ue.nextSibling)!==null)break;ue=se,se=ue.parentNode}ue=ge}u=x===-1||V===-1?null:{start:x,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(ke={focusedElem:n,selectionRange:u},Tr=!1,ve=s;ve!==null;)if(s=ve,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ve=n;else for(;ve!==null;){s=ve;try{var Ee=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Ie=Ee.memoizedProps,Mt=Ee.memoizedState,q=s.stateNode,U=q.getSnapshotBeforeUpdate(s.elementType===s.type?Ie:Jr(s.type,Ie),Mt);q.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=s.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){Ot(s,s.return,ce)}if(n=s.sibling,n!==null){n.return=s.return,ve=n;break}ve=s.return}return Ee=ig,ig=!1,Ee}function ru(n,s,u){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var _=g.destroy;g.destroy=void 0,_!==void 0&&Fd(s,u,_)}g=g.next}while(g!==f)}}function Ac(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==s)}}function zd(n){var s=n.ref;if(s!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof s=="function"?s(n):s.current=n}}function sg(n){var s=n.alternate;s!==null&&(n.alternate=null,sg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Lr],delete s[Xs],delete s[eo],delete s[ed],delete s[td])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function og(n){return n.tag===5||n.tag===3||n.tag===4}function ag(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||og(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ud(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=ie));else if(f!==4&&(n=n.child,n!==null))for(Ud(n,s,u),n=n.sibling;n!==null;)Ud(n,s,u),n=n.sibling}function Bd(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Bd(n,s,u),n=n.sibling;n!==null;)Bd(n,s,u),n=n.sibling}var un=null,Xr=!1;function oo(n,s,u){for(u=u.child;u!==null;)lg(n,s,u),u=u.sibling}function lg(n,s,u){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(gi,u)}catch{}switch(u.tag){case 5:In||il(u,s);case 6:var f=un,g=Xr;un=null,oo(n,s,u),un=f,Xr=g,un!==null&&(Xr?(n=un,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):un.removeChild(u.stateNode));break;case 18:un!==null&&(Xr?(n=un,u=u.stateNode,n.nodeType===8?Zl(n.parentNode,u):n.nodeType===1&&Zl(n,u),gn(n)):Zl(un,u.stateNode));break;case 4:f=un,g=Xr,un=u.stateNode.containerInfo,Xr=!0,oo(n,s,u),un=f,Xr=g;break;case 0:case 11:case 14:case 15:if(!In&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,S=_.destroy;_=_.tag,S!==void 0&&((_&2)!==0||(_&4)!==0)&&Fd(u,s,S),g=g.next}while(g!==f)}oo(n,s,u);break;case 1:if(!In&&(il(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(x){Ot(u,s,x)}oo(n,s,u);break;case 21:oo(n,s,u);break;case 22:u.mode&1?(In=(f=In)||u.memoizedState!==null,oo(n,s,u),In=f):oo(n,s,u);break;default:oo(n,s,u)}}function ug(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new EE),s.forEach(function(f){var g=LE.bind(null,n,f);u.has(f)||(u.add(f),f.then(g,g))})}}function ei(n,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var _=n,S=s,x=S;e:for(;x!==null;){switch(x.tag){case 5:un=x.stateNode,Xr=!1;break e;case 3:un=x.stateNode.containerInfo,Xr=!0;break e;case 4:un=x.stateNode.containerInfo,Xr=!0;break e}x=x.return}if(un===null)throw Error(t(160));lg(_,S,g),un=null,Xr=!1;var V=g.alternate;V!==null&&(V.return=null),g.return=null}catch(Q){Ot(g,s,Q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)cg(s,n),s=s.sibling}function cg(n,s){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ei(s,n),Li(n),f&4){try{ru(3,n,n.return),Ac(3,n)}catch(Ie){Ot(n,n.return,Ie)}try{ru(5,n,n.return)}catch(Ie){Ot(n,n.return,Ie)}}break;case 1:ei(s,n),Li(n),f&512&&u!==null&&il(u,u.return);break;case 5:if(ei(s,n),Li(n),f&512&&u!==null&&il(u,u.return),n.flags&32){var g=n.stateNode;try{ui(g,"")}catch(Ie){Ot(n,n.return,Ie)}}if(f&4&&(g=n.stateNode,g!=null)){var _=n.memoizedProps,S=u!==null?u.memoizedProps:_,x=n.type,V=n.updateQueue;if(n.updateQueue=null,V!==null)try{x==="input"&&_.type==="radio"&&_.name!=null&&zi(g,_),dr(x,S);var Q=dr(x,_);for(S=0;S<V.length;S+=2){var ae=V[S],ue=V[S+1];ae==="style"?ci(g,ue):ae==="dangerouslySetInnerHTML"?ka(g,ue):ae==="children"?ui(g,ue):De(g,ae,ue,Q)}switch(x){case"input":jr(g,_);break;case"textarea":Ra(g,_);break;case"select":var se=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var ge=_.value;ge!=null?Rn(g,!!_.multiple,ge,!1):se!==!!_.multiple&&(_.defaultValue!=null?Rn(g,!!_.multiple,_.defaultValue,!0):Rn(g,!!_.multiple,_.multiple?[]:"",!1))}g[Xs]=_}catch(Ie){Ot(n,n.return,Ie)}}break;case 6:if(ei(s,n),Li(n),f&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,_=n.memoizedProps;try{g.nodeValue=_}catch(Ie){Ot(n,n.return,Ie)}}break;case 3:if(ei(s,n),Li(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{gn(s.containerInfo)}catch(Ie){Ot(n,n.return,Ie)}break;case 4:ei(s,n),Li(n);break;case 13:ei(s,n),Li(n),g=n.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(Wd=_t())),f&4&&ug(n);break;case 22:if(ae=u!==null&&u.memoizedState!==null,n.mode&1?(In=(Q=In)||ae,ei(s,n),In=Q):ei(s,n),Li(n),f&8192){if(Q=n.memoizedState!==null,(n.stateNode.isHidden=Q)&&!ae&&(n.mode&1)!==0)for(ve=n,ae=n.child;ae!==null;){for(ue=ve=ae;ve!==null;){switch(se=ve,ge=se.child,se.tag){case 0:case 11:case 14:case 15:ru(4,se,se.return);break;case 1:il(se,se.return);var Ee=se.stateNode;if(typeof Ee.componentWillUnmount=="function"){f=se,u=se.return;try{s=f,Ee.props=s.memoizedProps,Ee.state=s.memoizedState,Ee.componentWillUnmount()}catch(Ie){Ot(f,u,Ie)}}break;case 5:il(se,se.return);break;case 22:if(se.memoizedState!==null){fg(ue);continue}}ge!==null?(ge.return=se,ve=ge):fg(ue)}ae=ae.sibling}e:for(ae=null,ue=n;;){if(ue.tag===5){if(ae===null){ae=ue;try{g=ue.stateNode,Q?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(x=ue.stateNode,V=ue.memoizedProps.style,S=V!=null&&V.hasOwnProperty("display")?V.display:null,x.style.display=qr("display",S))}catch(Ie){Ot(n,n.return,Ie)}}}else if(ue.tag===6){if(ae===null)try{ue.stateNode.nodeValue=Q?"":ue.memoizedProps}catch(Ie){Ot(n,n.return,Ie)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===n)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===n)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===n)break e;ae===ue&&(ae=null),ue=ue.return}ae===ue&&(ae=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:ei(s,n),Li(n),f&4&&ug(n);break;case 21:break;default:ei(s,n),Li(n)}}function Li(n){var s=n.flags;if(s&2){try{e:{for(var u=n.return;u!==null;){if(og(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(ui(g,""),f.flags&=-33);var _=ag(n);Bd(n,_,g);break;case 3:case 4:var S=f.stateNode.containerInfo,x=ag(n);Ud(n,x,S);break;default:throw Error(t(161))}}catch(V){Ot(n,n.return,V)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function IE(n,s,u){ve=n,hg(n)}function hg(n,s,u){for(var f=(n.mode&1)!==0;ve!==null;){var g=ve,_=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||Pc;if(!S){var x=g.alternate,V=x!==null&&x.memoizedState!==null||In;x=Pc;var Q=In;if(Pc=S,(In=V)&&!Q)for(ve=g;ve!==null;)S=ve,V=S.child,S.tag===22&&S.memoizedState!==null?pg(g):V!==null?(V.return=S,ve=V):pg(g);for(;_!==null;)ve=_,hg(_),_=_.sibling;ve=g,Pc=x,In=Q}dg(n)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,ve=_):dg(n)}}function dg(n){for(;ve!==null;){var s=ve;if((s.flags&8772)!==0){var u=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:In||Ac(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!In)if(u===null)f.componentDidMount();else{var g=s.elementType===s.type?u.memoizedProps:Jr(s.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=s.updateQueue;_!==null&&fm(s,_,f);break;case 3:var S=s.updateQueue;if(S!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}fm(s,S,u)}break;case 5:var x=s.stateNode;if(u===null&&s.flags&4){u=x;var V=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&u.focus();break;case"img":V.src&&(u.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Q=s.alternate;if(Q!==null){var ae=Q.memoizedState;if(ae!==null){var ue=ae.dehydrated;ue!==null&&gn(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}In||s.flags&512&&zd(s)}catch(se){Ot(s,s.return,se)}}if(s===n){ve=null;break}if(u=s.sibling,u!==null){u.return=s.return,ve=u;break}ve=s.return}}function fg(n){for(;ve!==null;){var s=ve;if(s===n){ve=null;break}var u=s.sibling;if(u!==null){u.return=s.return,ve=u;break}ve=s.return}}function pg(n){for(;ve!==null;){var s=ve;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{Ac(4,s)}catch(V){Ot(s,u,V)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var g=s.return;try{f.componentDidMount()}catch(V){Ot(s,g,V)}}var _=s.return;try{zd(s)}catch(V){Ot(s,_,V)}break;case 5:var S=s.return;try{zd(s)}catch(V){Ot(s,S,V)}}}catch(V){Ot(s,s.return,V)}if(s===n){ve=null;break}var x=s.sibling;if(x!==null){x.return=s.return,ve=x;break}ve=s.return}}var SE=Math.ceil,Cc=et.ReactCurrentDispatcher,jd=et.ReactCurrentOwner,br=et.ReactCurrentBatchConfig,st=0,nn=null,Bt=null,cn=0,ur=0,sl=to(0),Qt=0,iu=null,aa=0,Rc=0,Hd=0,su=null,$n=null,Wd=0,ol=1/0,_s=null,kc=!1,qd=null,ao=null,xc=!1,lo=null,Lc=0,ou=0,Gd=null,Nc=-1,Oc=0;function zn(){return(st&6)!==0?_t():Nc!==-1?Nc:Nc=_t()}function uo(n){return(n.mode&1)===0?1:(st&2)!==0&&cn!==0?cn&-cn:aE.transition!==null?(Oc===0&&(Oc=Ho()),Oc):(n=qe,n!==0||(n=window.event,n=n===void 0?16:Ge(n.type)),n)}function ti(n,s,u,f){if(50<ou)throw ou=0,Gd=null,Error(t(185));xn(n,u,f),((st&2)===0||n!==nn)&&(n===nn&&((st&2)===0&&(Rc|=u),Qt===4&&co(n,cn)),Qn(n,f),u===1&&st===0&&(s.mode&1)===0&&(ol=_t()+500,ac&&ro()))}function Qn(n,s){var u=n.callbackNode;vr(n,s);var f=lt(n,n===nn?cn:0);if(f===0)u!==null&&Gi(u),n.callbackNode=null,n.callbackPriority=0;else if(s=f&-f,n.callbackPriority!==s){if(u!=null&&Gi(u),s===1)n.tag===0?oE(gg.bind(null,n)):tm(gg.bind(null,n)),vn(function(){(st&6)===0&&ro()}),u=null;else{switch(mn(f)){case 1:u=Os;break;case 4:u=jo;break;case 16:u=Ki;break;case 536870912:u=_r;break;default:u=Ki}u=Sg(u,mg.bind(null,n))}n.callbackPriority=s,n.callbackNode=u}}function mg(n,s){if(Nc=-1,Oc=0,(st&6)!==0)throw Error(t(327));var u=n.callbackNode;if(al()&&n.callbackNode!==u)return null;var f=lt(n,n===nn?cn:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||s)s=Dc(n,f);else{s=f;var g=st;st|=2;var _=yg();(nn!==n||cn!==s)&&(_s=null,ol=_t()+500,ua(n,s));do try{CE();break}catch(x){_g(n,x)}while(!0);cd(),Cc.current=_,st=g,Bt!==null?s=0:(nn=null,cn=0,s=Qt)}if(s!==0){if(s===2&&(g=Xt(n),g!==0&&(f=g,s=Zd(n,g))),s===1)throw u=iu,ua(n,0),co(n,f),Qn(n,_t()),u;if(s===6)co(n,f);else{if(g=n.current.alternate,(f&30)===0&&!PE(g)&&(s=Dc(n,f),s===2&&(_=Xt(n),_!==0&&(f=_,s=Zd(n,_))),s===1))throw u=iu,ua(n,0),co(n,f),Qn(n,_t()),u;switch(n.finishedWork=g,n.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:ca(n,$n,_s);break;case 3:if(co(n,f),(f&130023424)===f&&(s=Wd+500-_t(),10<s)){if(lt(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){zn(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Kt(ca.bind(null,n,$n,_s),s);break}ca(n,$n,_s);break;case 4:if(co(n,f),(f&4194240)===f)break;for(s=n.eventTimes,g=-1;0<f;){var S=31-ze(f);_=1<<S,S=s[S],S>g&&(g=S),f&=~_}if(f=g,f=_t()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*SE(f/1960))-f,10<f){n.timeoutHandle=Kt(ca.bind(null,n,$n,_s),f);break}ca(n,$n,_s);break;case 5:ca(n,$n,_s);break;default:throw Error(t(329))}}}return Qn(n,_t()),n.callbackNode===u?mg.bind(null,n):null}function Zd(n,s){var u=su;return n.current.memoizedState.isDehydrated&&(ua(n,s).flags|=256),n=Dc(n,s),n!==2&&(s=$n,$n=u,s!==null&&Kd(s)),n}function Kd(n){$n===null?$n=n:$n.push.apply($n,n)}function PE(n){for(var s=n;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],_=g.getSnapshot;g=g.value;try{if(!sr(_(),g))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function co(n,s){for(s&=~Hd,s&=~Rc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var u=31-ze(s),f=1<<u;n[u]=-1,s&=~f}}function gg(n){if((st&6)!==0)throw Error(t(327));al();var s=lt(n,0);if((s&1)===0)return Qn(n,_t()),null;var u=Dc(n,s);if(n.tag!==0&&u===2){var f=Xt(n);f!==0&&(s=f,u=Zd(n,f))}if(u===1)throw u=iu,ua(n,0),co(n,s),Qn(n,_t()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ca(n,$n,_s),Qn(n,_t()),null}function $d(n,s){var u=st;st|=1;try{return n(s)}finally{st=u,st===0&&(ol=_t()+500,ac&&ro())}}function la(n){lo!==null&&lo.tag===0&&(st&6)===0&&al();var s=st;st|=1;var u=br.transition,f=qe;try{if(br.transition=null,qe=1,n)return n()}finally{qe=f,br.transition=u,st=s,(st&6)===0&&ro()}}function Qd(){ur=sl.current,Tt(sl)}function ua(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Ut(u)),Bt!==null)for(u=Bt.return;u!==null;){var f=u;switch(sd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&sc();break;case 3:nl(),Tt(Gn),Tt(wn),yd();break;case 5:gd(f);break;case 4:nl();break;case 13:Tt(kt);break;case 19:Tt(kt);break;case 10:hd(f.type._context);break;case 22:case 23:Qd()}u=u.return}if(nn=n,Bt=n=ho(n.current,null),cn=ur=s,Qt=0,iu=null,Hd=Rc=aa=0,$n=su=null,ia!==null){for(s=0;s<ia.length;s++)if(u=ia[s],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,_=u.pending;if(_!==null){var S=_.next;_.next=g,f.next=S}u.pending=f}ia=null}return n}function _g(n,s){do{var u=Bt;try{if(cd(),_c.current=Ec,yc){for(var f=xt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}yc=!1}if(oa=0,tn=$t=xt=null,Jl=!1,Xl=0,jd.current=null,u===null||u.return===null){Qt=1,iu=s,Bt=null;break}e:{var _=n,S=u.return,x=u,V=s;if(s=cn,x.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var Q=V,ae=x,ue=ae.tag;if((ae.mode&1)===0&&(ue===0||ue===11||ue===15)){var se=ae.alternate;se?(ae.updateQueue=se.updateQueue,ae.memoizedState=se.memoizedState,ae.lanes=se.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var ge=jm(S);if(ge!==null){ge.flags&=-257,Hm(ge,S,x,_,s),ge.mode&1&&Bm(_,Q,s),s=ge,V=Q;var Ee=s.updateQueue;if(Ee===null){var Ie=new Set;Ie.add(V),s.updateQueue=Ie}else Ee.add(V);break e}else{if((s&1)===0){Bm(_,Q,s),Yd();break e}V=Error(t(426))}}else if(Ct&&x.mode&1){var Mt=jm(S);if(Mt!==null){(Mt.flags&65536)===0&&(Mt.flags|=256),Hm(Mt,S,x,_,s),ld(rl(V,x));break e}}_=V=rl(V,x),Qt!==4&&(Qt=2),su===null?su=[_]:su.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,s&=-s,_.lanes|=s;var q=zm(_,V,s);dm(_,q);break e;case 1:x=V;var U=_.type,G=_.stateNode;if((_.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(ao===null||!ao.has(G)))){_.flags|=65536,s&=-s,_.lanes|=s;var ce=Um(_,x,s);dm(_,ce);break e}}_=_.return}while(_!==null)}wg(u)}catch(Se){s=Se,Bt===u&&u!==null&&(Bt=u=u.return);continue}break}while(!0)}function yg(){var n=Cc.current;return Cc.current=Ec,n===null?Ec:n}function Yd(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),nn===null||(aa&268435455)===0&&(Rc&268435455)===0||co(nn,cn)}function Dc(n,s){var u=st;st|=2;var f=yg();(nn!==n||cn!==s)&&(_s=null,ua(n,s));do try{AE();break}catch(g){_g(n,g)}while(!0);if(cd(),st=u,Cc.current=f,Bt!==null)throw Error(t(261));return nn=null,cn=0,Qt}function AE(){for(;Bt!==null;)vg(Bt)}function CE(){for(;Bt!==null&&!Zi();)vg(Bt)}function vg(n){var s=Ig(n.alternate,n,ur);n.memoizedProps=n.pendingProps,s===null?wg(n):Bt=s,jd.current=null}function wg(n){var s=n;do{var u=s.alternate;if(n=s.return,(s.flags&32768)===0){if(u=vE(u,s,ur),u!==null){Bt=u;return}}else{if(u=wE(u,s),u!==null){u.flags&=32767,Bt=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Qt=6,Bt=null;return}}if(s=s.sibling,s!==null){Bt=s;return}Bt=s=n}while(s!==null);Qt===0&&(Qt=5)}function ca(n,s,u){var f=qe,g=br.transition;try{br.transition=null,qe=1,RE(n,s,u,f)}finally{br.transition=g,qe=f}return null}function RE(n,s,u,f){do al();while(lo!==null);if((st&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var _=u.lanes|u.childLanes;if(Pt(n,_),n===nn&&(Bt=nn=null,cn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||xc||(xc=!0,Sg(Ki,function(){return al(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=br.transition,br.transition=null;var S=qe;qe=1;var x=st;st|=4,jd.current=null,TE(n,u),cg(u,n),kr(ke),Tr=!!de,ke=de=null,n.current=u,IE(u),Bn(),st=x,qe=S,br.transition=_}else n.current=u;if(xc&&(xc=!1,lo=n,Lc=g),_=n.pendingLanes,_===0&&(ao=null),_i(u.stateNode),Qn(n,_t()),s!==null)for(f=n.onRecoverableError,u=0;u<s.length;u++)g=s[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(kc)throw kc=!1,n=qd,qd=null,n;return(Lc&1)!==0&&n.tag!==0&&al(),_=n.pendingLanes,(_&1)!==0?n===Gd?ou++:(ou=0,Gd=n):ou=0,ro(),null}function al(){if(lo!==null){var n=mn(Lc),s=br.transition,u=qe;try{if(br.transition=null,qe=16>n?16:n,lo===null)var f=!1;else{if(n=lo,lo=null,Lc=0,(st&6)!==0)throw Error(t(331));var g=st;for(st|=4,ve=n.current;ve!==null;){var _=ve,S=_.child;if((ve.flags&16)!==0){var x=_.deletions;if(x!==null){for(var V=0;V<x.length;V++){var Q=x[V];for(ve=Q;ve!==null;){var ae=ve;switch(ae.tag){case 0:case 11:case 15:ru(8,ae,_)}var ue=ae.child;if(ue!==null)ue.return=ae,ve=ue;else for(;ve!==null;){ae=ve;var se=ae.sibling,ge=ae.return;if(sg(ae),ae===Q){ve=null;break}if(se!==null){se.return=ge,ve=se;break}ve=ge}}}var Ee=_.alternate;if(Ee!==null){var Ie=Ee.child;if(Ie!==null){Ee.child=null;do{var Mt=Ie.sibling;Ie.sibling=null,Ie=Mt}while(Ie!==null)}}ve=_}}if((_.subtreeFlags&2064)!==0&&S!==null)S.return=_,ve=S;else e:for(;ve!==null;){if(_=ve,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:ru(9,_,_.return)}var q=_.sibling;if(q!==null){q.return=_.return,ve=q;break e}ve=_.return}}var U=n.current;for(ve=U;ve!==null;){S=ve;var G=S.child;if((S.subtreeFlags&2064)!==0&&G!==null)G.return=S,ve=G;else e:for(S=U;ve!==null;){if(x=ve,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Ac(9,x)}}catch(Se){Ot(x,x.return,Se)}if(x===S){ve=null;break e}var ce=x.sibling;if(ce!==null){ce.return=x.return,ve=ce;break e}ve=x.return}}if(st=g,ro(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(gi,n)}catch{}f=!0}return f}finally{qe=u,br.transition=s}}return!1}function Eg(n,s,u){s=rl(u,s),s=zm(n,s,1),n=so(n,s,1),s=zn(),n!==null&&(xn(n,1,s),Qn(n,s))}function Ot(n,s,u){if(n.tag===3)Eg(n,n,u);else for(;s!==null;){if(s.tag===3){Eg(s,n,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ao===null||!ao.has(f))){n=rl(u,n),n=Um(s,n,1),s=so(s,n,1),n=zn(),s!==null&&(xn(s,1,n),Qn(s,n));break}}s=s.return}}function kE(n,s,u){var f=n.pingCache;f!==null&&f.delete(s),s=zn(),n.pingedLanes|=n.suspendedLanes&u,nn===n&&(cn&u)===u&&(Qt===4||Qt===3&&(cn&130023424)===cn&&500>_t()-Wd?ua(n,0):Hd|=u),Qn(n,s)}function Tg(n,s){s===0&&((n.mode&1)===0?s=1:(s=yr,yr<<=1,(yr&130023424)===0&&(yr=4194304)));var u=zn();n=ps(n,s),n!==null&&(xn(n,s,u),Qn(n,u))}function xE(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),Tg(n,u)}function LE(n,s){var u=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),Tg(n,u)}var Ig;Ig=function(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps||Gn.current)Kn=!0;else{if((n.lanes&u)===0&&(s.flags&128)===0)return Kn=!1,yE(n,s,u);Kn=(n.flags&131072)!==0}else Kn=!1,Ct&&(s.flags&1048576)!==0&&nm(s,uc,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;Sc(n,s),n=s.pendingProps;var g=$a(s,wn.current);tl(s,u),g=Ed(null,s,f,n,g,u);var _=Td();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zn(f)?(_=!0,oc(s)):_=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,pd(s),g.updater=Tc,s.stateNode=g,g._reactInternals=s,Rd(s,f,n,u),s=Nd(null,s,f,!0,_,u)):(s.tag=0,Ct&&_&&id(s),Fn(null,s,g,u),s=s.child),s;case 16:f=s.elementType;e:{switch(Sc(n,s),n=s.pendingProps,g=f._init,f=g(f._payload),s.type=f,g=s.tag=OE(f),n=Jr(f,n),g){case 0:s=Ld(null,s,f,n,u);break e;case 1:s=$m(null,s,f,n,u);break e;case 11:s=Wm(null,s,f,n,u);break e;case 14:s=qm(null,s,f,Jr(f.type,n),u);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:Jr(f,g),Ld(n,s,f,g,u);case 1:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:Jr(f,g),$m(n,s,f,g,u);case 3:e:{if(Qm(s),n===null)throw Error(t(387));f=s.pendingProps,_=s.memoizedState,g=_.element,hm(n,s),mc(s,f,null,u);var S=s.memoizedState;if(f=S.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){g=rl(Error(t(423)),s),s=Ym(n,s,f,u,g);break e}else if(f!==g){g=rl(Error(t(424)),s),s=Ym(n,s,f,u,g);break e}else for(lr=Ri(s.stateNode.containerInfo.firstChild),ar=s,Ct=!0,Yr=null,u=um(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ja(),f===g){s=gs(n,s,u);break e}Fn(n,s,f,u)}s=s.child}return s;case 5:return pm(s),n===null&&ad(s),f=s.type,g=s.pendingProps,_=n!==null?n.memoizedProps:null,S=g.children,We(f,g)?S=null:_!==null&&We(f,_)&&(s.flags|=32),Km(n,s),Fn(n,s,S,u),s.child;case 6:return n===null&&ad(s),null;case 13:return Jm(n,s,u);case 4:return md(s,s.stateNode.containerInfo),f=s.pendingProps,n===null?s.child=Xa(s,null,f,u):Fn(n,s,f,u),s.child;case 11:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:Jr(f,g),Wm(n,s,f,g,u);case 7:return Fn(n,s,s.pendingProps,u),s.child;case 8:return Fn(n,s,s.pendingProps.children,u),s.child;case 12:return Fn(n,s,s.pendingProps.children,u),s.child;case 10:e:{if(f=s.type._context,g=s.pendingProps,_=s.memoizedProps,S=g.value,vt(dc,f._currentValue),f._currentValue=S,_!==null)if(sr(_.value,S)){if(_.children===g.children&&!Gn.current){s=gs(n,s,u);break e}}else for(_=s.child,_!==null&&(_.return=s);_!==null;){var x=_.dependencies;if(x!==null){S=_.child;for(var V=x.firstContext;V!==null;){if(V.context===f){if(_.tag===1){V=ms(-1,u&-u),V.tag=2;var Q=_.updateQueue;if(Q!==null){Q=Q.shared;var ae=Q.pending;ae===null?V.next=V:(V.next=ae.next,ae.next=V),Q.pending=V}}_.lanes|=u,V=_.alternate,V!==null&&(V.lanes|=u),dd(_.return,u,s),x.lanes|=u;break}V=V.next}}else if(_.tag===10)S=_.type===s.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=u,x=S.alternate,x!==null&&(x.lanes|=u),dd(S,u,s),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===s){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}Fn(n,s,g.children,u),s=s.child}return s;case 9:return g=s.type,f=s.pendingProps.children,tl(s,u),g=Dr(g),f=f(g),s.flags|=1,Fn(n,s,f,u),s.child;case 14:return f=s.type,g=Jr(f,s.pendingProps),g=Jr(f.type,g),qm(n,s,f,g,u);case 15:return Gm(n,s,s.type,s.pendingProps,u);case 17:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:Jr(f,g),Sc(n,s),s.tag=1,Zn(f)?(n=!0,oc(s)):n=!1,tl(s,u),Vm(s,f,g),Rd(s,f,g,u),Nd(null,s,f,!0,n,u);case 19:return eg(n,s,u);case 22:return Zm(n,s,u)}throw Error(t(156,s.tag))};function Sg(n,s){return Bo(n,s)}function NE(n,s,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(n,s,u,f){return new NE(n,s,u,f)}function Jd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function OE(n){if(typeof n=="function")return Jd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===j)return 11;if(n===Vt)return 14}return 2}function ho(n,s){var u=n.alternate;return u===null?(u=Vr(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function Mc(n,s,u,f,g,_){var S=2;if(f=n,typeof n=="function")Jd(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case F:return ha(u.children,g,_,s);case N:S=8,g|=8;break;case M:return n=Vr(12,u,s,g|2),n.elementType=M,n.lanes=_,n;case O:return n=Vr(13,u,s,g),n.elementType=O,n.lanes=_,n;case Qe:return n=Vr(19,u,s,g),n.elementType=Qe,n.lanes=_,n;case dt:return bc(u,g,_,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:S=10;break e;case b:S=9;break e;case j:S=11;break e;case Vt:S=14;break e;case ht:S=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Vr(S,u,s,g),s.elementType=n,s.type=f,s.lanes=_,s}function ha(n,s,u,f){return n=Vr(7,n,f,s),n.lanes=u,n}function bc(n,s,u,f){return n=Vr(22,n,f,s),n.elementType=dt,n.lanes=u,n.stateNode={isHidden:!1},n}function Xd(n,s,u){return n=Vr(6,n,null,s),n.lanes=u,n}function ef(n,s,u){return s=Vr(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function DE(n,s,u,f,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yi(0),this.expirationTimes=yi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function tf(n,s,u,f,g,_,S,x,V){return n=new DE(n,s,u,x,V),s===1?(s=1,_===!0&&(s|=8)):s=0,_=Vr(3,null,null,s),n.current=_,_.stateNode=n,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},pd(_),n}function ME(n,s,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$e,key:f==null?null:""+f,children:n,containerInfo:s,implementation:u}}function Pg(n){if(!n)return no;n=n._reactInternals;e:{if(Un(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(Zn(u))return Xp(n,u,s)}return s}function Ag(n,s,u,f,g,_,S,x,V){return n=tf(u,f,!0,n,g,_,S,x,V),n.context=Pg(null),u=n.current,f=zn(),g=uo(u),_=ms(f,g),_.callback=s??null,so(u,_,g),n.current.lanes=g,xn(n,g,f),Qn(n,f),n}function Vc(n,s,u,f){var g=s.current,_=zn(),S=uo(g);return u=Pg(u),s.context===null?s.context=u:s.pendingContext=u,s=ms(_,S),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=so(g,s,S),n!==null&&(ti(n,g,S,_),pc(n,g,S)),S}function Fc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function nf(n,s){Cg(n,s),(n=n.alternate)&&Cg(n,s)}function bE(){return null}var Rg=typeof reportError=="function"?reportError:function(n){console.error(n)};function rf(n){this._internalRoot=n}zc.prototype.render=rf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Vc(n,s,null,null)},zc.prototype.unmount=rf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;la(function(){Vc(null,n,null,null)}),s[pt]=null}};function zc(n){this._internalRoot=n}zc.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ji();n={blockedOn:null,target:n,priority:s};for(var u=0;u<At.length&&s!==0&&s<At[u].priority;u++);At.splice(u,0,n),u===0&&Ei(n)}};function sf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kg(){}function VE(n,s,u,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var Q=Fc(S);_.call(Q)}}var S=Ag(s,f,n,0,null,!1,!1,"",kg);return n._reactRootContainer=S,n[pt]=S.current,Ys(n.nodeType===8?n.parentNode:n),la(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var x=f;f=function(){var Q=Fc(V);x.call(Q)}}var V=tf(n,0,!1,null,null,!1,!1,"",kg);return n._reactRootContainer=V,n[pt]=V.current,Ys(n.nodeType===8?n.parentNode:n),la(function(){Vc(s,V,u,f)}),V}function Bc(n,s,u,f,g){var _=u._reactRootContainer;if(_){var S=_;if(typeof g=="function"){var x=g;g=function(){var V=Fc(S);x.call(V)}}Vc(s,S,n,g)}else S=VE(u,s,n,g,f);return Fc(S)}Qi=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var u=fe(s.pendingLanes);u!==0&&(tr(s,u|1),Qn(s,_t()),(st&6)===0&&(ol=_t()+500,ro()))}break;case 13:la(function(){var f=ps(n,1);if(f!==null){var g=zn();ti(f,n,1,g)}}),nf(n,1)}},wr=function(n){if(n.tag===13){var s=ps(n,134217728);if(s!==null){var u=zn();ti(s,n,134217728,u)}nf(n,134217728)}},Yi=function(n){if(n.tag===13){var s=uo(n),u=ps(n,s);if(u!==null){var f=zn();ti(u,n,s,f)}nf(n,s)}},Ji=function(){return qe},vi=function(n,s){var u=qe;try{return qe=n,s()}finally{qe=u}},fr=function(n,s,u){switch(s){case"input":if(jr(n,u),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==n&&f.form===n.form){var g=Za(f);if(!g)throw Error(t(90));Br(f),jr(f,g)}}}break;case"textarea":Ra(n,u);break;case"select":s=u.value,s!=null&&Rn(n,!!u.multiple,s,!1)}},La=$d,Na=la;var FE={usingClientEntryPoint:!1,Events:[us,cs,Za,di,fi,$d]},au={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zE={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:et.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ma(n),n===null?null:n.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||bE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{gi=jc.inject(zE),pn=jc}catch{}}return Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FE,Yn.createPortal=function(n,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sf(s))throw Error(t(200));return ME(n,s,null,u)},Yn.createRoot=function(n,s){if(!sf(n))throw Error(t(299));var u=!1,f="",g=Rg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=tf(n,1,!1,null,null,u,!1,f,g),n[pt]=s.current,Ys(n.nodeType===8?n.parentNode:n),new rf(s)},Yn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ma(s),n=n===null?null:n.stateNode,n},Yn.flushSync=function(n){return la(n)},Yn.hydrate=function(n,s,u){if(!Uc(s))throw Error(t(200));return Bc(null,n,s,!0,u)},Yn.hydrateRoot=function(n,s,u){if(!sf(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,_="",S=Rg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),s=Ag(s,null,n,1,u??null,g,!1,_,S),n[pt]=s.current,Ys(n),f)for(n=0;n<f.length;n++)u=f[n],g=u._getVersion,g=g(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,g]:s.mutableSourceEagerHydrationData.push(u,g);return new zc(s)},Yn.render=function(n,s,u){if(!Uc(s))throw Error(t(200));return Bc(null,n,s,!1,u)},Yn.unmountComponentAtNode=function(n){if(!Uc(n))throw Error(t(40));return n._reactRootContainer?(la(function(){Bc(null,null,n,!1,function(){n._reactRootContainer=null,n[pt]=null})}),!0):!1},Yn.unstable_batchedUpdates=$d,Yn.unstable_renderSubtreeIntoContainer=function(n,s,u,f){if(!Uc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Bc(n,s,u,!1,f)},Yn.version="18.3.1-next-f1338f8080-20240426",Yn}var Vg;function _y(){if(Vg)return lf.exports;Vg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),lf.exports=GE(),lf.exports}var Fg;function ZE(){if(Fg)return Hc;Fg=1;var i=_y();return Hc.createRoot=i.createRoot,Hc.hydrateRoot=i.hydrateRoot,Hc}var KE=ZE();const $E=Yf(KE),QE=()=>{};var zg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=function(i){const e=[];let t=0;for(let o=0;o<i.length;o++){let l=i.charCodeAt(o);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++o)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},YE=function(i){const e=[];let t=0,o=0;for(;t<i.length;){const l=i[t++];if(l<128)e[o++]=String.fromCharCode(l);else if(l>191&&l<224){const c=i[t++];e[o++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=i[t++],p=i[t++],v=i[t++],E=((l&7)<<18|(c&63)<<12|(p&63)<<6|v&63)-65536;e[o++]=String.fromCharCode(55296+(E>>10)),e[o++]=String.fromCharCode(56320+(E&1023))}else{const c=i[t++],p=i[t++];e[o++]=String.fromCharCode((l&15)<<12|(c&63)<<6|p&63)}}return e.join("")},vy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let l=0;l<i.length;l+=3){const c=i[l],p=l+1<i.length,v=p?i[l+1]:0,E=l+2<i.length,I=E?i[l+2]:0,C=c>>2,k=(c&3)<<4|v>>4;let R=(v&15)<<2|I>>6,Z=I&63;E||(Z=64,p||(R=64)),o.push(t[C],t[k],t[R],t[Z])}return o.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(yy(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):YE(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let l=0;l<i.length;){const c=t[i.charAt(l++)],v=l<i.length?t[i.charAt(l)]:0;++l;const I=l<i.length?t[i.charAt(l)]:64;++l;const k=l<i.length?t[i.charAt(l)]:64;if(++l,c==null||v==null||I==null||k==null)throw new JE;const R=c<<2|v>>4;if(o.push(R),I!==64){const Z=v<<4&240|I>>2;if(o.push(Z),k!==64){const ee=I<<6&192|k;o.push(ee)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class JE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XE=function(i){const e=yy(i);return vy.encodeByteArray(e,!0)},ah=function(i){return XE(i).replace(/\./g,"")},wy=function(i){try{return vy.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=()=>eT().__FIREBASE_DEFAULTS__,nT=()=>{if(typeof process>"u"||typeof zg>"u")return;const i=zg.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},rT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&wy(i[1]);return e&&JSON.parse(e)},Rh=()=>{try{return QE()||tT()||nT()||rT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Ey=i=>{var e,t;return(t=(e=Rh())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},iT=i=>{const e=Ey(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},Ty=()=>{var i;return(i=Rh())==null?void 0:i.config},Iy=i=>{var e;return(e=Rh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sy(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",l=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${o}`,aud:o,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[ah(JSON.stringify(t)),ah(JSON.stringify(p)),""].join(".")}const _u={};function aT(){const i={prod:[],emulator:[]};for(const e of Object.keys(_u))_u[e]?i.emulator.push(e):i.prod.push(e);return i}function lT(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Ug=!1;function Py(i,e){if(typeof window>"u"||typeof document>"u"||!Al(window.location.host)||_u[i]===e||_u[i]||Ug)return;_u[i]=e;function t(R){return`__firebase__banner__${R}`}const o="__firebase__banner",c=aT().prod.length>0;function p(){const R=document.getElementById(o);R&&R.remove()}function v(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function E(R,Z){R.setAttribute("width","24"),R.setAttribute("id",Z),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function I(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{Ug=!0,p()},R}function C(R,Z){R.setAttribute("id",Z),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function k(){const R=lT(o),Z=t("text"),ee=document.getElementById(Z)||document.createElement("span"),Y=t("learnmore"),le=document.getElementById(Y)||document.createElement("a"),Ve=t("preprendIcon"),Re=document.getElementById(Ve)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const De=R.element;v(De),C(le,Y);const et=I();E(Re,Ve),De.append(Re,ee,le,et),document.body.appendChild(De)}c?(ee.innerText="Preview backend disconnected.",Re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",Z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function cT(){var e;const i=(e=Rh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function fT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pT(){const i=Cn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function mT(){return!cT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gT(){try{return typeof indexedDB=="object"}catch{return!1}}function _T(){return new Promise((i,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(o);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(o),i(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="FirebaseError";class As extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=yT,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Du.prototype.create)}}class Du{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],p=c?vT(c,o):"Error",v=`${this.serviceName}: ${p} (${l}).`;return new As(l,v,o)}}function vT(i,e){return i.replace(wT,(t,o)=>{const l=e[o];return l!=null?String(l):`<${o}?>`})}const wT=/\{\$([^}]+)}/g;function ET(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function _a(i,e){if(i===e)return!0;const t=Object.keys(i),o=Object.keys(e);for(const l of t){if(!o.includes(l))return!1;const c=i[l],p=e[l];if(Bg(c)&&Bg(p)){if(!_a(c,p))return!1}else if(c!==p)return!1}for(const l of o)if(!t.includes(l))return!1;return!0}function Bg(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(i){const e=[];for(const[t,o]of Object.entries(i))Array.isArray(o)?o.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function cu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[l,c]=o.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function hu(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function TT(i,e){const t=new IT(i,e);return t.subscribe.bind(t)}class IT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,o){let l;if(e===void 0&&t===void 0&&o===void 0)throw new Error("Missing Observer.");ST(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:o},l.next===void 0&&(l.next=hf),l.error===void 0&&(l.error=hf),l.complete===void 0&&(l.complete=hf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ST(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function hf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(i){return i&&i._delegate?i._delegate:i}class ya{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new sT;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&o.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CT(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});o.resolve(c)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[c,p]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(c);o===v&&p.resolve(l)}return l}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(o)??new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const l of o)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:AT(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AT(i){return i===da?void 0:i}function CT(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new PT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ye||(Ye={}));const kT={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},xT=Ye.INFO,LT={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},NT=(i,e,...t)=>{if(e<i.logLevel)return;const o=new Date().toISOString(),l=LT[e];if(l)console[l](`[${o}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xf{constructor(e){this.name=e,this._logLevel=xT,this._logHandler=NT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const OT=(i,e)=>e.some(t=>i instanceof t);let jg,Hg;function DT(){return jg||(jg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MT(){return Hg||(Hg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ay=new WeakMap,If=new WeakMap,Cy=new WeakMap,df=new WeakMap,ep=new WeakMap;function bT(i){const e=new Promise((t,o)=>{const l=()=>{i.removeEventListener("success",c),i.removeEventListener("error",p)},c=()=>{t(vo(i.result)),l()},p=()=>{o(i.error),l()};i.addEventListener("success",c),i.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&Ay.set(t,i)}).catch(()=>{}),ep.set(e,i),e}function VT(i){if(If.has(i))return;const e=new Promise((t,o)=>{const l=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",p),i.removeEventListener("abort",p)},c=()=>{t(),l()},p=()=>{o(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",c),i.addEventListener("error",p),i.addEventListener("abort",p)});If.set(i,e)}let Sf={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return If.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Cy.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vo(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function FT(i){Sf=i(Sf)}function zT(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=i.call(ff(this),e,...t);return Cy.set(o,e.sort?e.sort():[e]),vo(o)}:MT().includes(i)?function(...e){return i.apply(ff(this),e),vo(Ay.get(this))}:function(...e){return vo(i.apply(ff(this),e))}}function UT(i){return typeof i=="function"?zT(i):(i instanceof IDBTransaction&&VT(i),OT(i,DT())?new Proxy(i,Sf):i)}function vo(i){if(i instanceof IDBRequest)return bT(i);if(df.has(i))return df.get(i);const e=UT(i);return e!==i&&(df.set(i,e),ep.set(e,i)),e}const ff=i=>ep.get(i);function BT(i,e,{blocked:t,upgrade:o,blocking:l,terminated:c}={}){const p=indexedDB.open(i,e),v=vo(p);return o&&p.addEventListener("upgradeneeded",E=>{o(vo(p.result),E.oldVersion,E.newVersion,vo(p.transaction),E)}),t&&p.addEventListener("blocked",E=>t(E.oldVersion,E.newVersion,E)),v.then(E=>{c&&E.addEventListener("close",()=>c()),l&&E.addEventListener("versionchange",I=>l(I.oldVersion,I.newVersion,I))}).catch(()=>{}),v}const jT=["get","getKey","getAll","getAllKeys","count"],HT=["put","add","delete","clear"],pf=new Map;function Wg(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(pf.get(e))return pf.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,l=HT.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(l||jT.includes(t)))return;const c=async function(p,...v){const E=this.transaction(p,l?"readwrite":"readonly");let I=E.store;return o&&(I=I.index(v.shift())),(await Promise.all([I[t](...v),l&&E.done]))[0]};return pf.set(e,c),c}FT(i=>({...i,get:(e,t,o)=>Wg(e,t)||i.get(e,t,o),has:(e,t)=>!!Wg(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qT(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function qT(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pf="@firebase/app",qg="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Xf("@firebase/app"),GT="@firebase/app-compat",ZT="@firebase/analytics-compat",KT="@firebase/analytics",$T="@firebase/app-check-compat",QT="@firebase/app-check",YT="@firebase/auth",JT="@firebase/auth-compat",XT="@firebase/database",e0="@firebase/data-connect",t0="@firebase/database-compat",n0="@firebase/functions",r0="@firebase/functions-compat",i0="@firebase/installations",s0="@firebase/installations-compat",o0="@firebase/messaging",a0="@firebase/messaging-compat",l0="@firebase/performance",u0="@firebase/performance-compat",c0="@firebase/remote-config",h0="@firebase/remote-config-compat",d0="@firebase/storage",f0="@firebase/storage-compat",p0="@firebase/firestore",m0="@firebase/ai",g0="@firebase/firestore-compat",_0="firebase",y0="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="[DEFAULT]",v0={[Pf]:"fire-core",[GT]:"fire-core-compat",[KT]:"fire-analytics",[ZT]:"fire-analytics-compat",[QT]:"fire-app-check",[$T]:"fire-app-check-compat",[YT]:"fire-auth",[JT]:"fire-auth-compat",[XT]:"fire-rtdb",[e0]:"fire-data-connect",[t0]:"fire-rtdb-compat",[n0]:"fire-fn",[r0]:"fire-fn-compat",[i0]:"fire-iid",[s0]:"fire-iid-compat",[o0]:"fire-fcm",[a0]:"fire-fcm-compat",[l0]:"fire-perf",[u0]:"fire-perf-compat",[c0]:"fire-rc",[h0]:"fire-rc-compat",[d0]:"fire-gcs",[f0]:"fire-gcs-compat",[p0]:"fire-fst",[g0]:"fire-fst-compat",[m0]:"fire-vertex","fire-js":"fire-js",[_0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,w0=new Map,Cf=new Map;function Gg(i,e){try{i.container.addComponent(e)}catch(t){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function _l(i){const e=i.name;if(Cf.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,i);for(const t of lh.values())Gg(t,i);for(const t of w0.values())Gg(t,i);return!0}function tp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Fr(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wo=new Du("app","Firebase",E0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=y0;function Ry(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const o={name:Af,automaticDataCollectionEnabled:!0,...e},l=o.name;if(typeof l!="string"||!l)throw wo.create("bad-app-name",{appName:String(l)});if(t||(t=Ty()),!t)throw wo.create("no-options");const c=lh.get(l);if(c){if(_a(t,c.options)&&_a(o,c.config))return c;throw wo.create("duplicate-app",{appName:l})}const p=new RT(l);for(const E of Cf.values())p.addComponent(E);const v=new T0(t,o,p);return lh.set(l,v),v}function ky(i=Af){const e=lh.get(i);if(!e&&i===Af&&Ty())return Ry();if(!e)throw wo.create("no-app",{appName:i});return e}function Eo(i,e,t){let o=v0[i]??i;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&p.push("and"),c&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(p.join(" "));return}_l(new ya(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="firebase-heartbeat-database",S0=1,Su="firebase-heartbeat-store";let mf=null;function xy(){return mf||(mf=BT(I0,S0,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Su)}catch(t){console.warn(t)}}}}).catch(i=>{throw wo.create("idb-open",{originalErrorMessage:i.message})})),mf}async function P0(i){try{const t=(await xy()).transaction(Su),o=await t.objectStore(Su).get(Ly(i));return await t.done,o}catch(e){if(e instanceof As)Ts.warn(e.message);else{const t=wo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(t.message)}}}async function Zg(i,e){try{const o=(await xy()).transaction(Su,"readwrite");await o.objectStore(Su).put(e,Ly(i)),await o.done}catch(t){if(t instanceof As)Ts.warn(t.message);else{const o=wo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ts.warn(o.message)}}}function Ly(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=1024,C0=30;class R0{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new x0(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Kg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(p=>p.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>C0){const p=L0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Ts.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Kg(),{heartbeatsToSend:o,unsentEntries:l}=k0(this._heartbeatsCache.heartbeats),c=ah(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Ts.warn(t),""}}}function Kg(){return new Date().toISOString().substring(0,10)}function k0(i,e=A0){const t=[];let o=i.slice();for(const l of i){const c=t.find(p=>p.agent===l.agent);if(c){if(c.dates.push(l.date),$g(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),$g(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class x0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gT()?_T().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await P0(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return Zg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return Zg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function $g(i){return ah(JSON.stringify({version:2,heartbeats:i})).length}function L0(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let o=1;o<i.length;o++)i[o].date<t&&(t=i[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(i){_l(new ya("platform-logger",e=>new WT(e),"PRIVATE")),_l(new ya("heartbeat",e=>new R0(e),"PRIVATE")),Eo(Pf,qg,i),Eo(Pf,qg,"esm2020"),Eo("fire-js","")}N0("");function Ny(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O0=Ny,Oy=new Du("auth","Firebase",Ny());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Xf("@firebase/auth");function D0(i,...e){uh.logLevel<=Ye.WARN&&uh.warn(`Auth (${Cl}): ${i}`,...e)}function Qc(i,...e){uh.logLevel<=Ye.ERROR&&uh.error(`Auth (${Cl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(i,...e){throw rp(i,...e)}function ri(i,...e){return rp(i,...e)}function np(i,e,t){const o={...O0(),[e]:t};return new Du("auth","Firebase",o).create(e,{appName:i.name})}function To(i){return np(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M0(i,e,t){const o=t;if(!(e instanceof o))throw o.name!==e.constructor.name&&Ur(i,"argument-error"),np(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rp(i,...e){if(typeof i!="string"){const t=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=i.name),i._errorFactory.create(t,...o)}return Oy.create(i,...e)}function Me(i,e,...t){if(!i)throw rp(e,...t)}function vs(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Qc(e),new Error(e)}function Is(i,e){i||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function b0(){return Qg()==="http:"||Qg()==="https:"}function Qg(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b0()||dT()||"connection"in navigator)?navigator.onLine:!0}function F0(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Is(t>e,"Short delay should be less than long delay!"),this.isMobile=uT()||fT()}get(){return V0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(i,e){Is(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{static initialize(e,t,o){this.fetchImpl=e,t&&(this.headersImpl=t),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B0=new bu(3e4,6e4);function Ia(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function No(i,e,t,o,l={}){return My(i,l,async()=>{let c={},p={};o&&(e==="GET"?p=o:c={body:JSON.stringify(o)});const v=Mu({key:i.config.apiKey,...p}).slice(1),E=await i._getAdditionalHeaders();E["Content-Type"]="application/json",i.languageCode&&(E["X-Firebase-Locale"]=i.languageCode);const I={method:e,headers:E,...c};return hT()||(I.referrerPolicy="no-referrer"),i.emulatorConfig&&Al(i.emulatorConfig.host)&&(I.credentials="include"),Dy.fetch()(await by(i,i.config.apiHost,t,v),I)})}async function My(i,e,t){i._canInitEmulator=!1;const o={...z0,...e};try{const l=new H0(i),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const p=await c.json();if("needConfirmation"in p)throw Wc(i,"account-exists-with-different-credential",p);if(c.ok&&!("errorMessage"in p))return p;{const v=c.ok?p.errorMessage:p.error.message,[E,I]=v.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wc(i,"credential-already-in-use",p);if(E==="EMAIL_EXISTS")throw Wc(i,"email-already-in-use",p);if(E==="USER_DISABLED")throw Wc(i,"user-disabled",p);const C=o[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(I)throw np(i,C,I);Ur(i,C)}}catch(l){if(l instanceof As)throw l;Ur(i,"network-request-failed",{message:String(l)})}}async function kh(i,e,t,o,l={}){const c=await No(i,e,t,o,l);return"mfaPendingCredential"in c&&Ur(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function by(i,e,t,o){const l=`${e}${t}?${o}`,c=i,p=c.config.emulator?ip(i.config,l):`${i.config.apiScheme}://${l}`;return U0.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(p).toString():p}function j0(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H0{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,o)=>{this.timer=setTimeout(()=>o(ri(this.auth,"network-request-failed")),B0.get())})}}function Wc(i,e,t){const o={appName:i.name};t.email&&(o.email=t.email),t.phoneNumber&&(o.phoneNumber=t.phoneNumber);const l=ri(i,e,o);return l.customData._tokenResponse=t,l}function Yg(i){return i!==void 0&&i.enterprise!==void 0}class W0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return j0(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function q0(i,e){return No(i,"GET","/v2/recaptchaConfig",Ia(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0(i,e){return No(i,"POST","/v1/accounts:delete",e)}async function ch(i,e){return No(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Z0(i,e=!1){const t=Jt(i),o=await t.getIdToken(e),l=sp(o);Me(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,p=c==null?void 0:c.sign_in_provider;return{claims:l,token:o,authTime:yu(gf(l.auth_time)),issuedAtTime:yu(gf(l.iat)),expirationTime:yu(gf(l.exp)),signInProvider:p||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function gf(i){return Number(i)*1e3}function sp(i){const[e,t,o]=i.split(".");if(e===void 0||t===void 0||o===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const l=wy(t);return l?JSON.parse(l):(Qc("Failed to decode base64 JWT payload"),null)}catch(l){return Qc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Jg(i){const e=sp(i);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pu(i,e,t=!1){if(t)return e;try{return await e}catch(o){throw o instanceof As&&K0(o)&&i.auth.currentUser===i&&await i.auth.signOut(),o}}function K0({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(i){var k;const e=i.auth,t=await i.getIdToken(),o=await Pu(i,ch(e,{idToken:t}));Me(o==null?void 0:o.users.length,e,"internal-error");const l=o.users[0];i._notifyReloadListener(l);const c=(k=l.providerUserInfo)!=null&&k.length?Vy(l.providerUserInfo):[],p=Y0(i.providerData,c),v=i.isAnonymous,E=!(i.email&&l.passwordHash)&&!(p!=null&&p.length),I=v?E:!1,C={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new kf(l.createdAt,l.lastLoginAt),isAnonymous:I};Object.assign(i,C)}async function Q0(i){const e=Jt(i);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y0(i,e){return[...i.filter(o=>!e.some(l=>l.providerId===o.providerId)),...e]}function Vy(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J0(i,e){const t=await My(i,{},async()=>{const o=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=i.config,p=await by(i,l,"/v1/token",`key=${c}`),v=await i._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:v,body:o};return i.emulatorConfig&&Al(i.emulatorConfig.host)&&(E.credentials="include"),Dy.fetch()(p,E)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function X0(i,e){return No(i,"POST","/v2/accounts:revokeToken",Ia(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=Jg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:o,refreshToken:l,expiresIn:c}=await J0(e,t);this.updateTokensAndExpiration(o,l,Number(c))}updateTokensAndExpiration(e,t,o){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,t){const{refreshToken:o,accessToken:l,expirationTime:c}=t,p=new dl;return o&&(Me(typeof o=="string","internal-error",{appName:e}),p.refreshToken=o),l&&(Me(typeof l=="string","internal-error",{appName:e}),p.accessToken=l),c&&(Me(typeof c=="number","internal-error",{appName:e}),p.expirationTime=c),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(i,e){Me(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ni{constructor({uid:e,auth:t,stsTokenManager:o,...l}){this.providerId="firebase",this.proactiveRefresh=new $0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new kf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Pu(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Z0(this,e)}reload(){return Q0(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),t&&await hh(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fr(this.auth.app))return Promise.reject(To(this.auth));const e=await this.getIdToken();return await Pu(this,G0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const o=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,p=t.photoURL??void 0,v=t.tenantId??void 0,E=t._redirectEventId??void 0,I=t.createdAt??void 0,C=t.lastLoginAt??void 0,{uid:k,emailVerified:R,isAnonymous:Z,providerData:ee,stsTokenManager:Y}=t;Me(k&&Y,e,"internal-error");const le=dl.fromJSON(this.name,Y);Me(typeof k=="string",e,"internal-error"),po(o,e.name),po(l,e.name),Me(typeof R=="boolean",e,"internal-error"),Me(typeof Z=="boolean",e,"internal-error"),po(c,e.name),po(p,e.name),po(v,e.name),po(E,e.name),po(I,e.name),po(C,e.name);const Ve=new ni({uid:k,auth:e,email:l,emailVerified:R,displayName:o,isAnonymous:Z,photoURL:p,phoneNumber:c,tenantId:v,stsTokenManager:le,createdAt:I,lastLoginAt:C});return ee&&Array.isArray(ee)&&(Ve.providerData=ee.map(Re=>({...Re}))),E&&(Ve._redirectEventId=E),Ve}static async _fromIdTokenResponse(e,t,o=!1){const l=new dl;l.updateFromServerResponse(t);const c=new ni({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:o});return await hh(c),c}static async _fromGetAccountInfoResponse(e,t,o){const l=t.users[0];Me(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?Vy(l.providerUserInfo):[],p=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),v=new dl;v.updateFromIdToken(o);const E=new ni({uid:l.localId,auth:e,stsTokenManager:v,isAnonymous:p}),I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new kf(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(E,I),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map;function ws(i){Is(i instanceof Function,"Expected a class definition");let e=Xg.get(i);return e?(Is(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Xg.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fy.type="NONE";const e_=Fy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(i,e,t){return`firebase:${i}:${e}:${t}`}class fl{constructor(e,t,o){this.persistence=e,this.auth=t,this.userKey=o;const{config:l,name:c}=this.auth;this.fullUserKey=Yc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Yc("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ch(this.auth,{idToken:e}).catch(()=>{});return t?ni._fromGetAccountInfoResponse(this.auth,t,e):null}return ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,o="authUser"){if(!t.length)return new fl(ws(e_),e,o);const l=(await Promise.all(t.map(async I=>{if(await I._isAvailable())return I}))).filter(I=>I);let c=l[0]||ws(e_);const p=Yc(o,e.config.apiKey,e.name);let v=null;for(const I of t)try{const C=await I._get(p);if(C){let k;if(typeof C=="string"){const R=await ch(e,{idToken:C}).catch(()=>{});if(!R)break;k=await ni._fromGetAccountInfoResponse(e,R,C)}else k=ni._fromJSON(e,C);I!==c&&(v=k),c=I;break}}catch{}const E=l.filter(I=>I._shouldAllowMigration);return!c._shouldAllowMigration||!E.length?new fl(c,e,o):(c=E[0],v&&await c._set(p,v.toJSON()),await Promise.all(t.map(async I=>{if(I!==c)try{await I._remove(p)}catch{}})),new fl(c,e,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wy(e))return"Blackberry";if(qy(e))return"Webos";if(Uy(e))return"Safari";if((e.includes("chrome/")||By(e))&&!e.includes("edge/"))return"Chrome";if(Hy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=i.match(t);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function zy(i=Cn()){return/firefox\//i.test(i)}function Uy(i=Cn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function By(i=Cn()){return/crios\//i.test(i)}function jy(i=Cn()){return/iemobile/i.test(i)}function Hy(i=Cn()){return/android/i.test(i)}function Wy(i=Cn()){return/blackberry/i.test(i)}function qy(i=Cn()){return/webos/i.test(i)}function op(i=Cn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function eI(i=Cn()){var e;return op(i)&&!!((e=window.navigator)!=null&&e.standalone)}function tI(){return pT()&&document.documentMode===10}function Gy(i=Cn()){return op(i)||Hy(i)||qy(i)||Wy(i)||/windows phone/i.test(i)||jy(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(i,e=[]){let t;switch(i){case"Browser":t=t_(Cn());break;case"Worker":t=`${t_(Cn())}-${i}`;break;default:t=i}const o=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cl}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const o=c=>new Promise((p,v)=>{try{const E=e(c);p(E)}catch(E){v(E)}});o.onAbort=t,this.queue.push(o);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const o of this.queue)await o(e),o.onAbort&&t.push(o.onAbort)}catch(o){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rI(i,e={}){return No(i,"GET","/v2/passwordPolicy",Ia(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=6;class sI{constructor(e){var o;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??iI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((o=e.allowedNonAlphanumericCharacters)==null?void 0:o.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const o=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;o&&(t.meetsMinPasswordLength=e.length>=o),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let o;for(let l=0;l<e.length;l++)o=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,t,o,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t,o,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=o,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new n_(this),this.idTokenSubscription=new n_(this),this.beforeStateQueue=new nI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Oy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ws(t)),this._initializationPromise=this.queue(async()=>{var o,l,c;if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),(o=this._resolvePersistenceManagerAvailable)==null||o.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ch(this,{idToken:e}),o=await ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(o)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Fr(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(v=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(v,v))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(c=this.redirectUser)==null?void 0:c._redirectEventId,v=o==null?void 0:o._redirectEventId,E=await this.tryRedirectSignIn(e);(!p||p===v)&&(E!=null&&E.user)&&(o=E.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(p){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F0()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fr(this.app))return Promise.reject(To(this));const t=e?Jt(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fr(this.app)?Promise.reject(To(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fr(this.app)?Promise.reject(To(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rI(this),t=new sI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Du("auth","Firebase",e())}onAuthStateChanged(e,t,o){return this.registerStateListener(this.authStateSubscription,e,t,o)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,o){return this.registerStateListener(this.idTokenSubscription,e,t,o)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(o.tenantId=this.tenantId),await X0(this,o)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const o=await this.getOrInitRedirectPersistenceManager(t);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ws(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[ws(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,o;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((o=this.redirectUser)==null?void 0:o._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,o,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let p=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(v,this,"internal-error"),v.then(()=>{p||c(this.currentUser)}),typeof t=="function"){const E=e.addObserver(t,o,l);return()=>{p=!0,E()}}else{const E=e.addObserver(t);return()=>{p=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){var t;if(Fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&D0(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Sa(i){return Jt(i)}class n_{constructor(e){this.auth=e,this.observer=null,this.addObserver=TT(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aI(i){xh=i}function Ky(i){return xh.loadJS(i)}function lI(){return xh.recaptchaEnterpriseScript}function uI(){return xh.gapiScript}function cI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class hI{constructor(){this.enterprise=new dI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class dI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fI="recaptcha-enterprise",$y="NO_RECAPTCHA";class pI{constructor(e){this.type=fI,this.auth=Sa(e)}async verify(e="verify",t=!1){async function o(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(p,v)=>{q0(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(E=>{if(E.recaptchaKey===void 0)v(new Error("recaptcha Enterprise site key undefined"));else{const I=new W0(E);return c.tenantId==null?c._agentRecaptchaConfig=I:c._tenantRecaptchaConfigs[c.tenantId]=I,p(I.siteKey)}}).catch(E=>{v(E)})})}function l(c,p,v){const E=window.grecaptcha;Yg(E)?E.enterprise.ready(()=>{E.enterprise.execute(c,{action:e}).then(I=>{p(I)}).catch(()=>{p($y)})}):v(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hI().execute("siteKey",{action:"verify"}):new Promise((c,p)=>{o(this.auth).then(v=>{if(!t&&Yg(window.grecaptcha))l(v,c,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let E=lI();E.length!==0&&(E+=v),Ky(E).then(()=>{l(v,c,p)}).catch(I=>{p(I)})}}).catch(v=>{p(v)})})}}async function r_(i,e,t,o=!1,l=!1){const c=new pI(i);let p;if(l)p=$y;else try{p=await c.verify(t)}catch{p=await c.verify(t,!0)}const v={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in v){const E=v.phoneEnrollmentInfo.phoneNumber,I=v.phoneEnrollmentInfo.recaptchaToken;Object.assign(v,{phoneEnrollmentInfo:{phoneNumber:E,recaptchaToken:I,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in v){const E=v.phoneSignInInfo.recaptchaToken;Object.assign(v,{phoneSignInInfo:{recaptchaToken:E,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return v}return o?Object.assign(v,{captchaResp:p}):Object.assign(v,{captchaResponse:p}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v}async function i_(i,e,t,o,l){var c;if((c=i._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await r_(i,e,t,t==="getOobCode");return o(i,p)}else return o(i,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const v=await r_(i,e,t,t==="getOobCode");return o(i,v)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(i,e){const t=tp(i,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(_a(c,e??{}))return l;Ur(l,"already-initialized")}return t.initialize({options:e})}function gI(i,e){const t=(e==null?void 0:e.persistence)||[],o=(Array.isArray(t)?t:[t]).map(ws);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(o,e==null?void 0:e.popupRedirectResolver)}function _I(i,e,t){const o=Sa(i);Me(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const l=!1,c=Qy(e),{host:p,port:v}=yI(e),E=v===null?"":`:${v}`,I={url:`${c}//${p}${E}/`},C=Object.freeze({host:p,port:v,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!o._canInitEmulator){Me(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),Me(_a(I,o.config.emulator)&&_a(C,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=I,o.emulatorConfig=C,o.settings.appVerificationDisabledForTesting=!0,Al(p)?(Sy(`${c}//${p}${E}`),Py("Auth",!0)):vI()}function Qy(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function yI(i){const e=Qy(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const o=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(o);if(l){const c=l[1];return{host:c,port:s_(o.substr(c.length+1))}}else{const[c,p]=o.split(":");return{host:c,port:s_(p)}}}function s_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function vI(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,t){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}async function wI(i,e){return No(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(i,e){return kh(i,"POST","/v1/accounts:signInWithPassword",Ia(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(i,e){return kh(i,"POST","/v1/accounts:signInWithEmailLink",Ia(i,e))}async function II(i,e){return kh(i,"POST","/v1/accounts:signInWithEmailLink",Ia(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends ap{constructor(e,t,o,l=null){super("password",o),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new Au(e,t,"password")}static _fromEmailAndCode(e,t,o=null){return new Au(e,t,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i_(e,t,"signInWithPassword",EI);case"emailLink":return TI(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const o={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i_(e,o,"signUpPassword",wI);case"emailLink":return II(e,{idToken:t,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(i,e){return kh(i,"POST","/v1/accounts:signInWithIdp",Ia(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="http://localhost";class va extends ap{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:l,...c}=t;if(!o||!l)return null;const p=new va(o,l);return p.idToken=c.idToken||void 0,p.accessToken=c.accessToken||void 0,p.secret=c.secret,p.nonce=c.nonce,p.pendingToken=c.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return pl(e,t)}_linkToIdToken(e,t){const o=this.buildRequest();return o.idToken=t,pl(e,o)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pl(e,t)}buildRequest(){const e={requestUri:SI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AI(i){const e=cu(hu(i)).link,t=e?cu(hu(e)).deep_link_id:null,o=cu(hu(i)).deep_link_id;return(o?cu(hu(o)).link:null)||o||t||e||i}class lp{constructor(e){const t=cu(hu(e)),o=t.apiKey??null,l=t.oobCode??null,c=PI(t.mode??null);Me(o&&l&&c,"argument-error"),this.apiKey=o,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=AI(e);try{return new lp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.providerId=Rl.PROVIDER_ID}static credential(e,t){return Au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const o=lp.parseLink(t);return Me(o,"argument-error"),Au._fromEmailAndCode(e,o.code,o.tenantId)}}Rl.PROVIDER_ID="password";Rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends up{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Vu{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mo.credential(e.oauthAccessToken)}catch{return null}}}mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return va._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:o}=e;if(!t&&!o)return null;try{return ys.credential(t,o)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends Vu{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.GITHUB_SIGN_IN_METHOD="github.com";go.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Vu{constructor(){super("twitter.com")}static credential(e,t){return va._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:o}=e;if(!t||!o)return null;try{return _o.credential(t,o)}catch{return null}}}_o.TWITTER_SIGN_IN_METHOD="twitter.com";_o.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,o,l=!1){const c=await ni._fromIdTokenResponse(e,o,l),p=o_(o);return new yl({user:c,providerId:p,_tokenResponse:o,operationType:t})}static async _forOperation(e,t,o){await e._updateTokensIfNecessary(o,!0);const l=o_(o);return new yl({user:e,providerId:l,_tokenResponse:o,operationType:t})}}function o_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends As{constructor(e,t,o,l){super(t.code,t.message),this.operationType=o,this.user=l,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,t,o,l){return new dh(e,t,o,l)}}function Yy(i,e,t,o){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(i,c,e,o):c})}async function CI(i,e,t=!1){const o=await Pu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return yl._forOperation(i,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(i,e,t=!1){const{auth:o}=i;if(Fr(o.app))return Promise.reject(To(o));const l="reauthenticate";try{const c=await Pu(i,Yy(o,l,e,i),t);Me(c.idToken,o,"internal-error");const p=sp(c.idToken);Me(p,o,"internal-error");const{sub:v}=p;return Me(i.uid===v,o,"user-mismatch"),yl._forOperation(i,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Ur(o,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jy(i,e,t=!1){if(Fr(i.app))return Promise.reject(To(i));const o="signIn",l=await Yy(i,o,e),c=await yl._fromIdTokenResponse(i,o,l);return t||await i._updateCurrentUser(c.user),c}async function kI(i,e){return Jy(Sa(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xI(i){const e=Sa(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function LI(i,e,t){return Fr(i.app)?Promise.reject(To(i)):kI(Jt(i),Rl.credential(e,t)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&xI(i),o})}function NI(i,e,t,o){return Jt(i).onIdTokenChanged(e,t,o)}function OI(i,e,t){return Jt(i).beforeAuthStateChanged(e,t)}function DI(i,e,t,o){return Jt(i).onAuthStateChanged(e,t,o)}function MI(i){return Jt(i).signOut()}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1e3,VI=10;class ev extends Xy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const o=this.storage.getItem(t),l=this.localCache[t];o!==l&&e(t,l,o)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,v,E)=>{this.notifyListeners(p,E)});return}const o=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const p=this.storage.getItem(o);!t&&this.localCache[o]===p||this.notifyListeners(o,p)},c=this.storage.getItem(o);tI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,VI):l()}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const l of Array.from(o))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:o}),!0)})},bI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ev.type="LOCAL";const FI=ev;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends Xy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tv.type="SESSION";const nv=tv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const o=new Lh(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:o,eventType:l,data:c}=t.data,p=this.handlersMap[l];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:o,eventType:l});const v=Array.from(p).map(async I=>I(t.origin,c)),E=await zI(v);t.ports[0].postMessage({status:"done",eventId:o,eventType:l,response:E})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(i="",e=10){let t="";for(let o=0;o<e;o++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,o=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,p;return new Promise((v,E)=>{const I=cp("",20);l.port1.start();const C=setTimeout(()=>{E(new Error("unsupported_event"))},o);p={messageChannel:l,onMessage(k){const R=k;if(R.data.eventId===I)switch(R.data.status){case"ack":clearTimeout(C),c=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),v(R.data.response);break;default:clearTimeout(C),clearTimeout(c),E(new Error("invalid_response"));break}}},this.handlers.add(p),l.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:I,data:t},[l.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function BI(i){Oi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function jI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HI(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function WI(){return rv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="firebaseLocalStorageDb",qI=1,ph="firebaseLocalStorage",sv="fbase_key";class Fu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nh(i,e){return i.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function GI(){const i=indexedDB.deleteDatabase(iv);return new Fu(i).toPromise()}function xf(){const i=indexedDB.open(iv,qI);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const o=i.result;try{o.createObjectStore(ph,{keyPath:sv})}catch(l){t(l)}}),i.addEventListener("success",async()=>{const o=i.result;o.objectStoreNames.contains(ph)?e(o):(o.close(),await GI(),e(await xf()))})})}async function a_(i,e,t){const o=Nh(i,!0).put({[sv]:e,value:t});return new Fu(o).toPromise()}async function ZI(i,e){const t=Nh(i,!1).get(e),o=await new Fu(t).toPromise();return o===void 0?null:o.value}function l_(i,e){const t=Nh(i,!0).delete(e);return new Fu(t).toPromise()}const KI=800,$I=3;class ov{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(t++>$I)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(WI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,o;if(this.activeServiceWorker=await jI(),!this.activeServiceWorker)return;this.sender=new UI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(o=e[0])!=null&&o.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xf();return await a_(e,fh,"1"),await l_(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(o=>a_(o,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(o=>ZI(o,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>l_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Nh(l,!1).getAll();return new Fu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],o=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)o.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!o.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const l of Array.from(o))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ov.type="LOCAL";const QI=ov;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(i,e){return e?ws(e):(Me(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp extends ap{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function YI(i){return Jy(i.auth,new hp(i),i.bypassAuthState)}function JI(i){const{auth:e,user:t}=i;return Me(t,e,"internal-error"),RI(t,new hp(i),i.bypassAuthState)}async function XI(i){const{auth:e,user:t}=i;return Me(t,e,"internal-error"),CI(t,new hp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,t,o,l,c=!1){this.auth=e,this.resolver=o,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:o,postBody:l,tenantId:c,error:p,type:v}=e;if(p){this.reject(p);return}const E={auth:this.auth,requestUri:t,sessionId:o,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(E))}catch(I){this.reject(I)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YI;case"linkViaPopup":case"linkViaRedirect":return XI;case"reauthViaPopup":case"reauthViaRedirect":return JI;default:Ur(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=new bu(2e3,1e4);async function tS(i,e,t){if(Fr(i.app))return Promise.reject(ri(i,"operation-not-supported-in-this-environment"));const o=Sa(i);M0(i,e,up);const l=av(o,t);return new fa(o,"signInViaPopup",e,l).executeNotNull()}class fa extends lv{constructor(e,t,o,l,c){super(e,t,l,c),this.provider=o,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,o;if((o=(t=this.authWindow)==null?void 0:t.window)!=null&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eS.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="pendingRedirect",Jc=new Map;class rS extends lv{constructor(e,t,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,o),this.eventId=null}async execute(){let e=Jc.get(this.auth._key());if(!e){try{const o=await iS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(t){e=()=>Promise.reject(t)}Jc.set(this.auth._key(),e)}return this.bypassAuthState||Jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iS(i,e){const t=aS(e),o=oS(i);if(!await o._isAvailable())return!1;const l=await o._get(t)==="true";return await o._remove(t),l}function sS(i,e){Jc.set(i._key(),e)}function oS(i){return ws(i._redirectPersistence)}function aS(i){return Yc(nS,i.config.apiKey,i.name)}async function lS(i,e,t=!1){if(Fr(i.app))return Promise.reject(To(i));const o=Sa(i),l=av(o,e),p=await new rS(o,l,t).execute();return p&&!t&&(delete p.user._redirectEventId,await o._persistUserIfCurrent(p.user),await o._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=600*1e3;class cS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(t=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var o;if(e.error&&!uv(e)){const l=((o=e.error.code)==null?void 0:o.split("auth/")[1])||"internal-error";t.onError(ri(this.auth,l))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const o=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uS&&this.cachedEventUids.clear(),this.cachedEventUids.has(u_(e))}saveEventToCache(e){this.cachedEventUids.add(u_(e)),this.lastProcessedEventTime=Date.now()}}function u_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function uv({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uv(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(i,e={}){return No(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pS=/^https?/;async function mS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await dS(i);for(const t of e)try{if(gS(t))return}catch{}Ur(i,"unauthorized-domain")}function gS(i){const e=Rf(),{protocol:t,hostname:o}=new URL(e);if(i.startsWith("chrome-extension://")){const p=new URL(i);return p.hostname===""&&o===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===o}if(!pS.test(t))return!1;if(fS.test(i))return o===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new bu(3e4,6e4);function c_(){const i=Oi().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function yS(i){return new Promise((e,t)=>{var l,c,p;function o(){c_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c_(),t(ri(i,"network-request-failed"))},timeout:_S.get()})}if((c=(l=Oi().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((p=Oi().gapi)!=null&&p.load)o();else{const v=cI("iframefcb");return Oi()[v]=()=>{gapi.load?o():t(ri(i,"network-request-failed"))},Ky(`${uI()}?onload=${v}`).catch(E=>t(E))}}).catch(e=>{throw Xc=null,e})}let Xc=null;function vS(i){return Xc=Xc||yS(i),Xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=new bu(5e3,15e3),ES="__/auth/iframe",TS="emulator/auth/iframe",IS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PS(i){const e=i.config;Me(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?ip(e,TS):`https://${i.config.authDomain}/${ES}`,o={apiKey:e.apiKey,appName:i.name,v:Cl},l=SS.get(i.config.apiHost);l&&(o.eid=l);const c=i._getFrameworks();return c.length&&(o.fw=c.join(",")),`${t}?${Mu(o).slice(1)}`}async function AS(i){const e=await vS(i),t=Oi().gapi;return Me(t,i,"internal-error"),e.open({where:document.body,url:PS(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IS,dontclear:!0},o=>new Promise(async(l,c)=>{await o.restyle({setHideOnLeave:!1});const p=ri(i,"network-request-failed"),v=Oi().setTimeout(()=>{c(p)},wS.get());function E(){Oi().clearTimeout(v),l(o)}o.ping(E).then(E,()=>{c(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RS=500,kS=600,xS="_blank",LS="http://localhost";class h_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NS(i,e,t,o=RS,l=kS){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),p=Math.max((window.screen.availWidth-o)/2,0).toString();let v="";const E={...CS,width:o.toString(),height:l.toString(),top:c,left:p},I=Cn().toLowerCase();t&&(v=By(I)?xS:t),zy(I)&&(e=e||LS,E.scrollbars="yes");const C=Object.entries(E).reduce((R,[Z,ee])=>`${R}${Z}=${ee},`,"");if(eI(I)&&v!=="_self")return OS(e||"",v),new h_(null);const k=window.open(e||"",v,C);Me(k,i,"popup-blocked");try{k.focus()}catch{}return new h_(k)}function OS(i,e){const t=document.createElement("a");t.href=i,t.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="__/auth/handler",MS="emulator/auth/handler",bS=encodeURIComponent("fac");async function d_(i,e,t,o,l,c){Me(i.config.authDomain,i,"auth-domain-config-required"),Me(i.config.apiKey,i,"invalid-api-key");const p={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:o,v:Cl,eventId:l};if(e instanceof up){e.setDefaultLanguage(i.languageCode),p.providerId=e.providerId||"",ET(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,k]of Object.entries({}))p[C]=k}if(e instanceof Vu){const C=e.getScopes().filter(k=>k!=="");C.length>0&&(p.scopes=C.join(","))}i.tenantId&&(p.tid=i.tenantId);const v=p;for(const C of Object.keys(v))v[C]===void 0&&delete v[C];const E=await i._getAppCheckToken(),I=E?`#${bS}=${encodeURIComponent(E)}`:"";return`${VS(i)}?${Mu(v).slice(1)}${I}`}function VS({config:i}){return i.emulator?ip(i,MS):`https://${i.authDomain}/${DS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="webStorageSupport";class FS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nv,this._completeRedirectFn=lS,this._overrideRedirectResult=sS}async _openPopup(e,t,o,l){var p;Is((p=this.eventManagers[e._key()])==null?void 0:p.manager,"_initialize() not called before _openPopup()");const c=await d_(e,t,o,Rf(),l);return NS(e,c,cp())}async _openRedirect(e,t,o,l){await this._originValidation(e);const c=await d_(e,t,o,Rf(),l);return BI(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(Is(c,"If manager is not set, promise should be"),c)}const o=this.initAndGetManager(e);return this.eventManagers[t]={promise:o},o.catch(()=>{delete this.eventManagers[t]}),o}async initAndGetManager(e){const t=await AS(e),o=new cS(e);return t.register("authEvent",l=>(Me(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:o.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=t,o}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_f,{type:_f},l=>{var p;const c=(p=l==null?void 0:l[0])==null?void 0:p[_f];c!==void 0&&t(!!c),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gy()||Uy()||op()}}const zS=FS;var f_="@firebase/auth",p_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(o=>{e((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jS(i){_l(new ya("auth",(e,{options:t})=>{const o=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:p,authDomain:v}=o.options;Me(p&&!p.includes(":"),"invalid-api-key",{appName:o.name});const E={apiKey:p,authDomain:v,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zy(i)},I=new oI(o,l,c,E);return gI(I,t),I},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,o)=>{e.getProvider("auth-internal").initialize()})),_l(new ya("auth-internal",e=>{const t=Sa(e.getProvider("auth").getImmediate());return(o=>new US(o))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Eo(f_,p_,BS(i)),Eo(f_,p_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=300,WS=Iy("authIdTokenMaxAge")||HS;let m_=null;const qS=i=>async e=>{const t=e&&await e.getIdTokenResult(),o=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(o&&o>WS)return;const l=t==null?void 0:t.token;m_!==l&&(m_=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function GS(i=ky()){const e=tp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=mI(i,{popupRedirectResolver:zS,persistence:[QI,FI,nv]}),o=Iy("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(o,location.origin);if(location.origin===c.origin){const p=qS(c.toString());OI(t,p,()=>p(t.currentUser)),NI(t,v=>p(v))}}const l=Ey("auth");return l&&_I(t,`http://${l}`),t}function ZS(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}aI({loadJS(i){return new Promise((e,t)=>{const o=document.createElement("script");o.setAttribute("src",i),o.onload=e,o.onerror=l=>{const c=ri("internal-error");c.customData=l,t(c)},o.type="text/javascript",o.charset="UTF-8",ZS().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jS("Browser");var KS="firebase",$S="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Eo(KS,$S,"app");var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Io,cv;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,N){function M(){}M.prototype=N.prototype,F.F=N.prototype,F.prototype=new M,F.prototype.constructor=F,F.D=function(B,b,j){for(var O=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)O[Qe-2]=arguments[Qe];return N.prototype[b].apply(B,O)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(F,N,M){M||(M=0);const B=Array(16);if(typeof N=="string")for(var b=0;b<16;++b)B[b]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(b=0;b<16;++b)B[b]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=F.g[0],M=F.g[1],b=F.g[2];let j=F.g[3],O;O=N+(j^M&(b^j))+B[0]+3614090360&4294967295,N=M+(O<<7&4294967295|O>>>25),O=j+(b^N&(M^b))+B[1]+3905402710&4294967295,j=N+(O<<12&4294967295|O>>>20),O=b+(M^j&(N^M))+B[2]+606105819&4294967295,b=j+(O<<17&4294967295|O>>>15),O=M+(N^b&(j^N))+B[3]+3250441966&4294967295,M=b+(O<<22&4294967295|O>>>10),O=N+(j^M&(b^j))+B[4]+4118548399&4294967295,N=M+(O<<7&4294967295|O>>>25),O=j+(b^N&(M^b))+B[5]+1200080426&4294967295,j=N+(O<<12&4294967295|O>>>20),O=b+(M^j&(N^M))+B[6]+2821735955&4294967295,b=j+(O<<17&4294967295|O>>>15),O=M+(N^b&(j^N))+B[7]+4249261313&4294967295,M=b+(O<<22&4294967295|O>>>10),O=N+(j^M&(b^j))+B[8]+1770035416&4294967295,N=M+(O<<7&4294967295|O>>>25),O=j+(b^N&(M^b))+B[9]+2336552879&4294967295,j=N+(O<<12&4294967295|O>>>20),O=b+(M^j&(N^M))+B[10]+4294925233&4294967295,b=j+(O<<17&4294967295|O>>>15),O=M+(N^b&(j^N))+B[11]+2304563134&4294967295,M=b+(O<<22&4294967295|O>>>10),O=N+(j^M&(b^j))+B[12]+1804603682&4294967295,N=M+(O<<7&4294967295|O>>>25),O=j+(b^N&(M^b))+B[13]+4254626195&4294967295,j=N+(O<<12&4294967295|O>>>20),O=b+(M^j&(N^M))+B[14]+2792965006&4294967295,b=j+(O<<17&4294967295|O>>>15),O=M+(N^b&(j^N))+B[15]+1236535329&4294967295,M=b+(O<<22&4294967295|O>>>10),O=N+(b^j&(M^b))+B[1]+4129170786&4294967295,N=M+(O<<5&4294967295|O>>>27),O=j+(M^b&(N^M))+B[6]+3225465664&4294967295,j=N+(O<<9&4294967295|O>>>23),O=b+(N^M&(j^N))+B[11]+643717713&4294967295,b=j+(O<<14&4294967295|O>>>18),O=M+(j^N&(b^j))+B[0]+3921069994&4294967295,M=b+(O<<20&4294967295|O>>>12),O=N+(b^j&(M^b))+B[5]+3593408605&4294967295,N=M+(O<<5&4294967295|O>>>27),O=j+(M^b&(N^M))+B[10]+38016083&4294967295,j=N+(O<<9&4294967295|O>>>23),O=b+(N^M&(j^N))+B[15]+3634488961&4294967295,b=j+(O<<14&4294967295|O>>>18),O=M+(j^N&(b^j))+B[4]+3889429448&4294967295,M=b+(O<<20&4294967295|O>>>12),O=N+(b^j&(M^b))+B[9]+568446438&4294967295,N=M+(O<<5&4294967295|O>>>27),O=j+(M^b&(N^M))+B[14]+3275163606&4294967295,j=N+(O<<9&4294967295|O>>>23),O=b+(N^M&(j^N))+B[3]+4107603335&4294967295,b=j+(O<<14&4294967295|O>>>18),O=M+(j^N&(b^j))+B[8]+1163531501&4294967295,M=b+(O<<20&4294967295|O>>>12),O=N+(b^j&(M^b))+B[13]+2850285829&4294967295,N=M+(O<<5&4294967295|O>>>27),O=j+(M^b&(N^M))+B[2]+4243563512&4294967295,j=N+(O<<9&4294967295|O>>>23),O=b+(N^M&(j^N))+B[7]+1735328473&4294967295,b=j+(O<<14&4294967295|O>>>18),O=M+(j^N&(b^j))+B[12]+2368359562&4294967295,M=b+(O<<20&4294967295|O>>>12),O=N+(M^b^j)+B[5]+4294588738&4294967295,N=M+(O<<4&4294967295|O>>>28),O=j+(N^M^b)+B[8]+2272392833&4294967295,j=N+(O<<11&4294967295|O>>>21),O=b+(j^N^M)+B[11]+1839030562&4294967295,b=j+(O<<16&4294967295|O>>>16),O=M+(b^j^N)+B[14]+4259657740&4294967295,M=b+(O<<23&4294967295|O>>>9),O=N+(M^b^j)+B[1]+2763975236&4294967295,N=M+(O<<4&4294967295|O>>>28),O=j+(N^M^b)+B[4]+1272893353&4294967295,j=N+(O<<11&4294967295|O>>>21),O=b+(j^N^M)+B[7]+4139469664&4294967295,b=j+(O<<16&4294967295|O>>>16),O=M+(b^j^N)+B[10]+3200236656&4294967295,M=b+(O<<23&4294967295|O>>>9),O=N+(M^b^j)+B[13]+681279174&4294967295,N=M+(O<<4&4294967295|O>>>28),O=j+(N^M^b)+B[0]+3936430074&4294967295,j=N+(O<<11&4294967295|O>>>21),O=b+(j^N^M)+B[3]+3572445317&4294967295,b=j+(O<<16&4294967295|O>>>16),O=M+(b^j^N)+B[6]+76029189&4294967295,M=b+(O<<23&4294967295|O>>>9),O=N+(M^b^j)+B[9]+3654602809&4294967295,N=M+(O<<4&4294967295|O>>>28),O=j+(N^M^b)+B[12]+3873151461&4294967295,j=N+(O<<11&4294967295|O>>>21),O=b+(j^N^M)+B[15]+530742520&4294967295,b=j+(O<<16&4294967295|O>>>16),O=M+(b^j^N)+B[2]+3299628645&4294967295,M=b+(O<<23&4294967295|O>>>9),O=N+(b^(M|~j))+B[0]+4096336452&4294967295,N=M+(O<<6&4294967295|O>>>26),O=j+(M^(N|~b))+B[7]+1126891415&4294967295,j=N+(O<<10&4294967295|O>>>22),O=b+(N^(j|~M))+B[14]+2878612391&4294967295,b=j+(O<<15&4294967295|O>>>17),O=M+(j^(b|~N))+B[5]+4237533241&4294967295,M=b+(O<<21&4294967295|O>>>11),O=N+(b^(M|~j))+B[12]+1700485571&4294967295,N=M+(O<<6&4294967295|O>>>26),O=j+(M^(N|~b))+B[3]+2399980690&4294967295,j=N+(O<<10&4294967295|O>>>22),O=b+(N^(j|~M))+B[10]+4293915773&4294967295,b=j+(O<<15&4294967295|O>>>17),O=M+(j^(b|~N))+B[1]+2240044497&4294967295,M=b+(O<<21&4294967295|O>>>11),O=N+(b^(M|~j))+B[8]+1873313359&4294967295,N=M+(O<<6&4294967295|O>>>26),O=j+(M^(N|~b))+B[15]+4264355552&4294967295,j=N+(O<<10&4294967295|O>>>22),O=b+(N^(j|~M))+B[6]+2734768916&4294967295,b=j+(O<<15&4294967295|O>>>17),O=M+(j^(b|~N))+B[13]+1309151649&4294967295,M=b+(O<<21&4294967295|O>>>11),O=N+(b^(M|~j))+B[4]+4149444226&4294967295,N=M+(O<<6&4294967295|O>>>26),O=j+(M^(N|~b))+B[11]+3174756917&4294967295,j=N+(O<<10&4294967295|O>>>22),O=b+(N^(j|~M))+B[2]+718787259&4294967295,b=j+(O<<15&4294967295|O>>>17),O=M+(j^(b|~N))+B[9]+3951481745&4294967295,F.g[0]=F.g[0]+N&4294967295,F.g[1]=F.g[1]+(b+(O<<21&4294967295|O>>>11))&4294967295,F.g[2]=F.g[2]+b&4294967295,F.g[3]=F.g[3]+j&4294967295}o.prototype.v=function(F,N){N===void 0&&(N=F.length);const M=N-this.blockSize,B=this.C;let b=this.h,j=0;for(;j<N;){if(b==0)for(;j<=M;)l(this,F,j),j+=this.blockSize;if(typeof F=="string"){for(;j<N;)if(B[b++]=F.charCodeAt(j++),b==this.blockSize){l(this,B),b=0;break}}else for(;j<N;)if(B[b++]=F[j++],b==this.blockSize){l(this,B),b=0;break}}this.h=b,this.o+=N},o.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var N=1;N<F.length-8;++N)F[N]=0;N=this.o*8;for(var M=F.length-8;M<F.length;++M)F[M]=N&255,N/=256;for(this.v(F),F=Array(16),N=0,M=0;M<4;++M)for(let B=0;B<32;B+=8)F[N++]=this.g[M]>>>B&255;return F};function c(F,N){var M=v;return Object.prototype.hasOwnProperty.call(M,F)?M[F]:M[F]=N(F)}function p(F,N){this.h=N;const M=[];let B=!0;for(let b=F.length-1;b>=0;b--){const j=F[b]|0;B&&j==N||(M[b]=j,B=!1)}this.g=M}var v={};function E(F){return-128<=F&&F<128?c(F,function(N){return new p([N|0],N<0?-1:0)}):new p([F|0],F<0?-1:0)}function I(F){if(isNaN(F)||!isFinite(F))return k;if(F<0)return le(I(-F));const N=[];let M=1;for(let B=0;F>=M;B++)N[B]=F/M|0,M*=4294967296;return new p(N,0)}function C(F,N){if(F.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(F.charAt(0)=="-")return le(C(F.substring(1),N));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=I(Math.pow(N,8));let B=k;for(let j=0;j<F.length;j+=8){var b=Math.min(8,F.length-j);const O=parseInt(F.substring(j,j+b),N);b<8?(b=I(Math.pow(N,b)),B=B.j(b).add(I(O))):(B=B.j(M),B=B.add(I(O)))}return B}var k=E(0),R=E(1),Z=E(16777216);i=p.prototype,i.m=function(){if(Y(this))return-le(this).m();let F=0,N=1;for(let M=0;M<this.g.length;M++){const B=this.i(M);F+=(B>=0?B:4294967296+B)*N,N*=4294967296}return F},i.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(ee(this))return"0";if(Y(this))return"-"+le(this).toString(F);const N=I(Math.pow(F,6));var M=this;let B="";for(;;){const b=et(M,N).g;M=Ve(M,b.j(N));let j=((M.g.length>0?M.g[0]:M.h)>>>0).toString(F);if(M=b,ee(M))return j+B;for(;j.length<6;)j="0"+j;B=j+B}},i.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function ee(F){if(F.h!=0)return!1;for(let N=0;N<F.g.length;N++)if(F.g[N]!=0)return!1;return!0}function Y(F){return F.h==-1}i.l=function(F){return F=Ve(this,F),Y(F)?-1:ee(F)?0:1};function le(F){const N=F.g.length,M=[];for(let B=0;B<N;B++)M[B]=~F.g[B];return new p(M,~F.h).add(R)}i.abs=function(){return Y(this)?le(this):this},i.add=function(F){const N=Math.max(this.g.length,F.g.length),M=[];let B=0;for(let b=0;b<=N;b++){let j=B+(this.i(b)&65535)+(F.i(b)&65535),O=(j>>>16)+(this.i(b)>>>16)+(F.i(b)>>>16);B=O>>>16,j&=65535,O&=65535,M[b]=O<<16|j}return new p(M,M[M.length-1]&-2147483648?-1:0)};function Ve(F,N){return F.add(le(N))}i.j=function(F){if(ee(this)||ee(F))return k;if(Y(this))return Y(F)?le(this).j(le(F)):le(le(this).j(F));if(Y(F))return le(this.j(le(F)));if(this.l(Z)<0&&F.l(Z)<0)return I(this.m()*F.m());const N=this.g.length+F.g.length,M=[];for(var B=0;B<2*N;B++)M[B]=0;for(B=0;B<this.g.length;B++)for(let b=0;b<F.g.length;b++){const j=this.i(B)>>>16,O=this.i(B)&65535,Qe=F.i(b)>>>16,Vt=F.i(b)&65535;M[2*B+2*b]+=O*Vt,Re(M,2*B+2*b),M[2*B+2*b+1]+=j*Vt,Re(M,2*B+2*b+1),M[2*B+2*b+1]+=O*Qe,Re(M,2*B+2*b+1),M[2*B+2*b+2]+=j*Qe,Re(M,2*B+2*b+2)}for(F=0;F<N;F++)M[F]=M[2*F+1]<<16|M[2*F];for(F=N;F<2*N;F++)M[F]=0;return new p(M,0)};function Re(F,N){for(;(F[N]&65535)!=F[N];)F[N+1]+=F[N]>>>16,F[N]&=65535,N++}function De(F,N){this.g=F,this.h=N}function et(F,N){if(ee(N))throw Error("division by zero");if(ee(F))return new De(k,k);if(Y(F))return N=et(le(F),N),new De(le(N.g),le(N.h));if(Y(N))return N=et(F,le(N)),new De(le(N.g),N.h);if(F.g.length>30){if(Y(F)||Y(N))throw Error("slowDivide_ only works with positive integers.");for(var M=R,B=N;B.l(F)<=0;)M=ct(M),B=ct(B);var b=$e(M,1),j=$e(B,1);for(B=$e(B,2),M=$e(M,2);!ee(B);){var O=j.add(B);O.l(F)<=0&&(b=b.add(M),j=O),B=$e(B,1),M=$e(M,1)}return N=Ve(F,b.j(N)),new De(b,N)}for(b=k;F.l(N)>=0;){for(M=Math.max(1,Math.floor(F.m()/N.m())),B=Math.ceil(Math.log(M)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),j=I(M),O=j.j(N);Y(O)||O.l(F)>0;)M-=B,j=I(M),O=j.j(N);ee(j)&&(j=R),b=b.add(j),F=Ve(F,O)}return new De(b,F)}i.B=function(F){return et(this,F).h},i.and=function(F){const N=Math.max(this.g.length,F.g.length),M=[];for(let B=0;B<N;B++)M[B]=this.i(B)&F.i(B);return new p(M,this.h&F.h)},i.or=function(F){const N=Math.max(this.g.length,F.g.length),M=[];for(let B=0;B<N;B++)M[B]=this.i(B)|F.i(B);return new p(M,this.h|F.h)},i.xor=function(F){const N=Math.max(this.g.length,F.g.length),M=[];for(let B=0;B<N;B++)M[B]=this.i(B)^F.i(B);return new p(M,this.h^F.h)};function ct(F){const N=F.g.length+1,M=[];for(let B=0;B<N;B++)M[B]=F.i(B)<<1|F.i(B-1)>>>31;return new p(M,F.h)}function $e(F,N){const M=N>>5;N%=32;const B=F.g.length-M,b=[];for(let j=0;j<B;j++)b[j]=N>0?F.i(j+M)>>>N|F.i(j+M+1)<<32-N:F.i(j+M);return new p(b,F.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,cv=o,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=I,p.fromString=C,Io=p}).apply(typeof g_<"u"?g_:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hv,du,dv,eh,Lf,fv,pv,mv;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var o=t(this);function l(h,y){if(y)e:{var T=o;h=h.split(".");for(var A=0;A<h.length-1;A++){var H=h[A];if(!(H in T))break e;T=T[H]}h=h[h.length-1],A=T[h],y=y(A),y!=A&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var T=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&T.push([A,y[A]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},p=this||self;function v(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function E(h,y,T){return h.call.apply(h.bind,arguments)}function I(h,y,T){return I=E,I.apply(null,arguments)}function C(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function k(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(A,H,K){for(var he=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)he[Oe-2]=arguments[Oe];return y.prototype[H].apply(A,he)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function Z(h){const y=h.length;if(y>0){const T=Array(y);for(let A=0;A<y;A++)T[A]=h[A];return T}return[]}function ee(h,y){for(let A=1;A<arguments.length;A++){const H=arguments[A];var T=typeof H;if(T=T!="object"?T:H?Array.isArray(H)?"array":T:"null",T=="array"||T=="object"&&typeof H.length=="number"){T=h.length||0;const K=H.length||0;h.length=T+K;for(let he=0;he<K;he++)h[T+he]=H[he]}else h.push(H)}}class Y{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function le(h){p.setTimeout(()=>{throw h},0)}function Ve(){var h=F;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Re{constructor(){this.h=this.g=null}add(y,T){const A=De.get();A.set(y,T),this.h?this.h.next=A:this.g=A,this.h=A}}var De=new Y(()=>new et,h=>h.reset());class et{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,$e=!1,F=new Re,N=()=>{const h=Promise.resolve(void 0);ct=()=>{h.then(M)}};function M(){for(var h;h=Ve();){try{h.h.call(h.g)}catch(T){le(T)}var y=De;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}$e=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};p.addEventListener("test",T,y),p.removeEventListener("test",T,y)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function Qe(h,y){b.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}k(Qe,b),Qe.prototype.init=function(h,y){const T=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Vt="closure_listenable_"+(Math.random()*1e6|0),ht=0;function dt(h,y,T,A,H){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!A,this.ha=H,this.key=++ht,this.da=this.fa=!1}function J(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pe(h,y,T){for(const A in h)y.call(T,h[A],A,h)}function ne(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function z(h){const y={};for(const T in h)y[T]=h[T];return y}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(h,y){let T,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(T in A)h[T]=A[T];for(let K=0;K<X.length;K++)T=X[K],Object.prototype.hasOwnProperty.call(A,T)&&(h[T]=A[T])}}function Te(h){this.src=h,this.g={},this.h=0}Te.prototype.add=function(h,y,T,A,H){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const he=pe(h,y,A,H);return he>-1?(y=h[he],T||(y.fa=!1)):(y=new dt(y,this.src,K,!!A,H),y.fa=T,h.push(y)),y};function we(h,y){const T=y.type;if(T in h.g){var A=h.g[T],H=Array.prototype.indexOf.call(A,y,void 0),K;(K=H>=0)&&Array.prototype.splice.call(A,H,1),K&&(J(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function pe(h,y,T,A){for(let H=0;H<h.length;++H){const K=h[H];if(!K.da&&K.listener==y&&K.capture==!!T&&K.ha==A)return H}return-1}var Ze="closure_lm_"+(Math.random()*1e6|0),He={};function ft(h,y,T,A,H){if(Array.isArray(y)){for(let K=0;K<y.length;K++)ft(h,y[K],T,A,H);return null}return T=ai(T),h&&h[Vt]?h.J(y,T,v(A)?!!A.capture:!1,H):Gt(h,y,T,!1,A,H)}function Gt(h,y,T,A,H,K){if(!y)throw Error("Invalid event type");const he=v(H)?!!H.capture:!!H;let Oe=zi(h);if(Oe||(h[Ze]=Oe=new Te(h)),T=Oe.add(y,T,A,he,K),T.proxy)return T;if(A=oi(),T.proxy=A,A.src=h,A.listener=T,h.addEventListener)j||(H=he),H===void 0&&(H=!1),h.addEventListener(y.toString(),A,H);else if(h.attachEvent)h.attachEvent(Cs(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function oi(){function h(T){return y.call(h.src,h.listener,T)}const y=bo;return h}function Br(h,y,T,A,H){if(Array.isArray(y))for(var K=0;K<y.length;K++)Br(h,y[K],T,A,H);else A=v(A)?!!A.capture:!!A,T=ai(T),h&&h[Vt]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],T=pe(y,T,A,H),T>-1&&(J(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=zi(h))&&(y=h.g[y.toString()],h=-1,y&&(h=pe(y,T,A,H)),(T=h>-1?y[h]:null)&&hr(T))}function hr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Vt])we(y.i,h);else{var T=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(T,A,h.capture):y.detachEvent?y.detachEvent(Cs(T),A):y.addListener&&y.removeListener&&y.removeListener(A),(T=zi(y))?(we(T,h),T.h==0&&(T.src=null,y[Ze]=null)):J(h)}}}function Cs(h){return h in He?He[h]:He[h]="on"+h}function bo(h,y){if(h.da)h=!0;else{y=new Qe(y,this);const T=h.listener,A=h.ha||h.src;h.fa&&hr(h),h=T.call(A,y)}return h}function zi(h){return h=h[Ze],h instanceof Te?h:null}var jr="__closure_events_fn_"+(Math.random()*1e9>>>0);function ai(h){return typeof h=="function"?h:(h[jr]||(h[jr]=function(y){return h.handleEvent(y)}),h[jr])}function Nt(){B.call(this),this.i=new Te(this),this.M=this,this.G=null}k(Nt,B),Nt.prototype[Vt]=!0,Nt.prototype.removeEventListener=function(h,y,T,A){Br(this,h,y,T,A)};function St(h,y){var T,A=h.G;if(A)for(T=[];A;A=A.G)T.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new b(y,h);else if(y instanceof b)y.target=y.target||h;else{var H=y;y=new b(A,h),Ae(y,H)}H=!0;let K,he;if(T)for(he=T.length-1;he>=0;he--)K=y.g=T[he],H=Rn(K,A,!0,y)&&H;if(K=y.g=h,H=Rn(K,A,!0,y)&&H,H=Rn(K,A,!1,y)&&H,T)for(he=0;he<T.length;he++)K=y.g=T[he],H=Rn(K,A,!1,y)&&H}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let A=0;A<T.length;A++)J(T[A]);delete h.g[y],h.h--}}this.G=null},Nt.prototype.J=function(h,y,T,A){return this.i.add(String(h),y,!1,T,A)},Nt.prototype.K=function(h,y,T,A){return this.i.add(String(h),y,!0,T,A)};function Rn(h,y,T,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let K=0;K<y.length;++K){const he=y[K];if(he&&!he.da&&he.capture==T){const Oe=he.listener,rt=he.ha||he.src;he.fa&&we(h.i,he),H=Oe.call(rt,A)!==!1&&H}}return H&&!A.defaultPrevented}function Rs(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=I(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:p.setTimeout(h,y||0)}function ks(h){h.g=Rs(()=>{h.g=null,h.i&&(h.i=!1,ks(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ra extends B{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ks(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(h){B.call(this),this.h=h,this.g={}}k(li,B);var Ui=[];function Bi(h){Pe(h.g,function(y,T){this.g.hasOwnProperty(T)&&hr(y)},h),h.g={}}li.prototype.N=function(){li.Z.N.call(this),Bi(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hr=p.JSON.stringify,ka=p.JSON.parse,ui=class{stringify(h){return p.JSON.stringify(h,void 0)}parse(h){return p.JSON.parse(h,void 0)}};function Wr(){}function xa(){}var qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ci(){b.call(this,"d")}k(ci,b);function xs(){b.call(this,"c")}k(xs,b);var er={},dr=null;function hi(){return dr=dr||new Nt}er.Ia="serverreachability";function Ls(h){b.call(this,er.Ia,h)}k(Ls,b);function fr(h){const y=hi();St(y,new Ls(y))}er.STAT_EVENT="statevent";function pr(h,y){b.call(this,er.STAT_EVENT,h),this.stat=y}k(pr,b);function Et(h){const y=hi();St(y,new pr(y,h))}er.Ja="timingevent";function Vo(h,y){b.call(this,er.Ja,h),this.size=y}k(Vo,b);function di(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){h()},y)}function fi(){this.g=!0}fi.prototype.ua=function(){this.g=!1};function La(h,y,T,A,H,K){h.info(function(){if(h.g)if(K){var he="",Oe=K.split("&");for(let ot=0;ot<Oe.length;ot++){var rt=Oe[ot].split("=");if(rt.length>1){const Rt=rt[0];rt=rt[1];const Mn=Rt.split("_");he=Mn.length>=2&&Mn[1]=="type"?he+(Rt+"="+rt+"&"):he+(Rt+"=redacted&")}}}else he=null;else he=K;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+y+`
`+T+`
`+he})}function Na(h,y,T,A,H,K,he){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+y+`
`+T+`
`+K+" "+he})}function mr(h,y,T,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ji(h,T)+(A?" "+A:"")})}function Ns(h,y){h.info(function(){return"TIMEOUT: "+y})}fi.prototype.info=function(){};function ji(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var T=K[h];if(!(T.length<2)){var A=T[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let he=1;he<A.length;he++)A[he]=""}}}}return Hr(K)}catch{return y}}var pi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oa;function Ft(){}k(Ft,Wr),Ft.prototype.g=function(){return new XMLHttpRequest},Oa=new Ft;function ye(h){return encodeURIComponent(String(h))}function Hi(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function kn(h,y,T,A){this.j=h,this.i=y,this.l=T,this.S=A||1,this.V=new li(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fo}function Fo(){this.i=null,this.g="",this.h=!1}var zo={},Wi={};function Un(h,y,T){h.M=1,h.A=lt(on(y)),h.u=T,h.R=!0,gr(h,null)}function gr(h,y){h.F=Date.now(),qi(h),h.B=on(h.A);var T=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Ji(T.i,"t",A),h.C=0,T=h.j.L,h.h=new Fo,h.g=Zo(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Ra(I(h.Y,h,h.g),h.P)),y=h.V,T=h.g,A=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(Ui[0]=H.toString()),H=Ui);for(let K=0;K<H.length;K++){const he=ft(T,H[K],A||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=h.J?z(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),fr(),La(h.i,h.v,h.B,h.l,h.S,h.u)}kn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Ir(h)==3?y.j():this.Y(h)},kn.prototype.Y=function(h){try{if(h==this.g)e:{const Oe=Ir(this.g),rt=this.g.ya(),ot=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Wo(this.g)))){this.K||Oe!=4||rt==7||(rt==8||ot<=0?fr(3):fr(2)),Gi(this);var y=this.g.ca();this.X=y;var T=Uo(this);if(this.o=y==200,Na(this.i,this.v,this.B,this.l,this.S,Oe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(A)){var K=A;break t}}K=null}if(h=K)mr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_t(this,h);else{this.o=!1,this.m=3,Et(12),Bn(this),Zi(this);break e}}if(this.R){h=!0;let Rt;for(;!this.K&&this.C<T.length;)if(Rt=Ma(this,T),Rt==Wi){Oe==4&&(this.m=4,Et(14),h=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==zo){this.m=4,Et(15),mr(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else mr(this.i,this.l,Rt,null),_t(this,Rt);if(Da(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||T.length!=0||this.h.h||(this.m=1,Et(16),h=!1),this.o=this.o&&h,!h)mr(this.i,this.l,T,"[Invalid Chunked Response]"),Bn(this),Zi(this);else if(T.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),is(he),he.P=!0,Et(11))}}else mr(this.i,this.l,T,null),_t(this,T);Oe==4&&Bn(this),this.o&&!this.K&&(Oe==4?ln(this.j,this):(this.o=!1,qi(this)))}else ts(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),Bn(this),Zi(this)}}}catch{}finally{}};function Uo(h){if(!Da(h))return h.g.la();const y=Wo(h.g);if(y==="")return"";let T="";const A=y.length,H=Ir(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Bn(h),Zi(h),"";h.h.i=new p.TextDecoder}for(let K=0;K<A;K++)h.h.h=!0,T+=h.h.i.decode(y[K],{stream:!(H&&K==A-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function Da(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ma(h,y){var T=h.C,A=y.indexOf(`
`,T);return A==-1?Wi:(T=Number(y.substring(T,A)),isNaN(T)?zo:(A+=1,A+T>y.length?Wi:(y=y.slice(A,A+T),h.C=A+T,y)))}kn.prototype.cancel=function(){this.K=!0,Bn(this)};function qi(h){h.T=Date.now()+h.H,Bo(h,h.H)}function Bo(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=di(I(h.aa,h),y)}function Gi(h){h.D&&(p.clearTimeout(h.D),h.D=null)}kn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ns(this.i,this.B),this.M!=2&&(fr(),Et(17)),Bn(this),this.m=2,Zi(this)):Bo(this,this.T-h)};function Zi(h){h.j.I==0||h.K||ln(h.j,h)}function Bn(h){Gi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Bi(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function _t(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||$i(T.h,h))){if(!h.L&&$i(T.h,h)&&T.I==3){try{var A=T.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)bs(T),On(T);else break e;Pr(T),Et(18)}}else T.xa=H[1],0<T.xa-T.K&&H[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=di(I(T.Va,T),6e3));Ki(T.h)<=1&&T.ta&&(T.ta=void 0)}else _n(T,11)}else if((h.L||T.g==h)&&bs(T),!O(y))for(H=T.Ba.g.parse(y),y=0;y<H.length;y++){let ot=H[y];const Rt=ot[0];if(!(Rt<=T.K))if(T.K=Rt,ot=ot[1],T.I==2)if(ot[0]=="c"){T.M=ot[1],T.ba=ot[2];const Mn=ot[3];Mn!=null&&(T.ka=Mn,T.j.info("VER="+T.ka));const rr=ot[4];rr!=null&&(T.za=rr,T.j.info("SVER="+T.za));const qn=ot[5];qn!=null&&typeof qn=="number"&&qn>0&&(A=1.5*qn,T.O=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const Cr=h.g;if(Cr){const Bs=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var K=A.h;K.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(_r(K,K.h),K.h=null))}if(A.G){const js=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;js&&(A.wa=js,fe(A.J,A.G,js))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),A=T;var he=h;if(A.na=Fs(A,A.L?A.ba:null,A.W),he.L){gi(A.h,he);var Oe=he,rt=A.O;rt&&(Oe.H=rt),Oe.D&&(Gi(Oe),qi(Oe)),A.g=he}else Zt(A);T.i.length>0&&Dn(T)}else ot[0]!="stop"&&ot[0]!="close"||_n(T,7);else T.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?_n(T,7):Ge(T):ot[0]!="noop"&&T.l&&T.l.qa(ot),T.A=0)}}fr(4)}catch{}}var Ml=class{constructor(h,y){this.g=h,this.map=y}};function Os(h){this.l=h||10,p.PerformanceNavigationTiming?(h=p.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ki(h){return h.h?1:h.g?h.g.size:0}function $i(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function _r(h,y){h.g?h.g.add(y):h.h=y}function gi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Os.prototype.cancel=function(){if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return Z(h.i)}var _i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ze(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const A=h[T].indexOf("=");let H,K=null;A>=0?(H=h[T].substring(0,A),K=h[T].substring(A+1)):H=h[T],y(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function nt(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof nt?(this.l=h.l,jn(this,h.j),this.o=h.o,this.g=h.g,an(this,h.u),this.h=h.h,yr(this,vi(h.i)),this.m=h.m):h&&(y=String(h).match(_i))?(this.l=!1,jn(this,y[1]||"",!0),this.o=Gr(y[2]||""),this.g=Gr(y[3]||"",!0),an(this,y[4]),this.h=Gr(y[5]||"",!0),yr(this,y[6]||"",!0),this.m=Gr(y[7]||"")):(this.l=!1,this.i=new qe(null,this.l))}nt.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(vr(y,Ho,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(vr(y,Ho,!0),"@"),h.push(ye(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(vr(T,T.charAt(0)=="/"?xn:yi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",vr(T,tr)),h.join("")},nt.prototype.resolve=function(h){const y=on(this);let T=!!h.j;T?jn(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var A=h.h;if(T)an(y,h.u);else if(T=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=y.h.lastIndexOf("/");H!=-1&&(A=y.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let he=0;he<H.length;){const Oe=H[he++];Oe=="."?A&&he==H.length&&K.push(""):Oe==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),A&&he==H.length&&K.push("")):(K.push(Oe),A=!0)}A=K.join("/")}else A=H}return T?y.h=A:T=h.i.toString()!=="",T?yr(y,vi(h.i)):T=!!h.m,T&&(y.m=h.m),y};function on(h){return new nt(h)}function jn(h,y,T){h.j=T?Gr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function an(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function yr(h,y,T){y instanceof qe?(h.i=y,wi(h.i,h.l)):(T||(y=vr(y,Pt)),h.i=new qe(y,h.l))}function fe(h,y,T){h.i.set(y,T)}function lt(h){return fe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Gr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function vr(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,Xt),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Xt(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ho=/[#\/\?@]/g,yi=/[#\?:]/g,xn=/[#\?]/g,Pt=/[#\?@]/g,tr=/#/g;function qe(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function mn(h){h.g||(h.g=new Map,h.h=0,h.i&&ze(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}i=qe.prototype,i.add=function(h,y){mn(this),this.i=null,h=Hn(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function Qi(h,y){mn(h),y=Hn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function wr(h,y){return mn(h),y=Hn(h,y),h.g.has(y)}i.forEach=function(h,y){mn(this),this.g.forEach(function(T,A){T.forEach(function(H){h.call(y,H,A,this)},this)},this)};function Yi(h,y){mn(h);let T=[];if(typeof y=="string")wr(h,y)&&(T=T.concat(h.g.get(Hn(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}i.set=function(h,y){return mn(this),this.i=null,h=Hn(this,h),wr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=Yi(this,h),h.length>0?String(h[0]):y):y};function Ji(h,y,T){Qi(h,y),T.length>0&&(h.i=null,h.g.set(Hn(h,y),Z(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var T=y[A];const H=ye(T);T=Yi(this,T);for(let K=0;K<T.length;K++){let he=H;T[K]!==""&&(he+="="+ye(T[K])),h.push(he)}}return this.i=h.join("&")};function vi(h){const y=new qe;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Hn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function wi(h,y){y&&!h.j&&(mn(h),h.i=null,h.g.forEach(function(T,A){const H=A.toLowerCase();A!=H&&(Qi(this,A),Ji(this,H,T))},h)),h.j=y}function Ln(h,y){const T=new fi;if(p.Image){const A=new Image;A.onload=C(Dt,T,"TestLoadImage: loaded",!0,y,A),A.onerror=C(Dt,T,"TestLoadImage: error",!1,y,A),A.onabort=C(Dt,T,"TestLoadImage: abort",!1,y,A),A.ontimeout=C(Dt,T,"TestLoadImage: timeout",!1,y,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function nr(h,y){const T=new fi,A=new AbortController,H=setTimeout(()=>{A.abort(),Dt(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(K=>{clearTimeout(H),K.ok?Dt(T,"TestPingServer: ok",!0,y):Dt(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Dt(T,"TestPingServer: error",!1,y)})}function Dt(h,y,T,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(T)}catch{}}function Xi(){this.g=new ui}function xe(h){this.i=h.Sb||null,this.h=h.ab||!1}k(xe,Wr),xe.prototype.g=function(){return new At(this.i,this.h)};function At(h,y){Nt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(At,Nt),i=At.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Nn(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||p).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Nn(this)),this.g&&(this.readyState=3,Nn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ut(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ut(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Zr(this):Nn(this),this.readyState==3&&ut(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Zr(this))},i.Na=function(h){this.g&&(this.response=h,Zr(this))},i.ga=function(){this.g&&Zr(this)};function Zr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Nn(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Nn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(At.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ds(h){let y="";return Pe(h,function(T,A){y+=A,y+=":",y+=T,y+=`\r
`}),y}function Ei(h,y,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=Ds(T),typeof h=="string"?T!=null&&ye(T):fe(h,y,T))}function tt(h){Nt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(tt,Nt);var Ms=/^https?$/i,es=["POST","PUT"];i=tt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oa.g(),this.g.onreadystatechange=R(I(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){yt(this,K);return}if(h=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)T.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())T.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(K=>K.toLowerCase()=="content-type"),H=p.FormData&&h instanceof p.FormData,!(Array.prototype.indexOf.call(es,y,void 0)>=0)||A||H||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,he]of T)this.g.setRequestHeader(K,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){yt(this,K)}};function yt(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,gn(h),Tr(h)}function gn(h){h.A||(h.A=!0,St(h,"complete"),St(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,St(this,"complete"),St(this,"abort"),Tr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),tt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Er(this):this.Xa())},i.Xa=function(){Er(this)};function Er(h){if(h.h&&typeof c<"u"){if(h.v&&Ir(h)==4)setTimeout(h.Ca.bind(h),0);else if(St(h,"readystatechange"),Ir(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var A;if(A=K===0){let he=String(h.D).match(_i)[1]||null;!he&&p.self&&p.self.location&&(he=p.self.location.protocol.slice(0,-1)),A=!Ms.test(he?he.toLowerCase():"")}T=A}if(T)St(h,"complete"),St(h,"success");else{h.o=6;try{var H=Ir(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",gn(h)}}finally{Tr(h)}}}}function Tr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||St(h,"ready");try{T.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Ir(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Ir(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ka(y)}};function Wo(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ts(h){const y={};h=(h.g&&Ir(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(O(h[A]))continue;var T=Hi(h[A]);const H=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const K=y[H]||[];y[H]=K,K.push(T)}ne(y,function(A){return A.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function ns(h){this.za=0,this.i=[],this.j=new fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sr("baseRetryDelayMs",5e3,h),this.Za=Sr("retryDelaySeedMs",1e4,h),this.Ta=Sr("forwardChannelMaxRetries",2,h),this.va=Sr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Os(h&&h.concurrentRequestLimit),this.Ba=new Xi,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ns.prototype,i.ka=8,i.I=1,i.connect=function(h,y,T,A){Et(0),this.W=h,this.H=y||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.J=Fs(this,null,this.W),Dn(this)};function Ge(h){if(en(h),h.I==3){var y=h.V++,T=on(h.J);if(fe(T,"SID",h.M),fe(T,"RID",y),fe(T,"TYPE","terminate"),Wn(h,T),y=new kn(h,h.j,y),y.M=2,y.A=lt(on(T)),T=!1,p.navigator&&p.navigator.sendBeacon)try{T=p.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&p.Image&&(new Image().src=y.A,T=!0),T||(y.g=Zo(y.j,null),y.g.ea(y.A)),y.F=Date.now(),qi(y)}yn(h)}function On(h){h.g&&(is(h),h.g.cancel(),h.g=null)}function en(h){On(h),h.v&&(p.clearTimeout(h.v),h.v=null),bs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&p.clearTimeout(h.m),h.m=null)}function Dn(h){if(!jo(h.h)&&!h.m){h.m=!0;var y=h.Ea;ct||N(),$e||(ct(),$e=!0),F.add(y,h),h.D=0}}function qo(h,y){return Ki(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=di(I(h.Ea,h,y),Vs(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new kn(this,this.j,h);let K=this.o;if(this.U&&(K?(K=z(K),Ae(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Go(this,H,y),T=on(this.J),fe(T,"RID",h),fe(T,"CVER",22),this.G&&fe(T,"X-HTTP-Session-Id",this.G),Wn(this,T),K&&(this.R?y="headers="+ye(Ds(K))+"&"+y:this.u&&Ei(T,this.u,K)),_r(this.h,H),this.Ra&&fe(T,"TYPE","init"),this.S?(fe(T,"$req",y),fe(T,"SID","null"),H.U=!0,Un(H,T,null)):Un(H,T,y),this.I=2}}else this.I==3&&(h?rs(this,h):this.i.length==0||jo(this.h)||rs(this))};function rs(h,y){var T;y?T=y.l:T=h.V++;const A=on(h.J);fe(A,"SID",h.M),fe(A,"RID",T),fe(A,"AID",h.K),Wn(h,A),h.u&&h.o&&Ei(A,h.u,h.o),T=new kn(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Go(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),_r(h.h,T),Un(T,A,y)}function Wn(h,y){h.H&&Pe(h.H,function(T,A){fe(y,A,T)}),h.l&&Pe({},function(T,A){fe(y,A,T)})}function Go(h,y,T){T=Math.min(h.i.length,T);const A=h.l?I(h.l.Ka,h.l,h):null;e:{var H=h.i;let Oe=-1;for(;;){const rt=["count="+T];Oe==-1?T>0?(Oe=H[0].g,rt.push("ofs="+Oe)):Oe=0:rt.push("ofs="+Oe);let ot=!0;for(let Rt=0;Rt<T;Rt++){var K=H[Rt].g;const Mn=H[Rt].map;if(K-=Oe,K<0)Oe=Math.max(0,H[Rt].g-100),ot=!1;else try{K="req"+K+"_"||"";try{var he=Mn instanceof Map?Mn:Object.entries(Mn);for(const[rr,qn]of he){let Cr=qn;v(qn)&&(Cr=Hr(qn)),rt.push(K+rr+"="+encodeURIComponent(Cr))}}catch(rr){throw rt.push(K+"type="+encodeURIComponent("_badmap")),rr}}catch{A&&A(Mn)}}if(ot){he=rt.join("&");break e}}he=void 0}return h=h.i.splice(0,T),y.G=h,he}function Zt(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ct||N(),$e||(ct(),$e=!0),F.add(y,h),h.A=0}}function Pr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=di(I(h.Da,h),Vs(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,Ar(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=di(I(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),On(this),Ar(this))};function is(h){h.B!=null&&(p.clearTimeout(h.B),h.B=null)}function Ar(h){h.g=new kn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=on(h.na);fe(y,"RID","rpc"),fe(y,"SID",h.M),fe(y,"AID",h.K),fe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&fe(y,"TO",h.ia),fe(y,"TYPE","xmlhttp"),Wn(h,y),h.u&&h.o&&Ei(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=lt(on(y)),T.u=null,T.R=!0,gr(T,h)}i.Va=function(){this.C!=null&&(this.C=null,On(this),Pr(this),Et(19))};function bs(h){h.C!=null&&(p.clearTimeout(h.C),h.C=null)}function ln(h,y){var T=null;if(h.g==y){bs(h),is(h),h.g=null;var A=2}else if($i(h.h,y))T=y.G,gi(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;A=hi(),St(A,new Vo(A,T)),Dn(h)}else Zt(h);else if(H=y.m,H==3||H==0&&y.X>0||!(A==1&&qo(h,y)||A==2&&Pr(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),H){case 1:_n(h,5);break;case 4:_n(h,10);break;case 3:_n(h,6);break;default:_n(h,2)}}}function Vs(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function _n(h,y){if(h.j.info("Error code "+y),y==2){var T=I(h.bb,h),A=h.Ua;const H=!A;A=new nt(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||jn(A,"https"),lt(A),H?Ln(A.toString(),T):nr(A.toString(),T)}else Et(2);h.I=0,h.l&&h.l.pa(y),yn(h),en(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function yn(h){if(h.I=0,h.ja=[],h.l){const y=pn(h.h);(y.length!=0||h.i.length!=0)&&(ee(h.ja,y),ee(h.ja,h.i),h.h.i.length=0,Z(h.i),h.i.length=0),h.l.oa()}}function Fs(h,y,T){var A=T instanceof nt?on(T):new nt(T);if(A.g!="")y&&(A.g=y+"."+A.g),an(A,A.u);else{var H=p.location;A=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const K=new nt(null);A&&jn(K,A),y&&(K.g=y),H&&an(K,H),T&&(K.h=T),A=K}return T=h.G,y=h.wa,T&&y&&fe(A,T,y),fe(A,"VER",h.ka),Wn(h,A),A}function Zo(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new tt(new xe({ab:T})):new tt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function zs(){}i=zs.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Us(){}Us.prototype.g=function(h,y){return new zt(h,y)};function zt(h,y){Nt.call(this),this.g=new ns(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!O(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ti(this)}k(zt,Nt),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Ge(this.g)},zt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Hr(h),h=T);y.i.push(new Ml(y.Ya++,h)),y.I==3&&Dn(y)},zt.prototype.N=function(){this.g.l=null,delete this.j,Ge(this.g),delete this.g,zt.Z.N.call(this)};function Ko(h){ci.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}k(Ko,ci);function ba(){xs.call(this),this.status=1}k(ba,xs);function Ti(h){this.g=h}k(Ti,zs),Ti.prototype.ra=function(){St(this.g,"a")},Ti.prototype.qa=function(h){St(this.g,new Ko(h))},Ti.prototype.pa=function(h){St(this.g,new ba)},Ti.prototype.oa=function(){St(this.g,"b")},Us.prototype.createWebChannel=Us.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,mv=function(){return new Us},pv=function(){return hi()},fv=er,Lf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pi.NO_ERROR=0,pi.TIMEOUT=8,pi.HTTP_ERROR=6,eh=pi,mi.COMPLETE="complete",dv=mi,xa.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,du=xa,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,hv=tt}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl="12.8.0";function QS(i){kl=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Xf("@firebase/firestore");function ll(){return wa.logLevel}function _e(i,...e){if(wa.logLevel<=Ye.DEBUG){const t=e.map(dp);wa.debug(`Firestore (${kl}): ${i}`,...t)}}function Ss(i,...e){if(wa.logLevel<=Ye.ERROR){const t=e.map(dp);wa.error(`Firestore (${kl}): ${i}`,...t)}}function vl(i,...e){if(wa.logLevel<=Ye.WARN){const t=e.map(dp);wa.warn(`Firestore (${kl}): ${i}`,...t)}}function dp(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(i,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,gv(i,o,t)}function gv(i,e,t){let o=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw Ss(o),new Error(o)}function mt(i,e,t,o){let l="Unexpected state";typeof t=="string"?l=t:o=t,i||gv(e,l,o)}function je(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends As{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pn.UNAUTHENTICATED)))}shutdown(){}}class JS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class XS{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let o=this.i;const l=E=>this.i!==o?(o=this.i,t(E)):Promise.resolve();let c=new So;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new So,e.enqueueRetryable((()=>l(this.currentUser)))};const p=()=>{const E=c;e.enqueueRetryable((async()=>{await E.promise,await l(this.currentUser)}))},v=E=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((E=>v(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new So)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(mt(typeof o.accessToken=="string",31837,{l:o}),new _v(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new Pn(e)}}class eP{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class tP{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new eP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class __{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);const o=c=>{c.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.m;return this.m=c.token,_e("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>o(c)))};const l=c=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new __(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new __(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const l=rP(40);for(let c=0;c<l.length;++c)o.length<20&&l[c]<t&&(o+=e.charAt(l[c]%62))}return o}}function Je(i,e){return i<e?-1:i>e?1:0}function Nf(i,e){const t=Math.min(i.length,e.length);for(let o=0;o<t;o++){const l=i.charAt(o),c=e.charAt(o);if(l!==c)return yf(l)===yf(c)?Je(l,c):yf(l)?1:-1}return Je(i.length,e.length)}const iP=55296,sP=57343;function yf(i){const e=i.charCodeAt(0);return e>=iP&&e<=sP}function wl(i,e,t){return i.length===e.length&&i.every(((o,l)=>t(o,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="__name__";class Ni{constructor(e,t,o){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&be(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let l=0;l<o;l++){const c=Ni.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return Je(e.length,t.length)}static compareSegments(e,t){const o=Ni.isNumericId(e),l=Ni.isNumericId(t);return o&&!l?-1:!o&&l?1:o&&l?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):Nf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Io.fromString(e.substring(4,e.length-2))}}class wt extends Ni{construct(e,t,o){return new wt(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new me(te.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((l=>l.length>0)))}return new wt(t)}static emptyPath(){return new wt([])}}const oP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Ni{construct(e,t,o){return new dn(e,t,o)}static isValidIdentifier(e){return oP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===y_}static keyField(){return new dn([y_])}static fromServerFormat(e){const t=[];let o="",l=0;const c=()=>{if(o.length===0)throw new me(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let p=!1;for(;l<e.length;){const v=e[l];if(v==="\\"){if(l+1===e.length)throw new me(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[l+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new me(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=E,l+=2}else v==="`"?(p=!p,l++):v!=="."||p?(o+=v,l++):(c(),l++)}if(c(),p)throw new me(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(t)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(wt.fromString(e))}static fromName(e){return new Ce(wt.fromString(e).popFirst(5))}static empty(){return new Ce(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new wt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(i,e,t){if(!t)throw new me(te.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function aP(i,e,t,o){if(e===!0&&o===!0)throw new me(te.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function v_(i){if(!Ce.isDocumentKey(i))throw new me(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function w_(i){if(Ce.isDocumentKey(i))throw new me(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function vv(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Oh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":be(12329,{type:typeof i})}function Es(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new me(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Oh(i);throw new me(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(i,e){const t={typeString:i};return e&&(t.value=e),t}function zu(i,e){if(!vv(i))throw new me(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const l=e[o].typeString,c="value"in e[o]?{value:e[o].value}:void 0;if(!(o in i)){t=`JSON missing required field: '${o}'`;break}const p=i[o];if(l&&typeof p!==l){t=`JSON field '${o}' must be a ${l}.`;break}if(c!==void 0&&p!==c.value){t=`Expected '${o}' field to equal '${c.value}'`;break}}if(t)throw new me(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=-62135596800,T_=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*T_);return new It(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<E_)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/T_}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zu(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-E_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:Wt("string",It._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new It(0,0))}static max(){return new Ue(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=-1;function lP(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,l=Ue.fromTimestamp(o===1e9?new It(t+1,0):new It(t,o));return new Ao(l,Ce.empty(),e)}function uP(i){return new Ao(i.readTime,i.key,Cu)}class Ao{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Ao(Ue.min(),Ce.empty(),Cu)}static max(){return new Ao(Ue.max(),Ce.empty(),Cu)}}function cP(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(i.documentKey,e.documentKey),t!==0?t:Je(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(i){if(i.code!==te.FAILED_PRECONDITION||i.message!==hP)throw i;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((o,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(o,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,o)=>{t(e)}))}static reject(e){return new re(((t,o)=>{o(e)}))}static waitFor(e){return new re(((t,o)=>{let l=0,c=0,p=!1;e.forEach((v=>{++l,v.next((()=>{++c,p&&c===l&&t()}),(E=>o(E)))})),p=!0,c===l&&t()}))}static or(e){let t=re.resolve(!1);for(const o of e)t=t.next((l=>l?re.resolve(l):o()));return t}static forEach(e,t){const o=[];return e.forEach(((l,c)=>{o.push(t.call(this,l,c))})),this.waitFor(o)}static mapArray(e,t){return new re(((o,l)=>{const c=e.length,p=new Array(c);let v=0;for(let E=0;E<c;E++){const I=E;t(e[I]).next((C=>{p[I]=C,++v,v===c&&o(p)}),(C=>l(C)))}}))}static doWhile(e,t){return new re(((o,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):o()};c()}))}}function fP(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ll(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=-1;function Mh(i){return i==null}function mh(i){return i===0&&1/i==-1/0}function pP(i){return typeof i=="number"&&Number.isInteger(i)&&!mh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="";function mP(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=I_(e)),e=gP(i.get(t),e);return I_(e)}function gP(i,e){let t=e;const o=i.length;for(let l=0;l<o;l++){const c=i.charAt(l);switch(c){case"\0":t+="";break;case wv:t+="";break;default:t+=c}}return t}function I_(i){return i+wv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Oo(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ev(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){this.comparator=e,this.root=t||hn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const l=this.comparator(e,o.key);if(l===0)return t+o.left.size;l<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gc(this.root,e,this.comparator,!0)}}class Gc{constructor(e,t,o,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?o(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,t,o,l,c){this.key=e,this.value=t,this.color=o??hn.RED,this.left=l??hn.EMPTY,this.right=c??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,l,c){return new hn(e??this.key,t??this.value,o??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let l=this;const c=o(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,o),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,o)),l.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return hn.EMPTY;o=l.right.min(),l=l.copy(o.key,o.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,o,l,c){return this}insert(e,t,o){return new hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const l=o.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P_(this.data.getIterator())}getIteratorFrom(e){return new P_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=o.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yt(this.comparator);return t.data=e,t}}class P_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new cr([])}unionWith(e){let t=new Yt(dn.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wl(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Tv("Invalid base64 string: "+c):c}})(e);return new fn(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let p=0;p<l.length;++p)c+=String.fromCharCode(l[p]);return c})(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let l=0;l<t.length;l++)o[l]=t.charCodeAt(l);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const _P=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Co(i){if(mt(!!i,39018),typeof i=="string"){let e=0;const t=_P.exec(i);if(mt(!!t,46558,{timestamp:i}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:bt(i.seconds),nanos:bt(i.nanos)}}function bt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ro(i){return typeof i=="string"?fn.fromBase64String(i):fn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="server_timestamp",Sv="__type__",Pv="__previous_value__",Av="__local_write_time__";function mp(i){var t,o;return((o=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[Sv])==null?void 0:o.stringValue)===Iv}function bh(i){const e=i.mapValue.fields[Pv];return mp(e)?bh(e):e}function Ru(i){const e=Co(i.mapValue.fields[Av].timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t,o,l,c,p,v,E,I,C,k){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=l,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=v,this.longPollingOptions=E,this.useFetchStreams=I,this.isUsingEmulator=C,this.apiKey=k}}const gh="(default)";class ku{constructor(e,t){this.projectId=e,this.database=t||gh}static empty(){return new ku("","")}get isDefaultDatabase(){return this.database===gh}isEqual(e){return e instanceof ku&&e.projectId===this.projectId&&e.database===this.database}}function vP(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new me(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ku(i.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="__type__",wP="__max__",Zc={mapValue:{}},Rv="__vector__",_h="value";function ko(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?mp(i)?4:TP(i)?9007199254740991:EP(i)?10:11:be(28295,{value:i})}function Fi(i,e){if(i===e)return!0;const t=ko(i);if(t!==ko(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ru(i).isEqual(Ru(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const p=Co(l.timestampValue),v=Co(c.timestampValue);return p.seconds===v.seconds&&p.nanos===v.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(l,c){return Ro(l.bytesValue).isEqual(Ro(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(l,c){return bt(l.geoPointValue.latitude)===bt(c.geoPointValue.latitude)&&bt(l.geoPointValue.longitude)===bt(c.geoPointValue.longitude)})(i,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return bt(l.integerValue)===bt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const p=bt(l.doubleValue),v=bt(c.doubleValue);return p===v?mh(p)===mh(v):isNaN(p)&&isNaN(v)}return!1})(i,e);case 9:return wl(i.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return(function(l,c){const p=l.mapValue.fields||{},v=c.mapValue.fields||{};if(S_(p)!==S_(v))return!1;for(const E in p)if(p.hasOwnProperty(E)&&(v[E]===void 0||!Fi(p[E],v[E])))return!1;return!0})(i,e);default:return be(52216,{left:i})}}function xu(i,e){return(i.values||[]).find((t=>Fi(t,e)))!==void 0}function El(i,e){if(i===e)return 0;const t=ko(i),o=ko(e);if(t!==o)return Je(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(i.booleanValue,e.booleanValue);case 2:return(function(c,p){const v=bt(c.integerValue||c.doubleValue),E=bt(p.integerValue||p.doubleValue);return v<E?-1:v>E?1:v===E?0:isNaN(v)?isNaN(E)?0:-1:1})(i,e);case 3:return A_(i.timestampValue,e.timestampValue);case 4:return A_(Ru(i),Ru(e));case 5:return Nf(i.stringValue,e.stringValue);case 6:return(function(c,p){const v=Ro(c),E=Ro(p);return v.compareTo(E)})(i.bytesValue,e.bytesValue);case 7:return(function(c,p){const v=c.split("/"),E=p.split("/");for(let I=0;I<v.length&&I<E.length;I++){const C=Je(v[I],E[I]);if(C!==0)return C}return Je(v.length,E.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,p){const v=Je(bt(c.latitude),bt(p.latitude));return v!==0?v:Je(bt(c.longitude),bt(p.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return C_(i.arrayValue,e.arrayValue);case 10:return(function(c,p){var R,Z,ee,Y;const v=c.fields||{},E=p.fields||{},I=(R=v[_h])==null?void 0:R.arrayValue,C=(Z=E[_h])==null?void 0:Z.arrayValue,k=Je(((ee=I==null?void 0:I.values)==null?void 0:ee.length)||0,((Y=C==null?void 0:C.values)==null?void 0:Y.length)||0);return k!==0?k:C_(I,C)})(i.mapValue,e.mapValue);case 11:return(function(c,p){if(c===Zc.mapValue&&p===Zc.mapValue)return 0;if(c===Zc.mapValue)return 1;if(p===Zc.mapValue)return-1;const v=c.fields||{},E=Object.keys(v),I=p.fields||{},C=Object.keys(I);E.sort(),C.sort();for(let k=0;k<E.length&&k<C.length;++k){const R=Nf(E[k],C[k]);if(R!==0)return R;const Z=El(v[E[k]],I[C[k]]);if(Z!==0)return Z}return Je(E.length,C.length)})(i.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function A_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Je(i,e);const t=Co(i),o=Co(e),l=Je(t.seconds,o.seconds);return l!==0?l:Je(t.nanos,o.nanos)}function C_(i,e){const t=i.values||[],o=e.values||[];for(let l=0;l<t.length&&l<o.length;++l){const c=El(t[l],o[l]);if(c)return c}return Je(t.length,o.length)}function Tl(i){return Of(i)}function Of(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const o=Co(t);return`time(${o.seconds},${o.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Ro(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return Ce.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let o="[",l=!0;for(const c of t.values||[])l?l=!1:o+=",",o+=Of(c);return o+"]"})(i.arrayValue):"mapValue"in i?(function(t){const o=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const p of o)c?c=!1:l+=",",l+=`${p}:${Of(t.fields[p])}`;return l+"}"})(i.mapValue):be(61005,{value:i})}function th(i){switch(ko(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bh(i);return e?16+th(e):16;case 5:return 2*i.stringValue.length;case 6:return Ro(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((l,c)=>l+th(c)),0)})(i.arrayValue);case 10:case 11:return(function(o){let l=0;return Oo(o.fields,((c,p)=>{l+=c.length+th(p)})),l})(i.mapValue);default:throw be(13486,{value:i})}}function R_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Df(i){return!!i&&"integerValue"in i}function gp(i){return!!i&&"arrayValue"in i}function k_(i){return!!i&&"nullValue"in i}function x_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function nh(i){return!!i&&"mapValue"in i}function EP(i){var t,o;return((o=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[Cv])==null?void 0:o.stringValue)===Rv}function vu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Oo(i.mapValue.fields,((t,o)=>e.mapValue.fields[t]=vu(o))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vu(i.arrayValue.values[t]);return e}return{...i}}function TP(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===wP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(t)}setAll(e){let t=dn.emptyPath(),o={},l=[];e.forEach(((p,v)=>{if(!t.isImmediateParentOf(v)){const E=this.getFieldsMap(t);this.applyChanges(E,o,l),o={},l=[],t=v.popLast()}p?o[v.lastSegment()]=vu(p):l.push(v.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,o,l)}delete(e){const t=this.field(e.popLast());nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let l=t.mapValue.fields[e.get(o)];nh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,o){Oo(t,((l,c)=>e[l]=c));for(const l of o)delete e[l]}clone(){return new Xn(vu(this.value))}}function kv(i){const e=[];return Oo(i.fields,((t,o)=>{const l=new dn([t]);if(nh(o)){const c=kv(o.mapValue).fields;if(c.length===0)e.push(l);else for(const p of c)e.push(l.child(p))}else e.push(l)})),new cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t,o,l,c,p,v){this.key=e,this.documentType=t,this.version=o,this.readTime=l,this.createTime=c,this.data=p,this.documentState=v}static newInvalidDocument(e){return new An(e,0,Ue.min(),Ue.min(),Ue.min(),Xn.empty(),0)}static newFoundDocument(e,t,o,l){return new An(e,1,t,Ue.min(),o,l,0)}static newNoDocument(e,t){return new An(e,2,t,Ue.min(),Ue.min(),Xn.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,Ue.min(),Ue.min(),Xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t){this.position=e,this.inclusive=t}}function L_(i,e,t){let o=0;for(let l=0;l<i.position.length;l++){const c=e[l],p=i.position[l];if(c.field.isKeyField()?o=Ce.comparator(Ce.fromName(p.referenceValue),t.key):o=El(p,t.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function N_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Fi(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function IP(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{}class Ht extends xv{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new PP(e,t,o):t==="array-contains"?new RP(e,o):t==="in"?new kP(e,o):t==="not-in"?new xP(e,o):t==="array-contains-any"?new LP(e,o):new Ht(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new AP(e,o):new CP(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(El(t,this.value)):t!==null&&ko(this.value)===ko(t)&&this.matchesComparison(El(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends xv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new si(e,t)}matches(e){return Lv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Lv(i){return i.op==="and"}function Nv(i){return SP(i)&&Lv(i)}function SP(i){for(const e of i.filters)if(e instanceof si)return!1;return!0}function Mf(i){if(i instanceof Ht)return i.field.canonicalString()+i.op.toString()+Tl(i.value);if(Nv(i))return i.filters.map((e=>Mf(e))).join(",");{const e=i.filters.map((t=>Mf(t))).join(",");return`${i.op}(${e})`}}function Ov(i,e){return i instanceof Ht?(function(o,l){return l instanceof Ht&&o.op===l.op&&o.field.isEqual(l.field)&&Fi(o.value,l.value)})(i,e):i instanceof si?(function(o,l){return l instanceof si&&o.op===l.op&&o.filters.length===l.filters.length?o.filters.reduce(((c,p,v)=>c&&Ov(p,l.filters[v])),!0):!1})(i,e):void be(19439)}function Dv(i){return i instanceof Ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${Tl(t.value)}`})(i):i instanceof si?(function(t){return t.op.toString()+" {"+t.getFilters().map(Dv).join(" ,")+"}"})(i):"Filter"}class PP extends Ht{constructor(e,t,o){super(e,t,o),this.key=Ce.fromName(o.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class AP extends Ht{constructor(e,t){super(e,"in",t),this.keys=Mv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class CP extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=Mv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mv(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>Ce.fromName(o.referenceValue)))}class RP extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gp(t)&&xu(t.arrayValue,this.value)}}class kP extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}}class xP extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}}class LP extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>xu(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t=null,o=[],l=[],c=null,p=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=l,this.limit=c,this.startAt=p,this.endAt=v,this.Te=null}}function O_(i,e=null,t=[],o=[],l=null,c=null,p=null){return new NP(i,e,t,o,l,c,p)}function _p(i){const e=je(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>Mf(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(c){return c.field.canonicalString()+c.dir})(o))).join(","),Mh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>Tl(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>Tl(o))).join(",")),e.Te=t}return e.Te}function yp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!IP(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Ov(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!N_(i.startAt,e.startAt)&&N_(i.endAt,e.endAt)}function bf(i){return Ce.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t=null,o=[],l=[],c=null,p="F",v=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=l,this.limit=c,this.limitType=p,this.startAt=v,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function OP(i,e,t,o,l,c,p,v){return new Nl(i,e,t,o,l,c,p,v)}function vp(i){return new Nl(i)}function D_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function DP(i){return Ce.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function bv(i){return i.collectionGroup!==null}function wu(i){const e=je(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let v=new Yt(dn.comparator);return p.filters.forEach((E=>{E.getFlattenedFilters().forEach((I=>{I.isInequality()&&(v=v.add(I.field))}))})),v})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Lu(c,o))})),t.has(dn.keyField().canonicalString())||e.Ie.push(new Lu(dn.keyField(),o))}return e.Ie}function Di(i){const e=je(i);return e.Ee||(e.Ee=MP(e,wu(i))),e.Ee}function MP(i,e){if(i.limitType==="F")return O_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Lu(l.field,c)}));const t=i.endAt?new yh(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new yh(i.startAt.position,i.startAt.inclusive):null;return O_(i.path,i.collectionGroup,e,i.filters,i.limit,t,o)}}function Vf(i,e){const t=i.filters.concat([e]);return new Nl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function bP(i,e){const t=i.explicitOrderBy.concat([e]);return new Nl(i.path,i.collectionGroup,t,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function Ff(i,e,t){return new Nl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Vh(i,e){return yp(Di(i),Di(e))&&i.limitType===e.limitType}function Vv(i){return`${_p(Di(i))}|lt:${i.limitType}`}function ul(i){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((l=>Dv(l))).join(", ")}]`),Mh(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((l=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(l))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((l=>Tl(l))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((l=>Tl(l))).join(",")),`Target(${o})`})(Di(i))}; limitType=${i.limitType})`}function Fh(i,e){return e.isFoundDocument()&&(function(o,l){const c=l.key.path;return o.collectionGroup!==null?l.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):Ce.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)})(i,e)&&(function(o,l){for(const c of wu(o))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(o,l){for(const c of o.filters)if(!c.matches(l))return!1;return!0})(i,e)&&(function(o,l){return!(o.startAt&&!(function(p,v,E){const I=L_(p,v,E);return p.inclusive?I<=0:I<0})(o.startAt,wu(o),l)||o.endAt&&!(function(p,v,E){const I=L_(p,v,E);return p.inclusive?I>=0:I>0})(o.endAt,wu(o),l))})(i,e)}function VP(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Fv(i){return(e,t)=>{let o=!1;for(const l of wu(i)){const c=FP(l,e,t);if(c!==0)return c;o=o||l.field.isKeyField()}return 0}}function FP(i,e,t){const o=i.field.isKeyField()?Ce.comparator(e.key,t.key):(function(c,p,v){const E=p.data.field(c),I=v.data.field(c);return E!==null&&I!==null?El(E,I):be(42886)})(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[l,c]of o)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),l=this.inner[o];if(l===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return o.length===1?delete this.inner[t]:o.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,((t,o)=>{for(const[l,c]of o)e(l,c)}))}isEmpty(){return Ev(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=new Lt(Ce.comparator);function Ps(){return zP}const zv=new Lt(Ce.comparator);function fu(...i){let e=zv;for(const t of i)e=e.insert(t.key,t);return e}function Uv(i){let e=zv;return i.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function pa(){return Eu()}function Bv(){return Eu()}function Eu(){return new Pa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const UP=new Lt(Ce.comparator),BP=new Yt(Ce.comparator);function Xe(...i){let e=BP;for(const t of i)e=e.add(t);return e}const jP=new Yt(Je);function HP(){return jP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function jv(i){return{integerValue:""+i}}function WP(i,e){return pP(e)?jv(e):wp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this._=void 0}}function qP(i,e,t){return i instanceof vh?(function(l,c){const p={fields:{[Sv]:{stringValue:Iv},[Av]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&mp(c)&&(c=bh(c)),c&&(p.fields[Pv]=c),{mapValue:p}})(t,e):i instanceof Nu?Wv(i,e):i instanceof Ou?qv(i,e):(function(l,c){const p=Hv(l,c),v=M_(p)+M_(l.Ae);return Df(p)&&Df(l.Ae)?jv(v):wp(l.serializer,v)})(i,e)}function GP(i,e,t){return i instanceof Nu?Wv(i,e):i instanceof Ou?qv(i,e):t}function Hv(i,e){return i instanceof wh?(function(o){return Df(o)||(function(c){return!!c&&"doubleValue"in c})(o)})(e)?e:{integerValue:0}:null}class vh extends zh{}class Nu extends zh{constructor(e){super(),this.elements=e}}function Wv(i,e){const t=Gv(e);for(const o of i.elements)t.some((l=>Fi(l,o)))||t.push(o);return{arrayValue:{values:t}}}class Ou extends zh{constructor(e){super(),this.elements=e}}function qv(i,e){let t=Gv(e);for(const o of i.elements)t=t.filter((l=>!Fi(l,o)));return{arrayValue:{values:t}}}class wh extends zh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function M_(i){return bt(i.integerValue||i.doubleValue)}function Gv(i){return gp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function ZP(i,e){return i.field.isEqual(e.field)&&(function(o,l){return o instanceof Nu&&l instanceof Nu||o instanceof Ou&&l instanceof Ou?wl(o.elements,l.elements,Fi):o instanceof wh&&l instanceof wh?Fi(o.Ae,l.Ae):o instanceof vh&&l instanceof vh})(i.transform,e.transform)}class KP{constructor(e,t){this.version=e,this.transformResults=t}}class Mi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Uh{}function Zv(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new $v(i.key,Mi.none()):new Uu(i.key,i.data,Mi.none());{const t=i.data,o=Xn.empty();let l=new Yt(dn.comparator);for(let c of e.fields)if(!l.has(c)){let p=t.field(c);p===null&&c.length>1&&(c=c.popLast(),p=t.field(c)),p===null?o.delete(c):o.set(c,p),l=l.add(c)}return new Do(i.key,o,new cr(l.toArray()),Mi.none())}}function $P(i,e,t){i instanceof Uu?(function(l,c,p){const v=l.value.clone(),E=V_(l.fieldTransforms,c,p.transformResults);v.setAll(E),c.convertToFoundDocument(p.version,v).setHasCommittedMutations()})(i,e,t):i instanceof Do?(function(l,c,p){if(!rh(l.precondition,c))return void c.convertToUnknownDocument(p.version);const v=V_(l.fieldTransforms,c,p.transformResults),E=c.data;E.setAll(Kv(l)),E.setAll(v),c.convertToFoundDocument(p.version,E).setHasCommittedMutations()})(i,e,t):(function(l,c,p){c.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function Tu(i,e,t,o){return i instanceof Uu?(function(c,p,v,E){if(!rh(c.precondition,p))return v;const I=c.value.clone(),C=F_(c.fieldTransforms,E,p);return I.setAll(C),p.convertToFoundDocument(p.version,I).setHasLocalMutations(),null})(i,e,t,o):i instanceof Do?(function(c,p,v,E){if(!rh(c.precondition,p))return v;const I=F_(c.fieldTransforms,E,p),C=p.data;return C.setAll(Kv(c)),C.setAll(I),p.convertToFoundDocument(p.version,C).setHasLocalMutations(),v===null?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((k=>k.field)))})(i,e,t,o):(function(c,p,v){return rh(c.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):v})(i,e,t)}function QP(i,e){let t=null;for(const o of i.fieldTransforms){const l=e.data.field(o.field),c=Hv(o.transform,l||null);c!=null&&(t===null&&(t=Xn.empty()),t.set(o.field,c))}return t||null}function b_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(o,l){return o===void 0&&l===void 0||!(!o||!l)&&wl(o,l,((c,p)=>ZP(c,p)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Uu extends Uh{constructor(e,t,o,l=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Do extends Uh{constructor(e,t,o,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Kv(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}})),e}function V_(i,e,t){const o=new Map;mt(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let l=0;l<t.length;l++){const c=i[l],p=c.transform,v=e.data.field(c.field);o.set(c.field,GP(p,v,t[l]))}return o}function F_(i,e,t){const o=new Map;for(const l of i){const c=l.transform,p=t.data.field(l.field);o.set(l.field,qP(c,p,e))}return o}class $v extends Uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YP extends Uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t,o,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=l}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&$P(c,e,o[l])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Tu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Tu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Bv();return this.mutations.forEach((l=>{const c=e.get(l.key),p=c.overlayedDocument;let v=this.applyToLocalView(p,c.mutatedFields);v=t.has(l.key)?null:v;const E=Zv(p,v);E!==null&&o.set(l.key,E),p.isValidDocument()||p.convertToNoDocument(Ue.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,((t,o)=>b_(t,o)))&&wl(this.baseMutations,e.baseMutations,((t,o)=>b_(t,o)))}}class Ep{constructor(e,t,o,l){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=l}static from(e,t,o){mt(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let l=(function(){return UP})();const c=e.mutations;for(let p=0;p<c.length;p++)l=l.insert(c[p].key,o[p].version);return new Ep(e,t,o,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,it;function t1(i){switch(i){case te.OK:return be(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return be(15467,{code:i})}}function Qv(i){if(i===void 0)return Ss("GRPC error has no .code"),te.UNKNOWN;switch(i){case jt.OK:return te.OK;case jt.CANCELLED:return te.CANCELLED;case jt.UNKNOWN:return te.UNKNOWN;case jt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case jt.INTERNAL:return te.INTERNAL;case jt.UNAVAILABLE:return te.UNAVAILABLE;case jt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case jt.NOT_FOUND:return te.NOT_FOUND;case jt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case jt.ABORTED:return te.ABORTED;case jt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case jt.DATA_LOSS:return te.DATA_LOSS;default:return be(39323,{code:i})}}(it=jt||(jt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Io([4294967295,4294967295],0);function z_(i){const e=n1().encode(i),t=new cv;return t.update(e),new Uint8Array(t.digest())}function U_(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Io([t,o],0),new Io([l,c],0)]}class Tp{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new pu(`Invalid padding: ${t}`);if(o<0)throw new pu(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new pu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Io.fromNumber(this.ge)}ye(e,t,o){let l=e.add(t.multiply(Io.fromNumber(o)));return l.compare(r1)===1&&(l=new Io([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=z_(e),[o,l]=U_(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,l,c);if(!this.we(p))return!1}return!0}static create(e,t,o){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new Tp(c,l,t);return o.forEach((v=>p.insert(v))),p}insert(e){if(this.ge===0)return;const t=z_(e),[o,l]=U_(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,l,c);this.be(p)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t,o,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const l=new Map;return l.set(e,Bu.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Bh(Ue.min(),l,new Lt(Je),Ps(),Xe())}}class Bu{constructor(e,t,o,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Bu(o,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,o,l){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=l}}class Yv{constructor(e,t){this.targetId=e,this.Ce=t}}class Jv{constructor(e,t,o=fn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=l}}class B_{constructor(){this.ve=0,this.Fe=j_(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),t=Xe(),o=Xe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:o=o.add(l);break;default:be(38017,{changeType:c})}})),new Bu(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=j_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class i1{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ps(),this.He=Kc(),this.Je=Kc(),this.Ze=new Lt(Je)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,o=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(bf(c))if(o===0){const p=new Ce(c.path);this.et(t,p,An.newNoDocument(p,Ue.min()))}else mt(o===1,20013,{expectedCount:o});else{const p=this._t(t);if(p!==o){const v=this.ut(e),E=v?this.ct(v,e,p):1;if(E!==0){this.it(t);const I=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,I)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:l=0},hashCount:c=0}=t;let p,v;try{p=Ro(o).toUint8Array()}catch(E){if(E instanceof Tv)return vl("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{v=new Tp(p,l,c)}catch(E){return vl(E instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return v.ge===0?null:v}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let l=0;return o.forEach((c=>{const p=this.Ge.ht(),v=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;e.mightContain(v)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,p)=>{const v=this.ot(p);if(v){if(c.current&&bf(v.target)){const E=new Ce(v.target.path);this.It(E).has(p)||this.Et(p,E)||this.et(p,E,An.newNoDocument(E,e))}c.Be&&(t.set(p,c.ke()),c.Ke())}}));let o=Xe();this.Je.forEach(((c,p)=>{let v=!0;p.forEachWhile((E=>{const I=this.ot(E);return!I||I.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(o=o.add(c))})),this.je.forEach(((c,p)=>p.setReadTime(e)));const l=new Bh(e,t,this.Ze,this.je,o);return this.je=Ps(),this.He=Kc(),this.Je=Kc(),this.Ze=new Lt(Je),l}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.qe(t,1):l.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new B_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Yt(Je),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Yt(Je),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new B_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new Lt(Ce.comparator)}function j_(){return new Lt(Ce.comparator)}const s1={asc:"ASCENDING",desc:"DESCENDING"},o1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a1={and:"AND",or:"OR"};class l1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zf(i,e){return i.useProto3Json||Mh(e)?e:{value:e}}function Eh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xv(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function u1(i,e){return Eh(i,e.toTimestamp())}function bi(i){return mt(!!i,49232),Ue.fromTimestamp((function(t){const o=Co(t);return new It(o.seconds,o.nanos)})(i))}function Ip(i,e){return Uf(i,e).canonicalString()}function Uf(i,e){const t=(function(l){return new wt(["projects",l.projectId,"databases",l.database])})(i).child("documents");return e===void 0?t:t.child(e)}function ew(i){const e=wt.fromString(i);return mt(sw(e),10190,{key:e.toString()}),e}function Bf(i,e){return Ip(i.databaseId,e.path)}function vf(i,e){const t=ew(e);if(t.get(1)!==i.databaseId.projectId)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ce(nw(t))}function tw(i,e){return Ip(i.databaseId,e)}function c1(i){const e=ew(i);return e.length===4?wt.emptyPath():nw(e)}function jf(i){return new wt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function nw(i){return mt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function H_(i,e,t){return{name:Bf(i,e),fields:t.value.mapValue.fields}}function h1(i,e){let t;if("targetChange"in e){e.targetChange;const o=(function(I){return I==="NO_CHANGE"?0:I==="ADD"?1:I==="REMOVE"?2:I==="CURRENT"?3:I==="RESET"?4:be(39313,{state:I})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(I,C){return I.useProto3Json?(mt(C===void 0||typeof C=="string",58123),fn.fromBase64String(C||"")):(mt(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),fn.fromUint8Array(C||new Uint8Array))})(i,e.targetChange.resumeToken),p=e.targetChange.cause,v=p&&(function(I){const C=I.code===void 0?te.UNKNOWN:Qv(I.code);return new me(C,I.message||"")})(p);t=new Jv(o,l,c,v||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const l=vf(i,o.document.name),c=bi(o.document.updateTime),p=o.document.createTime?bi(o.document.createTime):Ue.min(),v=new Xn({mapValue:{fields:o.document.fields}}),E=An.newFoundDocument(l,c,p,v),I=o.targetIds||[],C=o.removedTargetIds||[];t=new ih(I,C,E.key,E)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const l=vf(i,o.document),c=o.readTime?bi(o.readTime):Ue.min(),p=An.newNoDocument(l,c),v=o.removedTargetIds||[];t=new ih([],v,p.key,p)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const l=vf(i,o.document),c=o.removedTargetIds||[];t=new ih([],c,l,null)}else{if(!("filter"in e))return be(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:l=0,unchangedNames:c}=o,p=new e1(l,c),v=o.targetId;t=new Yv(v,p)}}return t}function d1(i,e){let t;if(e instanceof Uu)t={update:H_(i,e.key,e.value)};else if(e instanceof $v)t={delete:Bf(i,e.key)};else if(e instanceof Do)t={update:H_(i,e.key,e.data),updateMask:E1(e.fieldMask)};else{if(!(e instanceof YP))return be(16599,{dt:e.type});t={verify:Bf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(c,p){const v=p.transform;if(v instanceof vh)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Nu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Ou)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof wh)return{fieldPath:p.field.canonicalString(),increment:v.Ae};throw be(20930,{transform:p.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:u1(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:be(27497)})(i,e.precondition)),t}function f1(i,e){return i&&i.length>0?(mt(e!==void 0,14353),i.map((t=>(function(l,c){let p=l.updateTime?bi(l.updateTime):bi(c);return p.isEqual(Ue.min())&&(p=bi(c)),new KP(p,l.transformResults||[])})(t,e)))):[]}function p1(i,e){return{documents:[tw(i,e.path)]}}function m1(i,e){const t={structuredQuery:{}},o=e.path;let l;e.collectionGroup!==null?(l=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=tw(i,l);const c=(function(I){if(I.length!==0)return iw(si.create(I,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const p=(function(I){if(I.length!==0)return I.map((C=>(function(R){return{field:cl(R.field),direction:y1(R.dir)}})(C)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const v=zf(i,e.limit);return v!==null&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt=(function(I){return{before:I.inclusive,values:I.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(I){return{before:!I.inclusive,values:I.position}})(e.endAt)),{ft:t,parent:l}}function g1(i){let e=c1(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let l=null;if(o>0){mt(o===1,65062);const C=t.from[0];C.allDescendants?l=C.collectionId:e=e.child(C.collectionId)}let c=[];t.where&&(c=(function(k){const R=rw(k);return R instanceof si&&Nv(R)?R.getFilters():[R]})(t.where));let p=[];t.orderBy&&(p=(function(k){return k.map((R=>(function(ee){return new Lu(hl(ee.field),(function(le){switch(le){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(R)))})(t.orderBy));let v=null;t.limit&&(v=(function(k){let R;return R=typeof k=="object"?k.value:k,Mh(R)?null:R})(t.limit));let E=null;t.startAt&&(E=(function(k){const R=!!k.before,Z=k.values||[];return new yh(Z,R)})(t.startAt));let I=null;return t.endAt&&(I=(function(k){const R=!k.before,Z=k.values||[];return new yh(Z,R)})(t.endAt)),OP(e,l,p,c,v,"F",E,I)}function _1(i,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rw(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=hl(t.unaryFilter.field);return Ht.create(o,"==",{doubleValue:NaN});case"IS_NULL":const l=hl(t.unaryFilter.field);return Ht.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=hl(t.unaryFilter.field);return Ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=hl(t.unaryFilter.field);return Ht.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Ht.create(hl(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return si.create(t.compositeFilter.filters.map((o=>rw(o))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(i):be(30097,{filter:i})}function y1(i){return s1[i]}function v1(i){return o1[i]}function w1(i){return a1[i]}function cl(i){return{fieldPath:i.canonicalString()}}function hl(i){return dn.fromServerFormat(i.fieldPath)}function iw(i){return i instanceof Ht?(function(t){if(t.op==="=="){if(x_(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NAN"}};if(k_(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(x_(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NOT_NAN"}};if(k_(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(t.field),op:v1(t.op),value:t.value}}})(i):i instanceof si?(function(t){const o=t.getFilters().map((l=>iw(l)));return o.length===1?o[0]:{compositeFilter:{op:w1(t.op),filters:o}}})(i):be(54877,{filter:i})}function E1(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function ow(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,t,o,l,c=Ue.min(),p=Ue.min(),v=fn.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=v,this.expectedCount=E}withSequenceNumber(e){return new yo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.yt=e}}function I1(i){const e=g1({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Ff(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.Sn=new P1}addToCollectionParentIndex(e,t){return this.Sn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Ao.min())}updateCollectionGroup(e,t,o){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class P1{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),l=this.index[t]||new Yt(wt.comparator),c=!l.has(o);return this.index[t]=l.add(o),c}has(e){const t=e.lastSegment(),o=e.popLast(),l=this.index[t];return l&&l.has(o)}getEntries(e){return(this.index[e]||new Yt(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aw=41943040;class Jn{static withCacheSize(e){return new Jn(e,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(aw,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Il(0)}static ar(){return new Il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="LruGarbageCollector",A1=1048576;function G_([i,e],[t,o]){const l=Je(i,t);return l===0?Je(e,o):l}class C1{constructor(e){this.Pr=e,this.buffer=new Yt(G_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();G_(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class R1{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){_e(q_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ll(t)?_e(q_,"Ignoring IndexedDB error during garbage collection: ",t):await xl(t)}await this.Ar(3e5)}))}}class k1{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Dh.ce);const o=new C1(t);return this.Vr.forEachTarget(e,(l=>o.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>o.Er(l))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(W_)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,l,c,p,v,E,I;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),l=this.params.maximumSequenceNumbersToCollect):l=k,p=Date.now(),this.nthSequenceNumber(e,l)))).next((k=>(o=k,v=Date.now(),this.removeTargets(e,o,t)))).next((k=>(c=k,E=Date.now(),this.removeOrphanedDocuments(e,o)))).next((k=>(I=Date.now(),ll()<=Ye.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-C}ms
	Determined least recently used ${l} in `+(v-p)+`ms
	Removed ${c} targets in `+(E-v)+`ms
	Removed ${k} documents in `+(I-E)+`ms
Total Duration: ${I-C}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:k}))))}}function x1(i,e){return new k1(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.changes=new Pa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?re.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,t,o,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=l}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(o=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(o!==null&&Tu(o.mutation,l,cr.empty(),It.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,Xe()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=Xe()){const l=pa();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,o).next((c=>{let p=fu();return c.forEach(((v,E)=>{p=p.insert(v,E.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const o=pa();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,Xe())))}populateOverlays(e,t,o){const l=[];return o.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((p,v)=>{t.set(p,v)}))}))}computeViews(e,t,o,l){let c=Ps();const p=Eu(),v=(function(){return Eu()})();return t.forEach(((E,I)=>{const C=o.get(I.key);l.has(I.key)&&(C===void 0||C.mutation instanceof Do)?c=c.insert(I.key,I):C!==void 0?(p.set(I.key,C.mutation.getFieldMask()),Tu(C.mutation,I,C.mutation.getFieldMask(),It.now())):p.set(I.key,cr.empty())})),this.recalculateAndSaveOverlays(e,c).next((E=>(E.forEach(((I,C)=>p.set(I,C))),t.forEach(((I,C)=>v.set(I,new N1(C,p.get(I)??null)))),v)))}recalculateAndSaveOverlays(e,t){const o=Eu();let l=new Lt(((p,v)=>p-v)),c=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const v of p)v.keys().forEach((E=>{const I=t.get(E);if(I===null)return;let C=o.get(E)||cr.empty();C=v.applyToLocalView(I,C),o.set(E,C);const k=(l.get(v.batchId)||Xe()).add(E);l=l.insert(v.batchId,k)}))})).next((()=>{const p=[],v=l.getReverseIterator();for(;v.hasNext();){const E=v.getNext(),I=E.key,C=E.value,k=Bv();C.forEach((R=>{if(!c.has(R)){const Z=Zv(t.get(R),o.get(R));Z!==null&&k.set(R,Z),c=c.add(R)}})),p.push(this.documentOverlayCache.saveOverlays(e,I,k))}return re.waitFor(p)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,l){return DP(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,l):this.getDocumentsMatchingCollectionQuery(e,t,o,l)}getNextDocuments(e,t,o,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,l).next((c=>{const p=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,l-c.size):re.resolve(pa());let v=Cu,E=c;return p.next((I=>re.forEach(I,((C,k)=>(v<k.largestBatchId&&(v=k.largestBatchId),c.get(C)?re.resolve():this.remoteDocumentCache.getEntry(e,C).next((R=>{E=E.insert(C,R)}))))).next((()=>this.populateOverlays(e,I,c))).next((()=>this.computeViews(e,E,I,Xe()))).next((C=>({batchId:v,changes:Uv(C)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((o=>{let l=fu();return o.isFoundDocument()&&(l=l.insert(o.key,o)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,l){const c=t.collectionGroup;let p=fu();return this.indexManager.getCollectionParents(e,c).next((v=>re.forEach(v,(E=>{const I=(function(k,R){return new Nl(R,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,E.child(c));return this.getDocumentsMatchingCollectionQuery(e,I,o,l).next((C=>{C.forEach(((k,R)=>{p=p.insert(k,R)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,o,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,c,l)))).next((p=>{c.forEach(((E,I)=>{const C=I.getKey();p.get(C)===null&&(p=p.insert(C,An.newInvalidDocument(C)))}));let v=fu();return p.forEach(((E,I)=>{const C=c.get(E);C!==void 0&&Tu(C.mutation,I,cr.empty(),It.now()),Fh(t,I)&&(v=v.insert(E,I))})),v}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return re.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:bi(l.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(l){return{name:l.name,query:I1(l.bundledQuery),readTime:bi(l.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.overlays=new Lt(Ce.comparator),this.Lr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const o=pa();return re.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&o.set(l,c)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((l,c)=>{this.bt(e,t,c)})),re.resolve()}removeOverlaysForBatchId(e,t,o){const l=this.Lr.get(o);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(o)),re.resolve()}getOverlaysForCollection(e,t,o){const l=pa(),c=t.length+1,p=new Ce(t.child("")),v=this.overlays.getIteratorFrom(p);for(;v.hasNext();){const E=v.getNext().value,I=E.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===c&&E.largestBatchId>o&&l.set(E.getKey(),E)}return re.resolve(l)}getOverlaysForCollectionGroup(e,t,o,l){let c=new Lt(((I,C)=>I-C));const p=this.overlays.getIterator();for(;p.hasNext();){const I=p.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>o){let C=c.get(I.largestBatchId);C===null&&(C=pa(),c=c.insert(I.largestBatchId,C)),C.set(I.getKey(),I)}}const v=pa(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((I,C)=>v.set(I,C))),!(v.size()>=l)););return re.resolve(v)}bt(e,t,o){const l=this.overlays.get(o.key);if(l!==null){const p=this.Lr.get(l.largestBatchId).delete(o.key);this.Lr.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(o.key,new XP(t,o));let c=this.Lr.get(t);c===void 0&&(c=Xe(),this.Lr.set(t,c)),this.Lr.set(t,c.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.kr=new Yt(sn.Kr),this.qr=new Yt(sn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new sn(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new sn(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new Ce(new wt([])),o=new sn(t,e),l=new sn(t,e+1),c=[];return this.qr.forEachInRange([o,l],(p=>{this.Wr(p),c.push(p.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ce(new wt([])),o=new sn(t,e),l=new sn(t,e+1);let c=Xe();return this.qr.forEachInRange([o,l],(p=>{c=c.add(p.key)})),c}containsKey(e){const t=new sn(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class sn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ce.comparator(e.key,t.key)||Je(e.Hr,t.Hr)}static Ur(e,t){return Je(e.Hr,t.Hr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Yt(sn.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,l){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new JP(c,t,o,l);this.mutationQueue.push(p);for(const v of l)this.Jr=this.Jr.add(new sn(v.key,c)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return re.resolve(p)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,l=this.Xr(o),c=l<0?0:l;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?pp:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new sn(t,0),l=new sn(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([o,l],(p=>{const v=this.Zr(p.Hr);c.push(v)})),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Yt(Je);return t.forEach((l=>{const c=new sn(l,0),p=new sn(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,p],(v=>{o=o.add(v.Hr)}))})),re.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,l=o.length+1;let c=o;Ce.isDocumentKey(c)||(c=c.child(""));const p=new sn(new Ce(c),0);let v=new Yt(Je);return this.Jr.forEachWhile((E=>{const I=E.key.path;return!!o.isPrefixOf(I)&&(I.length===l&&(v=v.add(E.Hr)),!0)}),p),re.resolve(this.Yr(v))}Yr(e){const t=[];return e.forEach((o=>{const l=this.Zr(o);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){mt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return re.forEach(t.mutations,(l=>{const c=new sn(l.key,t.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new sn(t,0),l=this.Jr.firstAfterOrEqual(o);return re.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.ti=e,this.docs=(function(){return new Lt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,l=this.docs.get(o),c=l?l.size:0,p=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return re.resolve(o?o.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let o=Ps();return t.forEach((l=>{const c=this.docs.get(l);o=o.insert(l,c?c.document.mutableCopy():An.newInvalidDocument(l))})),re.resolve(o)}getDocumentsMatchingQuery(e,t,o,l){let c=Ps();const p=t.path,v=new Ce(p.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(v);for(;E.hasNext();){const{key:I,value:{document:C}}=E.getNext();if(!p.isPrefixOf(I.path))break;I.path.length>p.length+1||cP(uP(C),o)<=0||(l.has(C.key)||Fh(t,C))&&(c=c.insert(C.key,C.mutableCopy()))}return re.resolve(c)}getAllFromCollectionGroup(e,t,o,l){be(9500)}ni(e,t){return re.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new z1(this)}getSize(e){return re.resolve(this.size)}}class z1 extends L1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,l)=>{l.isValidDocument()?t.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(o)})),re.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.persistence=e,this.ri=new Pa((t=>_p(t)),yp),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.ii=0,this.si=new Sp,this.targetCount=0,this.oi=Il._r()}forEachTarget(e,t){return this.ri.forEach(((o,l)=>t(l))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),re.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Il(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.lr(t),re.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,o){let l=0;const c=[];return this.ri.forEach(((p,v)=>{v.sequenceNumber<=t&&o.get(v.targetId)===null&&(this.ri.delete(p),c.push(this.removeMatchingKeysForTargetId(e,v.targetId)),l++)})),re.waitFor(c).next((()=>l))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return re.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),re.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((p=>{c.push(l.markPotentiallyOrphaned(e,p))})),re.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return re.resolve(o)}containsKey(e,t){return re.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this._i={},this.overlays={},this.ai=new Dh(0),this.ui=!1,this.ui=!0,this.ci=new b1,this.referenceDelegate=e(this),this.li=new U1(this),this.indexManager=new S1,this.remoteDocumentCache=(function(l){return new F1(l)})((o=>this.referenceDelegate.hi(o))),this.serializer=new T1(t),this.Pi=new D1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new V1(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){_e("MemoryPersistence","Starting transaction:",e);const l=new B1(this.ai.next());return this.referenceDelegate.Ti(),o(l).next((c=>this.referenceDelegate.Ii(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ei(e,t){return re.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class B1 extends dP{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.Ri=new Sp,this.Ai=null}static Vi(e){return new Pp(e)}get di(){if(this.Ai)return this.Ai;throw be(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),re.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((l=>this.di.add(l.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.di.add(c.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(o=>{const l=Ce.fromPath(o);return this.mi(e,l).next((c=>{c||t.removeEntry(l,Ue.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Th{constructor(e,t){this.persistence=e,this.fi=new Pa((o=>mP(o.path)),((o,l)=>o.isEqual(l))),this.garbageCollector=x1(this,t)}static Vi(e,t){return new Th(e,t)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((l=>o+l))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return re.forEach(this.fi,((o,l)=>this.wr(e,o,l).next((c=>c?re.resolve():t(l)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ni(e,(p=>this.wr(e,p,t).next((v=>{v||(o++,c.removeEntry(p,Ue.min()))})))).next((()=>c.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),re.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=th(e.data.value)),t}wr(e,t,o){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.fi.get(t);return re.resolve(l!==void 0&&l>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t,o,l){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=l}static Es(e,t){let o=Xe(),l=Xe();for(const c of t.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Ap(e,t.fromCache,o,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return mT()?8:fP(Cn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,l){const c={result:null};return this.gs(e,t).next((p=>{c.result=p})).next((()=>{if(!c.result)return this.ps(e,t,l,o).next((p=>{c.result=p}))})).next((()=>{if(c.result)return;const p=new j1;return this.ys(e,t,p).next((v=>{if(c.result=v,this.As)return this.ws(e,t,p,v.size)}))})).next((()=>c.result))}ws(e,t,o,l){return o.documentReadCount<this.Vs?(ll()<=Ye.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",ul(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(ll()<=Ye.DEBUG&&_e("QueryEngine","Query:",ul(t),"scans",o.documentReadCount,"local documents and returns",l,"documents as results."),o.documentReadCount>this.ds*l?(ll()<=Ye.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",ul(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Di(t))):re.resolve())}gs(e,t){if(D_(t))return re.resolve(null);let o=Di(t);return this.indexManager.getIndexType(e,o).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Ff(t,null,"F"),o=Di(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((c=>{const p=Xe(...c);return this.fs.getDocuments(e,p).next((v=>this.indexManager.getMinOffset(e,o).next((E=>{const I=this.bs(t,v);return this.Ss(t,I,p,E.readTime)?this.gs(e,Ff(t,null,"F")):this.Ds(e,I,t,E)}))))})))))}ps(e,t,o,l){return D_(t)||l.isEqual(Ue.min())?re.resolve(null):this.fs.getDocuments(e,o).next((c=>{const p=this.bs(t,c);return this.Ss(t,p,o,l)?re.resolve(null):(ll()<=Ye.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ul(t)),this.Ds(e,p,t,lP(l,Cu)).next((v=>v)))}))}bs(e,t){let o=new Yt(Fv(e));return t.forEach(((l,c)=>{Fh(e,c)&&(o=o.add(c))})),o}Ss(e,t,o,l){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}ys(e,t,o){return ll()<=Ye.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",ul(t)),this.fs.getDocumentsMatchingQuery(e,t,Ao.min(),o)}Ds(e,t,o,l){return this.fs.getDocumentsMatchingQuery(e,o,l).next((c=>(t.forEach((p=>{c=c.insert(p.key,p)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="LocalStore",W1=3e8;class q1{constructor(e,t,o,l){this.persistence=e,this.Cs=t,this.serializer=l,this.vs=new Lt(Je),this.Fs=new Pa((c=>_p(c)),yp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function G1(i,e,t,o){return new q1(i,e,t,o)}async function uw(i,e){const t=je(i);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let l;return t.mutationQueue.getAllMutationBatches(o).next((c=>(l=c,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((c=>{const p=[],v=[];let E=Xe();for(const I of l){p.push(I.batchId);for(const C of I.mutations)E=E.add(C.key)}for(const I of c){v.push(I.batchId);for(const C of I.mutations)E=E.add(C.key)}return t.localDocuments.getDocuments(o,E).next((I=>({Ns:I,removedBatchIds:p,addedBatchIds:v})))}))}))}function Z1(i,e){const t=je(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const l=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(v,E,I,C){const k=I.batch,R=k.keys();let Z=re.resolve();return R.forEach((ee=>{Z=Z.next((()=>C.getEntry(E,ee))).next((Y=>{const le=I.docVersions.get(ee);mt(le!==null,48541),Y.version.compareTo(le)<0&&(k.applyToRemoteDocument(Y,I),Y.isValidDocument()&&(Y.setReadTime(I.commitVersion),C.addEntry(Y)))}))})),Z.next((()=>v.mutationQueue.removeMutationBatch(E,k)))})(t,o,e,c).next((()=>c.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(v){let E=Xe();for(let I=0;I<v.mutationResults.length;++I)v.mutationResults[I].transformResults.length>0&&(E=E.add(v.batch.mutations[I].key));return E})(e)))).next((()=>t.localDocuments.getDocuments(o,l)))}))}function cw(i){const e=je(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function K1(i,e){const t=je(i),o=e.snapshotVersion;let l=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const p=t.xs.newChangeBuffer({trackRemovals:!0});l=t.vs;const v=[];e.targetChanges.forEach(((C,k)=>{const R=l.get(k);if(!R)return;v.push(t.li.removeMatchingKeys(c,C.removedDocuments,k).next((()=>t.li.addMatchingKeys(c,C.addedDocuments,k))));let Z=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(k)!==null?Z=Z.withResumeToken(fn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):C.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(C.resumeToken,o)),l=l.insert(k,Z),(function(Y,le,Ve){return Y.resumeToken.approximateByteSize()===0||le.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=W1?!0:Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0})(R,Z,C)&&v.push(t.li.updateTargetData(c,Z))}));let E=Ps(),I=Xe();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(c,C))})),v.push($1(c,p,e.documentUpdates).next((C=>{E=C.Bs,I=C.Ls}))),!o.isEqual(Ue.min())){const C=t.li.getLastRemoteSnapshotVersion(c).next((k=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,o)));v.push(C)}return re.waitFor(v).next((()=>p.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,E,I))).next((()=>E))})).then((c=>(t.vs=l,c)))}function $1(i,e,t){let o=Xe(),l=Xe();return t.forEach((c=>o=o.add(c))),e.getEntries(i,o).next((c=>{let p=Ps();return t.forEach(((v,E)=>{const I=c.get(v);E.isFoundDocument()!==I.isFoundDocument()&&(l=l.add(v)),E.isNoDocument()&&E.version.isEqual(Ue.min())?(e.removeEntry(v,E.readTime),p=p.insert(v,E)):!I.isValidDocument()||E.version.compareTo(I.version)>0||E.version.compareTo(I.version)===0&&I.hasPendingWrites?(e.addEntry(E),p=p.insert(v,E)):_e(Cp,"Ignoring outdated watch update for ",v,". Current version:",I.version," Watch version:",E.version)})),{Bs:p,Ls:l}}))}function Q1(i,e){const t=je(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=pp),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function Y1(i,e){const t=je(i);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let l;return t.li.getTargetData(o,e).next((c=>c?(l=c,re.resolve(l)):t.li.allocateTargetId(o).next((p=>(l=new yo(e,p,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,l).next((()=>l)))))))})).then((o=>{const l=t.vs.get(o.targetId);return(l===null||o.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function Hf(i,e,t){const o=je(i),l=o.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",c,(p=>o.persistence.referenceDelegate.removeTarget(p,l)))}catch(p){if(!Ll(p))throw p;_e(Cp,`Failed to update sequence numbers for target ${e}: ${p}`)}o.vs=o.vs.remove(e),o.Fs.delete(l.target)}function Z_(i,e,t){const o=je(i);let l=Ue.min(),c=Xe();return o.persistence.runTransaction("Execute query","readwrite",(p=>(function(E,I,C){const k=je(E),R=k.Fs.get(C);return R!==void 0?re.resolve(k.vs.get(R)):k.li.getTargetData(I,C)})(o,p,Di(e)).next((v=>{if(v)return l=v.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(p,v.targetId).next((E=>{c=E}))})).next((()=>o.Cs.getDocumentsMatchingQuery(p,e,t?l:Ue.min(),t?c:Xe()))).next((v=>(J1(o,VP(e),v),{documents:v,ks:c})))))}function J1(i,e,t){let o=i.Ms.get(e)||Ue.min();t.forEach(((l,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)})),i.Ms.set(e,o)}class K_{constructor(){this.activeTargetIds=HP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X1{constructor(){this.vo=new K_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new K_,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="ConnectivityMonitor";class Q_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){_e($_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){_e($_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function Wf(){return $c===null?$c=(function(){return 268435456+Math.round(2147483648*Math.random())})():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="RestConnection",tA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class nA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${l}`,this.$o=this.databaseId.database===gh?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Wo(e,t,o,l,c){const p=Wf(),v=this.Qo(e,t.toUriEncodedString());_e(wf,`Sending RPC '${e}' ${p}:`,v,o);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,l,c);const{host:I}=new URL(v),C=Al(I);return this.zo(e,v,E,o,C).then((k=>(_e(wf,`Received RPC '${e}' ${p}: `,k),k)),(k=>{throw vl(wf,`RPC '${e}' ${p} failed with error: `,k,"url: ",v,"request:",o),k}))}jo(e,t,o,l,c,p){return this.Wo(e,t,o,l,c)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),o&&o.headers.forEach(((l,c)=>e[c]=l))}Qo(e,t){const o=tA[e];let l=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection",uu=(i,e,t)=>{i.listen(e,(o=>{try{t(o)}catch(l){setTimeout((()=>{throw l}),0)}}))};class ml extends nA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ml.c_){const e=pv();uu(e,fv.STAT_EVENT,(t=>{t.stat===Lf.PROXY?_e(Sn,"STAT_EVENT: detected buffering proxy"):t.stat===Lf.NOPROXY&&_e(Sn,"STAT_EVENT: detected no buffering proxy")})),ml.c_=!0}}zo(e,t,o,l,c){const p=Wf();return new Promise(((v,E)=>{const I=new hv;I.setWithCredentials(!0),I.listenOnce(dv.COMPLETE,(()=>{try{switch(I.getLastErrorCode()){case eh.NO_ERROR:const k=I.getResponseJson();_e(Sn,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(k)),v(k);break;case eh.TIMEOUT:_e(Sn,`RPC '${e}' ${p} timed out`),E(new me(te.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const R=I.getStatus();if(_e(Sn,`RPC '${e}' ${p} failed with status:`,R,"response text:",I.getResponseText()),R>0){let Z=I.getResponseJson();Array.isArray(Z)&&(Z=Z[0]);const ee=Z==null?void 0:Z.error;if(ee&&ee.status&&ee.message){const Y=(function(Ve){const Re=Ve.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(Re)>=0?Re:te.UNKNOWN})(ee.status);E(new me(Y,ee.message))}else E(new me(te.UNKNOWN,"Server responded with status "+I.getStatus()))}else E(new me(te.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:p,h_:I.getLastErrorCode(),P_:I.getLastError()})}}finally{_e(Sn,`RPC '${e}' ${p} completed.`)}}));const C=JSON.stringify(l);_e(Sn,`RPC '${e}' ${p} sending request:`,l),I.send(t,"POST",C,o,15)}))}T_(e,t,o){const l=Wf(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=this.createWebChannelTransport(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(v.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Go(v.initMessageHeaders,t,o),v.encodeInitMessageHeaders=!0;const I=c.join("");_e(Sn,`Creating RPC '${e}' stream ${l}: ${I}`,v);const C=p.createWebChannel(I,v);this.I_(C);let k=!1,R=!1;const Z=new rA({Ho:ee=>{R?_e(Sn,`Not sending because RPC '${e}' stream ${l} is closed:`,ee):(k||(_e(Sn,`Opening RPC '${e}' stream ${l} transport.`),C.open(),k=!0),_e(Sn,`RPC '${e}' stream ${l} sending:`,ee),C.send(ee))},Jo:()=>C.close()});return uu(C,du.EventType.OPEN,(()=>{R||(_e(Sn,`RPC '${e}' stream ${l} transport opened.`),Z.i_())})),uu(C,du.EventType.CLOSE,(()=>{R||(R=!0,_e(Sn,`RPC '${e}' stream ${l} transport closed`),Z.o_(),this.E_(C))})),uu(C,du.EventType.ERROR,(ee=>{R||(R=!0,vl(Sn,`RPC '${e}' stream ${l} transport errored. Name:`,ee.name,"Message:",ee.message),Z.o_(new me(te.UNAVAILABLE,"The operation could not be completed")))})),uu(C,du.EventType.MESSAGE,(ee=>{var Y;if(!R){const le=ee.data[0];mt(!!le,16349);const Ve=le,Re=(Ve==null?void 0:Ve.error)||((Y=Ve[0])==null?void 0:Y.error);if(Re){_e(Sn,`RPC '${e}' stream ${l} received error:`,Re);const De=Re.status;let et=(function(F){const N=jt[F];if(N!==void 0)return Qv(N)})(De),ct=Re.message;et===void 0&&(et=te.INTERNAL,ct="Unknown error status: "+De+" with message "+Re.message),R=!0,Z.o_(new me(et,ct)),C.close()}else _e(Sn,`RPC '${e}' stream ${l} received:`,le),Z.__(le)}})),ml.u_(),setTimeout((()=>{Z.s_()}),0),Z}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return mv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(i){return new ml(i)}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(i){return new l1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ml.c_=!1;class hw{constructor(e,t,o=1e3,l=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=l,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-o);l>0&&_e("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="PersistentStream";class dw{constructor(e,t,o,l,c,p,v,E){this.Ci=e,this.b_=o,this.S_=l,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=v,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Ss(t.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,l])=>{this.D_===t&&this.G_(o,l)}),(o=>{e((()=>{const l=new me(te.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(l)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{o((()=>this.z_(l)))})),this.stream.onMessage((l=>{o((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(Y_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(_e(Y_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sA extends dw{constructor(e,t,o,l,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,l,p),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=h1(this.serializer,e),o=(function(c){if(!("targetChange"in c))return Ue.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?Ue.min():p.readTime?bi(p.readTime):Ue.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=jf(this.serializer),t.addTarget=(function(c,p){let v;const E=p.target;if(v=bf(E)?{documents:p1(c,E)}:{query:m1(c,E).ft},v.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){v.resumeToken=Xv(c,p.resumeToken);const I=zf(c,p.expectedCount);I!==null&&(v.expectedCount=I)}else if(p.snapshotVersion.compareTo(Ue.min())>0){v.readTime=Eh(c,p.snapshotVersion.toTimestamp());const I=zf(c,p.expectedCount);I!==null&&(v.expectedCount=I)}return v})(this.serializer,e);const o=_1(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=jf(this.serializer),t.removeTarget=e,this.K_(t)}}class oA extends dw{constructor(e,t,o,l,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,l,p),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=f1(e.writeResults,e.commitTime),o=bi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=jf(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>d1(this.serializer,o)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{}class lA extends aA{constructor(e,t,o,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Wo(e,Uf(t,o),l,c,p))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(te.UNKNOWN,c.toString())}))}jo(e,t,o,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,v])=>this.connection.jo(e,Uf(t,o),l,p,v,c))).catch((p=>{throw p.name==="FirebaseError"?(p.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new me(te.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function uA(i,e,t,o){return new lA(i,e,t,o)}class cA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class hA{constructor(e,t,o,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((p=>{o.enqueueAndForget((async()=>{Aa(this)&&(_e(Ea,"Restarting streams for network reachability change."),await(async function(E){const I=je(E);I.Ea.add(4),await ju(I),I.Va.set("Unknown"),I.Ea.delete(4),await Hh(I)})(this))}))})),this.Va=new cA(o,l)}}async function Hh(i){if(Aa(i))for(const e of i.Ra)await e(!0)}async function ju(i){for(const e of i.Ra)await e(!1)}function fw(i,e){const t=je(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Lp(t)?xp(t):Ol(t).O_()&&kp(t,e))}function Rp(i,e){const t=je(i),o=Ol(t);t.Ia.delete(e),o.O_()&&pw(t,e),t.Ia.size===0&&(o.O_()?o.L_():Aa(t)&&t.Va.set("Unknown"))}function kp(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ol(i).Z_(e)}function pw(i,e){i.da.$e(e),Ol(i).X_(e)}function xp(i){i.da=new i1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Ol(i).start(),i.Va.ua()}function Lp(i){return Aa(i)&&!Ol(i).x_()&&i.Ia.size>0}function Aa(i){return je(i).Ea.size===0}function mw(i){i.da=void 0}async function dA(i){i.Va.set("Online")}async function fA(i){i.Ia.forEach(((e,t)=>{kp(i,e)}))}async function pA(i,e){mw(i),Lp(i)?(i.Va.ha(e),xp(i)):i.Va.set("Unknown")}async function mA(i,e,t){if(i.Va.set("Online"),e instanceof Jv&&e.state===2&&e.cause)try{await(async function(l,c){const p=c.cause;for(const v of c.targetIds)l.Ia.has(v)&&(await l.remoteSyncer.rejectListen(v,p),l.Ia.delete(v),l.da.removeTarget(v))})(i,e)}catch(o){_e(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Ih(i,o)}else if(e instanceof ih?i.da.Xe(e):e instanceof Yv?i.da.st(e):i.da.tt(e),!t.isEqual(Ue.min()))try{const o=await cw(i.localStore);t.compareTo(o)>=0&&await(function(c,p){const v=c.da.Tt(p);return v.targetChanges.forEach(((E,I)=>{if(E.resumeToken.approximateByteSize()>0){const C=c.Ia.get(I);C&&c.Ia.set(I,C.withResumeToken(E.resumeToken,p))}})),v.targetMismatches.forEach(((E,I)=>{const C=c.Ia.get(E);if(!C)return;c.Ia.set(E,C.withResumeToken(fn.EMPTY_BYTE_STRING,C.snapshotVersion)),pw(c,E);const k=new yo(C.target,E,I,C.sequenceNumber);kp(c,k)})),c.remoteSyncer.applyRemoteEvent(v)})(i,t)}catch(o){_e(Ea,"Failed to raise snapshot:",o),await Ih(i,o)}}async function Ih(i,e,t){if(!Ll(e))throw e;i.Ea.add(1),await ju(i),i.Va.set("Offline"),t||(t=()=>cw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{_e(Ea,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Hh(i)}))}function gw(i,e){return e().catch((t=>Ih(i,t,e)))}async function Wh(i){const e=je(i),t=xo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pp;for(;gA(e);)try{const l=await Q1(e.localStore,o);if(l===null){e.Ta.length===0&&t.L_();break}o=l.batchId,_A(e,l)}catch(l){await Ih(e,l)}_w(e)&&yw(e)}function gA(i){return Aa(i)&&i.Ta.length<10}function _A(i,e){i.Ta.push(e);const t=xo(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function _w(i){return Aa(i)&&!xo(i).x_()&&i.Ta.length>0}function yw(i){xo(i).start()}async function yA(i){xo(i).ra()}async function vA(i){const e=xo(i);for(const t of i.Ta)e.ea(t.mutations)}async function wA(i,e,t){const o=i.Ta.shift(),l=Ep.from(o,e,t);await gw(i,(()=>i.remoteSyncer.applySuccessfulWrite(l))),await Wh(i)}async function EA(i,e){e&&xo(i).Y_&&await(async function(o,l){if((function(p){return t1(p)&&p!==te.ABORTED})(l.code)){const c=o.Ta.shift();xo(o).B_(),await gw(o,(()=>o.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Wh(o)}})(i,e),_w(i)&&yw(i)}async function J_(i,e){const t=je(i);t.asyncQueue.verifyOperationInProgress(),_e(Ea,"RemoteStore received new credentials");const o=Aa(t);t.Ea.add(3),await ju(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Hh(t)}async function TA(i,e){const t=je(i);e?(t.Ea.delete(2),await Hh(t)):e||(t.Ea.add(2),await ju(t),t.Va.set("Unknown"))}function Ol(i){return i.ma||(i.ma=(function(t,o,l){const c=je(t);return c.sa(),new sA(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(i.datastore,i.asyncQueue,{Zo:dA.bind(null,i),Yo:fA.bind(null,i),t_:pA.bind(null,i),J_:mA.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),Lp(i)?xp(i):i.Va.set("Unknown")):(await i.ma.stop(),mw(i))}))),i.ma}function xo(i){return i.fa||(i.fa=(function(t,o,l){const c=je(t);return c.sa(),new oA(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:yA.bind(null,i),t_:EA.bind(null,i),ta:vA.bind(null,i),na:wA.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Wh(i)):(await i.fa.stop(),i.Ta.length>0&&(_e(Ea,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t,o,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=l,this.removalCallback=c,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,l,c){const p=Date.now()+o,v=new Np(e,t,p,l,c);return v.start(o),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Op(i,e){if(Ss("AsyncQueue",`${e}: ${i}`),Ll(i))return new me(te.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{static emptySet(e){return new gl(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ce.comparator(t.key,o.key):(t,o)=>Ce.comparator(t.key,o.key),this.keyedMap=fu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=o.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new gl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(){this.ga=new Lt(Ce.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class Sl{constructor(e,t,o,l,c,p,v,E,I){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=l,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=v,this.excludesMetadataChanges=E,this.hasCachedResults=I}static fromInitialDocuments(e,t,o,l,c){const p=[];return t.forEach((v=>{p.push({type:0,doc:v})})),new Sl(e,t,gl.emptySet(t),p,o,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==o[l].type||!t[l].doc.isEqual(o[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class SA{constructor(){this.queries=ey(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const l=je(t),c=l.queries;l.queries=ey(),c.forEach(((p,v)=>{for(const E of v.ba)E.onError(o)}))})(this,new me(te.ABORTED,"Firestore shutting down"))}}function ey(){return new Pa((i=>Vv(i)),Vh)}async function vw(i,e){const t=je(i);let o=3;const l=e.query;let c=t.queries.get(l);c?!c.Sa()&&e.Da()&&(o=2):(c=new IA,o=e.Da()?0:1);try{switch(o){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(p){const v=Op(p,`Initialization of query '${ul(e.query)}' failed`);return void e.onError(v)}t.queries.set(l,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Dp(t)}async function ww(i,e){const t=je(i),o=e.query;let l=3;const c=t.queries.get(o);if(c){const p=c.ba.indexOf(e);p>=0&&(c.ba.splice(p,1),c.ba.length===0?l=e.Da()?0:1:!c.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function PA(i,e){const t=je(i);let o=!1;for(const l of e){const c=l.query,p=t.queries.get(c);if(p){for(const v of p.ba)v.Fa(l)&&(o=!0);p.wa=l}}o&&Dp(t)}function AA(i,e,t){const o=je(i),l=o.queries.get(e);if(l)for(const c of l.ba)c.onError(t);o.queries.delete(e)}function Dp(i){i.Ca.forEach((e=>{e.next()}))}var qf,ty;(ty=qf||(qf={})).Ma="default",ty.Cache="cache";class Ew{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const l of e.docChanges)l.type!==3&&o.push(l);e=new Sl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.key=e}}class Iw{constructor(e){this.key=e}}class CA{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.eu=Fv(e),this.tu=new gl(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new X_,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,p=l,v=!1;const E=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,I=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((C,k)=>{const R=l.get(C),Z=Fh(this.query,k)?k:null,ee=!!R&&this.mutatedKeys.has(R.key),Y=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let le=!1;R&&Z?R.data.isEqual(Z.data)?ee!==Y&&(o.track({type:3,doc:Z}),le=!0):this.su(R,Z)||(o.track({type:2,doc:Z}),le=!0,(E&&this.eu(Z,E)>0||I&&this.eu(Z,I)<0)&&(v=!0)):!R&&Z?(o.track({type:0,doc:Z}),le=!0):R&&!Z&&(o.track({type:1,doc:R}),le=!0,(E||I)&&(v=!0)),le&&(Z?(p=p.add(Z),c=Y?c.add(C):c.delete(C)):(p=p.delete(C),c=c.delete(C)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const C=this.query.limitType==="F"?p.last():p.first();p=p.delete(C.key),c=c.delete(C.key),o.track({type:1,doc:C})}return{tu:p,iu:o,Ss:v,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((C,k)=>(function(Z,ee){const Y=le=>{switch(le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Vt:le})}};return Y(Z)-Y(ee)})(C.type,k.type)||this.eu(C.doc,k.doc))),this.ou(o),l=l??!1;const v=t&&!l?this._u():[],E=this.Ya.size===0&&this.current&&!l?1:0,I=E!==this.Xa;return this.Xa=E,p.length!==0||I?{snapshot:new Sl(this.query,e.tu,c,p,e.mutatedKeys,E===0,I,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new X_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new Iw(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new Tw(o))})),t}cu(e){this.Za=e.ks,this.Ya=Xe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Mp="SyncEngine";class RA{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class kA{constructor(e){this.key=e,this.hu=!1}}class xA{constructor(e,t,o,l,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Pa((v=>Vv(v)),Vh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Lt(Ce.comparator),this.Au=new Map,this.Vu=new Sp,this.du={},this.mu=new Map,this.fu=Il.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LA(i,e,t=!0){const o=kw(i);let l;const c=o.Tu.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await Sw(o,e,t,!0),l}async function NA(i,e){const t=kw(i);await Sw(t,e,!0,!1)}async function Sw(i,e,t,o){const l=await Y1(i.localStore,Di(e)),c=l.targetId,p=i.sharedClientState.addLocalQueryTarget(c,t);let v;return o&&(v=await OA(i,e,c,p==="current",l.resumeToken)),i.isPrimaryClient&&t&&fw(i.remoteStore,l),v}async function OA(i,e,t,o,l){i.pu=(k,R,Z)=>(async function(Y,le,Ve,Re){let De=le.view.ru(Ve);De.Ss&&(De=await Z_(Y.localStore,le.query,!1).then((({documents:F})=>le.view.ru(F,De))));const et=Re&&Re.targetChanges.get(le.targetId),ct=Re&&Re.targetMismatches.get(le.targetId)!=null,$e=le.view.applyChanges(De,Y.isPrimaryClient,et,ct);return ry(Y,le.targetId,$e.au),$e.snapshot})(i,k,R,Z);const c=await Z_(i.localStore,e,!0),p=new CA(e,c.ks),v=p.ru(c.documents),E=Bu.createSynthesizedTargetChangeForCurrentChange(t,o&&i.onlineState!=="Offline",l),I=p.applyChanges(v,i.isPrimaryClient,E);ry(i,t,I.au);const C=new RA(e,t,p);return i.Tu.set(e,C),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),I.snapshot}async function DA(i,e,t){const o=je(i),l=o.Tu.get(e),c=o.Iu.get(l.targetId);if(c.length>1)return o.Iu.set(l.targetId,c.filter((p=>!Vh(p,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(l.targetId),o.sharedClientState.isActiveQueryTarget(l.targetId)||await Hf(o.localStore,l.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(l.targetId),t&&Rp(o.remoteStore,l.targetId),Gf(o,l.targetId)})).catch(xl)):(Gf(o,l.targetId),await Hf(o.localStore,l.targetId,!0))}async function MA(i,e){const t=je(i),o=t.Tu.get(e),l=t.Iu.get(o.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Rp(t.remoteStore,o.targetId))}async function bA(i,e,t){const o=HA(i);try{const l=await(function(p,v){const E=je(p),I=It.now(),C=v.reduce(((Z,ee)=>Z.add(ee.key)),Xe());let k,R;return E.persistence.runTransaction("Locally write mutations","readwrite",(Z=>{let ee=Ps(),Y=Xe();return E.xs.getEntries(Z,C).next((le=>{ee=le,ee.forEach(((Ve,Re)=>{Re.isValidDocument()||(Y=Y.add(Ve))}))})).next((()=>E.localDocuments.getOverlayedDocuments(Z,ee))).next((le=>{k=le;const Ve=[];for(const Re of v){const De=QP(Re,k.get(Re.key).overlayedDocument);De!=null&&Ve.push(new Do(Re.key,De,kv(De.value.mapValue),Mi.exists(!0)))}return E.mutationQueue.addMutationBatch(Z,I,Ve,v)})).next((le=>{R=le;const Ve=le.applyToLocalDocumentSet(k,Y);return E.documentOverlayCache.saveOverlays(Z,le.batchId,Ve)}))})).then((()=>({batchId:R.batchId,changes:Uv(k)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(l.batchId),(function(p,v,E){let I=p.du[p.currentUser.toKey()];I||(I=new Lt(Je)),I=I.insert(v,E),p.du[p.currentUser.toKey()]=I})(o,l.batchId,t),await Hu(o,l.changes),await Wh(o.remoteStore)}catch(l){const c=Op(l,"Failed to persist write");t.reject(c)}}async function Pw(i,e){const t=je(i);try{const o=await K1(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const p=t.Au.get(c);p&&(mt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?p.hu=!0:l.modifiedDocuments.size>0?mt(p.hu,14607):l.removedDocuments.size>0&&(mt(p.hu,42227),p.hu=!1))})),await Hu(t,o,e)}catch(o){await xl(o)}}function ny(i,e,t){const o=je(i);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const l=[];o.Tu.forEach(((c,p)=>{const v=p.view.va(e);v.snapshot&&l.push(v.snapshot)})),(function(p,v){const E=je(p);E.onlineState=v;let I=!1;E.queries.forEach(((C,k)=>{for(const R of k.ba)R.va(v)&&(I=!0)})),I&&Dp(E)})(o.eventManager,e),l.length&&o.Pu.J_(l),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function VA(i,e,t){const o=je(i);o.sharedClientState.updateQueryState(e,"rejected",t);const l=o.Au.get(e),c=l&&l.key;if(c){let p=new Lt(Ce.comparator);p=p.insert(c,An.newNoDocument(c,Ue.min()));const v=Xe().add(c),E=new Bh(Ue.min(),new Map,new Lt(Je),p,v);await Pw(o,E),o.Ru=o.Ru.remove(c),o.Au.delete(e),bp(o)}else await Hf(o.localStore,e,!1).then((()=>Gf(o,e,t))).catch(xl)}async function FA(i,e){const t=je(i),o=e.batch.batchId;try{const l=await Z1(t.localStore,e);Cw(t,o,null),Aw(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Hu(t,l)}catch(l){await xl(l)}}async function zA(i,e,t){const o=je(i);try{const l=await(function(p,v){const E=je(p);return E.persistence.runTransaction("Reject batch","readwrite-primary",(I=>{let C;return E.mutationQueue.lookupMutationBatch(I,v).next((k=>(mt(k!==null,37113),C=k.keys(),E.mutationQueue.removeMutationBatch(I,k)))).next((()=>E.mutationQueue.performConsistencyCheck(I))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(I,C,v))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(I,C))).next((()=>E.localDocuments.getDocuments(I,C)))}))})(o.localStore,e);Cw(o,e,t),Aw(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Hu(o,l)}catch(l){await xl(l)}}function Aw(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function Cw(i,e,t){const o=je(i);let l=o.du[o.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),o.du[o.currentUser.toKey()]=l}}function Gf(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Iu.get(e))i.Tu.delete(o),t&&i.Pu.yu(o,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((o=>{i.Vu.containsKey(o)||Rw(i,o)}))}function Rw(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(Rp(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),bp(i))}function ry(i,e,t){for(const o of t)o instanceof Tw?(i.Vu.addReference(o.key,e),UA(i,o)):o instanceof Iw?(_e(Mp,"Document no longer in limbo: "+o.key),i.Vu.removeReference(o.key,e),i.Vu.containsKey(o.key)||Rw(i,o.key)):be(19791,{wu:o})}function UA(i,e){const t=e.key,o=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(o)||(_e(Mp,"New document in limbo: "+t),i.Eu.add(o),bp(i))}function bp(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new Ce(wt.fromString(e)),o=i.fu.next();i.Au.set(o,new kA(t)),i.Ru=i.Ru.insert(t,o),fw(i.remoteStore,new yo(Di(vp(t.path)),o,"TargetPurposeLimboResolution",Dh.ce))}}async function Hu(i,e,t){const o=je(i),l=[],c=[],p=[];o.Tu.isEmpty()||(o.Tu.forEach(((v,E)=>{p.push(o.pu(E,e,t).then((I=>{var C;if((I||t)&&o.isPrimaryClient){const k=I?!I.fromCache:(C=t==null?void 0:t.targetChanges.get(E.targetId))==null?void 0:C.current;o.sharedClientState.updateQueryState(E.targetId,k?"current":"not-current")}if(I){l.push(I);const k=Ap.Es(E.targetId,I);c.push(k)}})))})),await Promise.all(p),o.Pu.J_(l),await(async function(E,I){const C=je(E);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>re.forEach(I,(R=>re.forEach(R.Ts,(Z=>C.persistence.referenceDelegate.addReference(k,R.targetId,Z))).next((()=>re.forEach(R.Is,(Z=>C.persistence.referenceDelegate.removeReference(k,R.targetId,Z)))))))))}catch(k){if(!Ll(k))throw k;_e(Cp,"Failed to update sequence numbers: "+k)}for(const k of I){const R=k.targetId;if(!k.fromCache){const Z=C.vs.get(R),ee=Z.snapshotVersion,Y=Z.withLastLimboFreeSnapshotVersion(ee);C.vs=C.vs.insert(R,Y)}}})(o.localStore,c))}async function BA(i,e){const t=je(i);if(!t.currentUser.isEqual(e)){_e(Mp,"User change. New user:",e.toKey());const o=await uw(t.localStore,e);t.currentUser=e,(function(c,p){c.mu.forEach((v=>{v.forEach((E=>{E.reject(new me(te.CANCELLED,p))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Hu(t,o.Ns)}}function jA(i,e){const t=je(i),o=t.Au.get(e);if(o&&o.hu)return Xe().add(o.key);{let l=Xe();const c=t.Iu.get(e);if(!c)return l;for(const p of c){const v=t.Tu.get(p);l=l.unionWith(v.view.nu)}return l}}function kw(i){const e=je(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VA.bind(null,e),e.Pu.J_=PA.bind(null,e.eventManager),e.Pu.yu=AA.bind(null,e.eventManager),e}function HA(i){const e=je(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zA.bind(null,e),e}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return G1(this.persistence,new H1,e.initialUser,this.serializer)}Cu(e){return new lw(Pp.Vi,this.serializer)}Du(e){return new X1}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class WA extends Sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mt(this.persistence.referenceDelegate instanceof Th,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new R1(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new lw((o=>Th.Vi(o,t)),this.serializer)}}class Zf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>ny(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=BA.bind(null,this.syncEngine),await TA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new SA})()}createDatastore(e){const t=jh(e.databaseInfo.databaseId),o=iA(e.databaseInfo);return uA(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,l,c,p,v){return new hA(o,l,c,p,v)})(this.localStore,this.datastore,e.asyncQueue,(t=>ny(this.syncEngine,t,0)),(function(){return Q_.v()?new Q_:new eA})())}createSyncEngine(e,t){return(function(l,c,p,v,E,I,C){const k=new xA(l,c,p,v,E,I);return C&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(l){const c=je(l);_e(Ea,"RemoteStore shutting down."),c.Ea.add(5),await ju(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Zf.provider={build:()=>new Zf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="FirestoreClient";class qA{constructor(e,t,o,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=l,this.user=Pn.UNAUTHENTICATED,this.clientId=fp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(o,(async p=>{_e(Lo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(o,(p=>(_e(Lo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=Op(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Tf(i,e){i.asyncQueue.verifyOperationInProgress(),_e(Lo,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener((async l=>{o.isEqual(l)||(await uw(e.localStore,l),o=l)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function iy(i,e){i.asyncQueue.verifyOperationInProgress();const t=await GA(i);_e(Lo,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((o=>J_(e.remoteStore,o))),i.setAppCheckTokenChangeListener(((o,l)=>J_(e.remoteStore,l))),i._onlineComponents=e}async function GA(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){_e(Lo,"Using user provided OfflineComponentProvider");try{await Tf(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===te.FAILED_PRECONDITION||l.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;vl("Error using user provided cache. Falling back to memory cache: "+t),await Tf(i,new Sh)}}else _e(Lo,"Using default OfflineComponentProvider"),await Tf(i,new WA(void 0));return i._offlineComponents}async function Lw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(_e(Lo,"Using user provided OnlineComponentProvider"),await iy(i,i._uninitializedComponentsProvider._online)):(_e(Lo,"Using default OnlineComponentProvider"),await iy(i,new Zf))),i._onlineComponents}function ZA(i){return Lw(i).then((e=>e.syncEngine))}async function Kf(i){const e=await Lw(i),t=e.eventManager;return t.onListen=LA.bind(null,e.syncEngine),t.onUnlisten=DA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=NA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MA.bind(null,e.syncEngine),t}function KA(i,e,t,o){const l=new xw(o),c=new Ew(e,l,t);return i.asyncQueue.enqueueAndForget((async()=>vw(await Kf(i),c))),()=>{l.Nu(),i.asyncQueue.enqueueAndForget((async()=>ww(await Kf(i),c)))}}function $A(i,e,t={}){const o=new So;return i.asyncQueue.enqueueAndForget((async()=>(function(c,p,v,E,I){const C=new xw({next:R=>{C.Nu(),p.enqueueAndForget((()=>ww(c,k))),R.fromCache&&E.source==="server"?I.reject(new me(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(R)},error:R=>I.reject(R)}),k=new Ew(v,C,{includeMetadataChanges:!0,Ka:!0});return vw(c,k)})(await Kf(i),i.asyncQueue,e,t,o))),o.promise}function QA(i,e){const t=new So;return i.asyncQueue.enqueueAndForget((async()=>bA(await ZA(i),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="ComponentProvider",sy=new Map;function JA(i,e,t,o,l){return new yP(i,e,t,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Nw(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="firestore.googleapis.com",oy=!0;class ay{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ow,this.ssl=oy}else this.host=e.host,this.ssl=e.ssl??oy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<A1)throw new me(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nw(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,l){return o.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qh{constructor(e,t,o,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ay({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ay(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new YS;switch(o.type){case"firstParty":return new tP(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new me(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=sy.get(t);o&&(_e(YA,"Removing Datastore"),sy.delete(t),o.terminate())})(this),Promise.resolve()}}function XA(i,e,t,o={}){var I;i=Es(i,qh);const l=Al(e),c=i._getSettings(),p={...c,emulatorOptions:i._getEmulatorOptions()},v=`${e}:${t}`;l&&(Sy(`https://${v}`),Py("Firestore",!0)),c.host!==Ow&&c.host!==v&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...c,host:v,ssl:l,emulatorOptions:o};if(!_a(E,p)&&(i._setSettings(E),o.mockUserToken)){let C,k;if(typeof o.mockUserToken=="string")C=o.mockUserToken,k=Pn.MOCK_USER;else{C=oT(o.mockUserToken,(I=i._app)==null?void 0:I.options.projectId);const R=o.mockUserToken.sub||o.mockUserToken.user_id;if(!R)throw new me(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new Pn(R)}i._authCredentials=new JS(new _v(C,k))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class qt{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(zu(t,qt._jsonSchema))return new qt(e,o||null,new Ce(wt.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:Wt("string",qt._jsonSchemaVersion),referencePath:Wt("string")};class Po extends Mo{constructor(e,t,o){super(e,t,vp(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Ce(e))}withConverter(e){return new Po(this.firestore,e,this._path)}}function Dl(i,e,...t){if(i=Jt(i),yv("collection","path",e),i instanceof qh){const o=wt.fromString(e,...t);return w_(o),new Po(i,null,o)}{if(!(i instanceof qt||i instanceof Po))throw new me(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(wt.fromString(e,...t));return w_(o),new Po(i.firestore,null,o)}}function Dw(i,e,...t){if(i=Jt(i),arguments.length===1&&(e=fp.newId()),yv("doc","path",e),i instanceof qh){const o=wt.fromString(e,...t);return v_(o),new qt(i,null,new Ce(o))}{if(!(i instanceof qt||i instanceof Po))throw new me(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(wt.fromString(e,...t));return v_(o),new qt(i.firestore,i instanceof Po?i.converter:null,new Ce(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="AsyncQueue";class uy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hw(this,"async_queue_retry"),this._c=()=>{const o=Ef();o&&_e(ly,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=Ef();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ef();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new So;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ll(e))throw e;_e(ly,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",cy(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=Np.createAndSchedule(this,e,t,o,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&be(47125,{Pc:cy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cy(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Pl extends qh{constructor(e,t,o,l){super(e,t,o,l),this.type="firestore",this._queue=new uy,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uy(e),this._firestoreClient=void 0,await e}}}function eC(i,e){const t=typeof i=="object"?i:ky(),o=typeof i=="string"?i:gh,l=tp(t,"firestore").getImmediate({identifier:o});if(!l._initialized){const c=iT("firestore");c&&XA(l,...c)}return l}function Vp(i){if(i._terminated)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||tC(i),i._firestoreClient}function tC(i){var o,l,c,p;const e=i._freezeSettings(),t=JA(i._databaseId,((o=i._app)==null?void 0:o.options.appId)||"",i._persistenceKey,(l=i._app)==null?void 0:l.options.apiKey,e);i._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((p=e.localCache)!=null&&p._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new qA(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(E){const I=E==null?void 0:E._online.build();return{_offline:E==null?void 0:E._offline.build(I),_online:I}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zr(fn.fromBase64String(e))}catch(t){throw new me(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zr(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zu(e,zr._jsonSchema))return zr.fromBase64String(e.bytes)}}zr._jsonSchemaVersion="firestore/bytes/1.0",zr._jsonSchema={type:Wt("string",zr._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(zu(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Wt("string",Vi._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,l){if(o.length!==l.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zu(e,ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ii(e.vectorValues);throw new me(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ii._jsonSchemaVersion="firestore/vectorValue/1.0",ii._jsonSchema={type:Wt("string",ii._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=/^__.*__$/;class rC{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uu(e,this.data,t,this.fieldTransforms)}}class Mw{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Do(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{dataSource:i})}}class Up{constructor(e,t,o,l,c,p){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=l,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Up({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var l;const t=(l=this.path)==null?void 0:l.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var l;const t=(l=this.path)==null?void 0:l.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ph(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(bw(this.dataSource)&&nC.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class iC{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||jh(e)}createContext(e,t,o,l=!1){return new Up({dataSource:e,methodName:t,targetDoc:o,path:dn.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bp(i){const e=i._freezeSettings(),t=jh(i._databaseId);return new iC(i._databaseId,!!e.ignoreUndefinedProperties,t)}function sC(i,e,t,o,l,c={}){const p=i.createContext(c.merge||c.mergeFields?2:0,e,t,l);jp("Data must be an object, but it was:",p,o);const v=Vw(o,p);let E,I;if(c.merge)E=new cr(p.fieldMask),I=p.fieldTransforms;else if(c.mergeFields){const C=[];for(const k of c.mergeFields){const R=Ta(e,k,t);if(!p.contains(R))throw new me(te.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Uw(C,R)||C.push(R)}E=new cr(C),I=p.fieldTransforms.filter((k=>E.covers(k.field)))}else E=null,I=p.fieldTransforms;return new rC(new Xn(v),E,I)}class Gh extends zp{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gh}}function oC(i,e,t,o){const l=i.createContext(1,e,t);jp("Data must be an object, but it was:",l,o);const c=[],p=Xn.empty();Oo(o,((E,I)=>{const C=zw(e,E,t);I=Jt(I);const k=l.childContextForFieldPath(C);if(I instanceof Gh)c.push(C);else{const R=Wu(I,k);R!=null&&(c.push(C),p.set(C,R))}}));const v=new cr(c);return new Mw(p,v,l.fieldTransforms)}function aC(i,e,t,o,l,c){const p=i.createContext(1,e,t),v=[Ta(e,o,t)],E=[l];if(c.length%2!=0)throw new me(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)v.push(Ta(e,c[R])),E.push(c[R+1]);const I=[],C=Xn.empty();for(let R=v.length-1;R>=0;--R)if(!Uw(I,v[R])){const Z=v[R];let ee=E[R];ee=Jt(ee);const Y=p.childContextForFieldPath(Z);if(ee instanceof Gh)I.push(Z);else{const le=Wu(ee,Y);le!=null&&(I.push(Z),C.set(Z,le))}}const k=new cr(I);return new Mw(C,k,p.fieldTransforms)}function lC(i,e,t,o=!1){return Wu(t,i.createContext(o?4:3,e))}function Wu(i,e){if(Fw(i=Jt(i)))return jp("Unsupported field value:",e,i),Vw(i,e);if(i instanceof zp)return(function(o,l){if(!bw(l.dataSource))throw l.createError(`${o._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,l){const c=[];let p=0;for(const v of o){let E=Wu(v,l.childContextForArray(p));E==null&&(E={nullValue:"NULL_VALUE"}),c.push(E),p++}return{arrayValue:{values:c}}})(i,e)}return(function(o,l){if((o=Jt(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return WP(l.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const c=It.fromDate(o);return{timestampValue:Eh(l.serializer,c)}}if(o instanceof It){const c=new It(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Eh(l.serializer,c)}}if(o instanceof Vi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof zr)return{bytesValue:Xv(l.serializer,o._byteString)};if(o instanceof qt){const c=l.databaseId,p=o.firestore._databaseId;if(!p.isEqual(c))throw l.createError(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ip(o.firestore._databaseId||l.databaseId,o._key.path)}}if(o instanceof ii)return(function(p,v){const E=p instanceof ii?p.toArray():p;return{mapValue:{fields:{[Cv]:{stringValue:Rv},[_h]:{arrayValue:{values:E.map((C=>{if(typeof C!="number")throw v.createError("VectorValues must only contain numeric values.");return wp(v.serializer,C)}))}}}}}})(o,l);if(ow(o))return o._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Oh(o)}`)})(i,e)}function Vw(i,e){const t={};return Ev(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(i,((o,l)=>{const c=Wu(l,e.childContextForField(o));c!=null&&(t[o]=c)})),{mapValue:{fields:t}}}function Fw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof It||i instanceof Vi||i instanceof zr||i instanceof qt||i instanceof zp||i instanceof ii||ow(i))}function jp(i,e,t){if(!Fw(t)||!vv(t)){const o=Oh(t);throw o==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+o)}}function Ta(i,e,t){if((e=Jt(e))instanceof Fp)return e._internalPath;if(typeof e=="string")return zw(i,e);throw Ph("Field path arguments must be of type string or ",i,!1,void 0,t)}const uC=new RegExp("[~\\*/\\[\\]]");function zw(i,e,t){if(e.search(uC)>=0)throw Ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Fp(...e.split("."))._internalPath}catch{throw Ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Ph(i,e,t,o,l){const c=o&&!o.isEmpty(),p=l!==void 0;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let E="";return(c||p)&&(E+=" (found",c&&(E+=` in field ${o}`),p&&(E+=` in document ${l}`),E+=")"),new me(te.INVALID_ARGUMENT,v+i+E)}function Uw(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{convertValue(e,t="none"){switch(ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return Oo(e,((l,c)=>{o[l]=this.convertValue(c,t)})),o}convertVectorValue(e){var o,l,c;const t=(c=(l=(o=e.fields)==null?void 0:o[_h].arrayValue)==null?void 0:l.values)==null?void 0:c.map((p=>bt(p.doubleValue)));return new ii(t)}convertGeoPoint(e){return new Vi(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=bh(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=Co(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=wt.fromString(e);mt(sw(o),9688,{name:e});const l=new ku(o.get(1),o.get(3)),c=new Ce(o.popFirst(5));return l.isEqual(t)||Ss(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends cC{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}const hy="@firebase/firestore",dy="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(i){return(function(t,o){if(typeof t!="object"||t===null)return!1;const l=t;for(const c of o)if(c in l&&typeof l[c]=="function")return!0;return!1})(i,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t,o,l,c){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ta("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class hC extends Bw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new me(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class Hw extends Wp{}function Zh(i,e,...t){let o=[];e instanceof Wp&&o.push(e),o=o.concat(t),(function(c){const p=c.filter((E=>E instanceof qp)).length,v=c.filter((E=>E instanceof Kh)).length;if(p>1||p>0&&v>0)throw new me(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const l of o)i=l._apply(i);return i}class Kh extends Hw{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new Kh(e,t,o)}_apply(e){const t=this._parse(e);return qw(e._query,t),new Mo(e.firestore,e.converter,Vf(e._query,t))}_parse(e){const t=Bp(e.firestore);return(function(c,p,v,E,I,C,k){let R;if(I.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new me(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){my(k,C);const ee=[];for(const Y of k)ee.push(py(E,c,Y));R={arrayValue:{values:ee}}}else R=py(E,c,k)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||my(k,C),R=lC(v,p,k,C==="in"||C==="not-in");return Ht.create(I,C,R)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ah(i,e,t){const o=e,l=Ta("where",i);return Kh._create(l,o,t)}class qp extends Wp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qp(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let p=l;const v=c.getFlattenedFilters();for(const E of v)qw(p,E),p=Vf(p,E)})(e._query,t),new Mo(e.firestore,e.converter,Vf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gp extends Hw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gp(e,t)}_apply(e){const t=(function(l,c,p){if(l.startAt!==null)throw new me(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new me(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lu(c,p)})(e._query,this._field,this._direction);return new Mo(e.firestore,e.converter,bP(e._query,t))}}function Ww(i,e="asc"){const t=e,o=Ta("orderBy",i);return Gp._create(o,t)}function py(i,e,t){if(typeof(t=Jt(t))=="string"){if(t==="")throw new me(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bv(e)&&t.indexOf("/")!==-1)throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(wt.fromString(t));if(!Ce.isDocumentKey(o))throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return R_(i,new Ce(o))}if(t instanceof qt)return R_(i,t._key);throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oh(t)}.`)}function my(i,e){if(!Array.isArray(i)||i.length===0)throw new me(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qw(i,e){const t=(function(l,c){for(const p of l)for(const v of p.getFlattenedFilters())if(c.indexOf(v.op)>=0)return v.op;return null})(i.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function dC(i,e,t){let o;return o=i?i.toFirestore(e):e,o}class mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ma extends Bw{constructor(e,t,o,l,c,p){super(e,t,o,l,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Ta("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ma._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",ma._jsonSchema={type:Wt("string",ma._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class sh extends ma{data(e={}){return super.data(e)}}class ga{constructor(e,t,o,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new mu(l.hasPendingWrites,l.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new sh(this._firestore,this._userDataWriter,o.key,o,new mu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let p=0;return l._snapshot.docChanges.map((v=>{const E=new sh(l._firestore,l._userDataWriter,v.doc.key,v.doc,new mu(l._snapshot.mutatedKeys.has(v.doc.key),l._snapshot.fromCache),l.query.converter);return v.doc,{type:"added",doc:E,oldIndex:-1,newIndex:p++}}))}{let p=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((v=>c||v.type!==3)).map((v=>{const E=new sh(l._firestore,l._userDataWriter,v.doc.key,v.doc,new mu(l._snapshot.mutatedKeys.has(v.doc.key),l._snapshot.fromCache),l.query.converter);let I=-1,C=-1;return v.type!==0&&(I=p.indexOf(v.doc.key),p=p.delete(v.doc.key)),v.type!==1&&(p=p.add(v.doc),C=p.indexOf(v.doc.key)),{type:fC(v.type),doc:E,oldIndex:I,newIndex:C}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),o.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ga._jsonSchemaVersion="firestore/querySnapshot/1.0",ga._jsonSchema={type:Wt("string",ga._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};function Zp(i){i=Es(i,Mo);const e=Es(i.firestore,Pl),t=Vp(e),o=new Hp(e);return jw(i._query),$A(t,i._query).then((l=>new ga(e,o,i,l)))}function pC(i,e,t,...o){i=Es(i,qt);const l=Es(i.firestore,Pl),c=Bp(l);let p;return p=typeof(e=Jt(e))=="string"||e instanceof Fp?aC(c,"updateDoc",i._key,e,t,o):oC(c,"updateDoc",i._key,e),Zw(l,[p.toMutation(i._key,Mi.exists(!0))])}function Gw(i,e){const t=Es(i.firestore,Pl),o=Dw(i),l=dC(i.converter,e),c=Bp(i.firestore);return Zw(t,[sC(c,"addDoc",o._key,l,i.converter!==null,{}).toMutation(o._key,Mi.exists(!1))]).then((()=>o))}function mC(i,...e){var I,C,k;i=Jt(i);let t={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fy(e[o])||(t=e[o++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(fy(e[o])){const R=e[o];e[o]=(I=R.next)==null?void 0:I.bind(R),e[o+1]=(C=R.error)==null?void 0:C.bind(R),e[o+2]=(k=R.complete)==null?void 0:k.bind(R)}let c,p,v;if(i instanceof qt)p=Es(i.firestore,Pl),v=vp(i._key.path),c={next:R=>{e[o]&&e[o](gC(p,i,R))},error:e[o+1],complete:e[o+2]};else{const R=Es(i,Mo);p=Es(R.firestore,Pl),v=R._query;const Z=new Hp(p);c={next:ee=>{e[o]&&e[o](new ga(p,Z,R,ee))},error:e[o+1],complete:e[o+2]},jw(i._query)}const E=Vp(p);return KA(E,v,l,c)}function Zw(i,e){const t=Vp(i);return QA(t,e)}function gC(i,e,t){const o=t.docs.get(e._key),l=new Hp(i);return new ma(i,l,e._key,o,new mu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){QS(Cl),_l(new ya("firestore",((o,{instanceIdentifier:l,options:c})=>{const p=o.getProvider("app").getImmediate(),v=new Pl(new XS(o.getProvider("auth-internal")),new nP(p,o.getProvider("app-check-internal")),vP(p,l),p);return c={useFetchStreams:t,...c},v._setSettings(c),v}),"PUBLIC").setMultipleInstances(!0)),Eo(hy,dy,e),Eo(hy,dy,"esm2020")})();const _C={apiKey:"AIzaSyBJMdV_uvqIsSaQ4QY4fIhtpJpIo3apaxU",authDomain:"gdg-attendance-system.firebaseapp.com",projectId:"gdg-attendance-system",storageBucket:"gdg-attendance-system.firebasestorage.app",messagingSenderId:"155580839828",appId:"1:155580839828:web:26479e6b9de40d4747c181",measurementId:"G-PJVRR5S0F8"},Kw=Ry(_C),Ch=GS(Kw),Ca=eC(Kw),yC=({onLogin:i})=>{const[e,t]=Be.useState(""),[o,l]=Be.useState(""),[c,p]=Be.useState(""),v=async I=>{I.preventDefault();try{const C=await LI(Ch,e,o);i(C.user)}catch(C){p(C.message)}},E=async()=>{const I=new ys;try{const C=await tS(Ch,I);i(C.user)}catch(C){p(C.message)}};return oe.jsxs("div",{style:{maxWidth:"400px",margin:"2rem auto",padding:"2rem",backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[oe.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:"Login"}),c&&oe.jsx("p",{style:{color:"red",marginBottom:"1rem"},children:c}),oe.jsxs("form",{onSubmit:v,children:[oe.jsxs("div",{style:{marginBottom:"1rem"},children:[oe.jsx("label",{children:"Email:"}),oe.jsx("input",{type:"email",value:e,onChange:I=>t(I.target.value),required:!0,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #d1d5db",borderRadius:"0.25rem"}})]}),oe.jsxs("div",{style:{marginBottom:"1rem"},children:[oe.jsx("label",{children:"Password:"}),oe.jsx("input",{type:"password",value:o,onChange:I=>l(I.target.value),required:!0,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #d1d5db",borderRadius:"0.25rem"}})]}),oe.jsx("button",{type:"submit",style:{width:"100%",padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer"},children:"Login with Email"})]}),oe.jsx("div",{style:{textAlign:"center",margin:"1rem 0"},children:"or"}),oe.jsx("button",{onClick:E,style:{width:"100%",padding:"0.5rem",backgroundColor:"#db4437",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer"},children:"Login with Google"})]})},vC=async i=>{try{return(await Gw(Dl(Ca,"sessions"),i)).id}catch(e){throw console.error("Error adding session:",e),e}},wC=async()=>{try{const i=Zh(Dl(Ca,"sessions"),Ww("startTime","desc"));return(await Zp(i)).docs.map(t=>({id:t.id,...t.data()}))}catch(i){throw console.error("Error getting sessions:",i),i}},EC=i=>{const e=Zh(Dl(Ca,"sessions"),Ah("isActive","==",!0),Ww("startTime","desc"));return mC(e,t=>{const o=new Date,c=t.docs.map(p=>({id:p.id,...p.data()})).find(p=>p.startTime.toDate()<=o&&p.endTime.toDate()>=o)||null;i(c)},t=>{console.error("Error listening for active session:",t)})},TC=async(i,e)=>{try{const t=Dw(Ca,"sessions",i);await pC(t,e)}catch(t){throw console.error("Error updating session:",t),t}},IC=async i=>{try{return(await Gw(Dl(Ca,"attendance"),i)).id}catch(e){throw console.error("Error adding attendance:",e),e}},SC=async i=>{try{const e=Zh(Dl(Ca,"attendance"),Ah("sessionId","==",i));return(await Zp(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){throw console.error("Error getting attendance:",e),e}},PC=async(i,e)=>{try{const t=Zh(Dl(Ca,"attendance"),Ah("sessionId","==",i),Ah("userId","==",e));return(await Zp(t)).docs.length>0}catch(t){throw console.error("Error checking duplicate attendance:",t),t}},AC=(i,e)=>{const t=new Date,o=new Date(i),l=new Date(e);return t>=o&&t<=l},Iu=i=>new Date(i).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),$w=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),CC=i=>{const e=new Date,o=new Date(i)-e;if(o<=0)return"Ended";const l=Math.floor(o/(1e3*60*60)),c=Math.floor(o%(1e3*60*60)/(1e3*60)),p=Math.floor(o%(1e3*60)/1e3);return`${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`};function RC(i,e){const t=Be.useRef(e);Be.useEffect(function(){e!==t.current&&i.attributionControl!=null&&(t.current!=null&&i.attributionControl.removeAttribution(t.current),e!=null&&i.attributionControl.addAttribution(e)),t.current=e},[i,e])}function kC(i,e,t){e.center!==t.center&&i.setLatLng(e.center),e.radius!=null&&e.radius!==t.radius&&i.setRadius(e.radius)}_y();const xC=1;function LC(i){return Object.freeze({__version:xC,map:i})}function Qw(i,e){return Object.freeze({...i,...e})}const Yw=Be.createContext(null),Jw=Yw.Provider;function Kp(){const i=Be.useContext(Yw);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function Xw(i){function e(t,o){const{instance:l,context:c}=i(t).current;return Be.useImperativeHandle(o,()=>l),t.children==null?null:oh.createElement(Jw,{value:c},t.children)}return Be.forwardRef(e)}function NC(i){function e(t,o){const{instance:l}=i(t).current;return Be.useImperativeHandle(o,()=>l),null}return Be.forwardRef(e)}function eE(i,e){const t=Be.useRef();Be.useEffect(function(){return e!=null&&i.instance.on(e),t.current=e,function(){t.current!=null&&i.instance.off(t.current),t.current=null}},[i,e])}function $p(i,e){const t=i.pane??e.pane;return t?{...i,pane:t}:i}var gu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var OC=gu.exports,gy;function DC(){return gy||(gy=1,(function(i,e){(function(t,o){o(e)})(OC,(function(t){var o="1.9.4";function l(r){var a,d,m,w;for(d=1,m=arguments.length;d<m;d++){w=arguments[d];for(a in w)r[a]=w[a]}return r}var c=Object.create||(function(){function r(){}return function(a){return r.prototype=a,new r}})();function p(r,a){var d=Array.prototype.slice;if(r.bind)return r.bind.apply(r,d.call(arguments,1));var m=d.call(arguments,2);return function(){return r.apply(a,m.length?m.concat(d.call(arguments)):arguments)}}var v=0;function E(r){return"_leaflet_id"in r||(r._leaflet_id=++v),r._leaflet_id}function I(r,a,d){var m,w,P,D;return D=function(){m=!1,w&&(P.apply(d,w),w=!1)},P=function(){m?w=arguments:(r.apply(d,arguments),setTimeout(D,a),m=!0)},P}function C(r,a,d){var m=a[1],w=a[0],P=m-w;return r===m&&d?r:((r-w)%P+P)%P+w}function k(){return!1}function R(r,a){if(a===!1)return r;var d=Math.pow(10,a===void 0?6:a);return Math.round(r*d)/d}function Z(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function ee(r){return Z(r).split(/\s+/)}function Y(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?c(r.options):{});for(var d in a)r.options[d]=a[d];return r.options}function le(r,a,d){var m=[];for(var w in r)m.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(r[w]));return(!a||a.indexOf("?")===-1?"?":"&")+m.join("&")}var Ve=/\{ *([\w_ -]+) *\}/g;function Re(r,a){return r.replace(Ve,function(d,m){var w=a[m];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(a)),w})}var De=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function et(r,a){for(var d=0;d<r.length;d++)if(r[d]===a)return d;return-1}var ct="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $e(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var F=0;function N(r){var a=+new Date,d=Math.max(0,16-(a-F));return F=a+d,window.setTimeout(r,d)}var M=window.requestAnimationFrame||$e("RequestAnimationFrame")||N,B=window.cancelAnimationFrame||$e("CancelAnimationFrame")||$e("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function b(r,a,d){if(d&&M===N)r.call(a);else return M.call(window,p(r,a))}function j(r){r&&B.call(window,r)}var O={__proto__:null,extend:l,create:c,bind:p,get lastId(){return v},stamp:E,throttle:I,wrapNum:C,falseFn:k,formatNum:R,trim:Z,splitWords:ee,setOptions:Y,getParamString:le,template:Re,isArray:De,indexOf:et,emptyImageUrl:ct,requestFn:M,cancelFn:B,requestAnimFrame:b,cancelAnimFrame:j};function Qe(){}Qe.extend=function(r){var a=function(){Y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=a.__super__=this.prototype,m=c(d);m.constructor=a,a.prototype=m;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(a[w]=this[w]);return r.statics&&l(a,r.statics),r.includes&&(Vt(r.includes),l.apply(null,[m].concat(r.includes))),l(m,r),delete m.statics,delete m.includes,m.options&&(m.options=d.options?c(d.options):{},l(m.options,r.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,D=m._initHooks.length;P<D;P++)m._initHooks[P].call(this)}},a},Qe.include=function(r){var a=this.prototype.options;return l(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Qe.mergeOptions=function(r){return l(this.prototype.options,r),this},Qe.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),d=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Vt(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=De(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ht={on:function(r,a,d){if(typeof r=="object")for(var m in r)this._on(m,r[m],a);else{r=ee(r);for(var w=0,P=r.length;w<P;w++)this._on(r[w],a,d)}return this},off:function(r,a,d){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var m in r)this._off(m,r[m],a);else{r=ee(r);for(var w=arguments.length===1,P=0,D=r.length;P<D;P++)w?this._off(r[P]):this._off(r[P],a,d)}return this},_on:function(r,a,d,m){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,d)===!1){d===this&&(d=void 0);var w={fn:a,ctx:d};m&&(w.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(w)}},_off:function(r,a,d){var m,w,P;if(this._events&&(m=this._events[r],!!m)){if(arguments.length===1){if(this._firingCount)for(w=0,P=m.length;w<P;w++)m[w].fn=k;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var D=this._listens(r,a,d);if(D!==!1){var W=m[D];this._firingCount&&(W.fn=k,this._events[r]=m=m.slice()),m.splice(D,1)}}},fire:function(r,a,d){if(!this.listens(r,d))return this;var m=l({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var w=this._events[r];if(w){this._firingCount=this._firingCount+1||1;for(var P=0,D=w.length;P<D;P++){var W=w[P],$=W.fn;W.once&&this.off(r,$,W.ctx),$.call(W.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(r,a,d,m){typeof r!="string"&&console.warn('"string" type argument expected');var w=a;typeof a!="function"&&(m=!!a,w=void 0,d=void 0);var P=this._events&&this._events[r];if(P&&P.length&&this._listens(r,w,d)!==!1)return!0;if(m){for(var D in this._eventParents)if(this._eventParents[D].listens(r,a,d,m))return!0}return!1},_listens:function(r,a,d){if(!this._events)return!1;var m=this._events[r]||[];if(!a)return!!m.length;d===this&&(d=void 0);for(var w=0,P=m.length;w<P;w++)if(m[w].fn===a&&m[w].ctx===d)return w;return!1},once:function(r,a,d){if(typeof r=="object")for(var m in r)this._on(m,r[m],a,!0);else{r=ee(r);for(var w=0,P=r.length;w<P;w++)this._on(r[w],a,d,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[E(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[E(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,l({layer:r.target,propagatedFrom:r.target},r),!0)}};ht.addEventListener=ht.on,ht.removeEventListener=ht.clearAllEventListeners=ht.off,ht.addOneTimeEventListener=ht.once,ht.fireEvent=ht.fire,ht.hasEventListeners=ht.listens;var dt=Qe.extend(ht);function J(r,a,d){this.x=d?Math.round(r):r,this.y=d?Math.round(a):a}var Pe=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(r){return this.clone()._add(ne(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(ne(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new J(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new J(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Pe(this.x),this.y=Pe(this.y),this},distanceTo:function(r){r=ne(r);var a=r.x-this.x,d=r.y-this.y;return Math.sqrt(a*a+d*d)},equals:function(r){return r=ne(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=ne(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+R(this.x)+", "+R(this.y)+")"}};function ne(r,a,d){return r instanceof J?r:De(r)?new J(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new J(r.x,r.y):new J(r,a,d)}function z(r,a){if(r)for(var d=a?[r,a]:r,m=0,w=d.length;m<w;m++)this.extend(d[m])}z.prototype={extend:function(r){var a,d;if(!r)return this;if(r instanceof J||typeof r[0]=="number"||"x"in r)a=d=ne(r);else if(r=X(r),a=r.min,d=r.max,!a||!d)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=d.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(r){return ne((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return ne(this.min.x,this.max.y)},getTopRight:function(){return ne(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,d;return typeof r[0]=="number"||r instanceof J?r=ne(r):r=X(r),r instanceof z?(a=r.min,d=r.max):a=d=r,a.x>=this.min.x&&d.x<=this.max.x&&a.y>=this.min.y&&d.y<=this.max.y},intersects:function(r){r=X(r);var a=this.min,d=this.max,m=r.min,w=r.max,P=w.x>=a.x&&m.x<=d.x,D=w.y>=a.y&&m.y<=d.y;return P&&D},overlaps:function(r){r=X(r);var a=this.min,d=this.max,m=r.min,w=r.max,P=w.x>a.x&&m.x<d.x,D=w.y>a.y&&m.y<d.y;return P&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,d=this.max,m=Math.abs(a.x-d.x)*r,w=Math.abs(a.y-d.y)*r;return X(ne(a.x-m,a.y-w),ne(d.x+m,d.y+w))},equals:function(r){return r?(r=X(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function X(r,a){return!r||r instanceof z?r:new z(r,a)}function Ae(r,a){if(r)for(var d=a?[r,a]:r,m=0,w=d.length;m<w;m++)this.extend(d[m])}Ae.prototype={extend:function(r){var a=this._southWest,d=this._northEast,m,w;if(r instanceof we)m=r,w=r;else if(r instanceof Ae){if(m=r._southWest,w=r._northEast,!m||!w)return this}else return r?this.extend(pe(r)||Te(r)):this;return!a&&!d?(this._southWest=new we(m.lat,m.lng),this._northEast=new we(w.lat,w.lng)):(a.lat=Math.min(m.lat,a.lat),a.lng=Math.min(m.lng,a.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(r){var a=this._southWest,d=this._northEast,m=Math.abs(a.lat-d.lat)*r,w=Math.abs(a.lng-d.lng)*r;return new Ae(new we(a.lat-m,a.lng-w),new we(d.lat+m,d.lng+w))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof we||"lat"in r?r=pe(r):r=Te(r);var a=this._southWest,d=this._northEast,m,w;return r instanceof Ae?(m=r.getSouthWest(),w=r.getNorthEast()):m=w=r,m.lat>=a.lat&&w.lat<=d.lat&&m.lng>=a.lng&&w.lng<=d.lng},intersects:function(r){r=Te(r);var a=this._southWest,d=this._northEast,m=r.getSouthWest(),w=r.getNorthEast(),P=w.lat>=a.lat&&m.lat<=d.lat,D=w.lng>=a.lng&&m.lng<=d.lng;return P&&D},overlaps:function(r){r=Te(r);var a=this._southWest,d=this._northEast,m=r.getSouthWest(),w=r.getNorthEast(),P=w.lat>a.lat&&m.lat<d.lat,D=w.lng>a.lng&&m.lng<d.lng;return P&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Te(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Te(r,a){return r instanceof Ae?r:new Ae(r,a)}function we(r,a,d){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,d!==void 0&&(this.alt=+d)}we.prototype={equals:function(r,a){if(!r)return!1;r=pe(r);var d=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return d<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+R(this.lat,r)+", "+R(this.lng,r)+")"},distanceTo:function(r){return He.distance(this,pe(r))},wrap:function(){return He.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,d=a/Math.cos(Math.PI/180*this.lat);return Te([this.lat-a,this.lng-d],[this.lat+a,this.lng+d])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function pe(r,a,d){return r instanceof we?r:De(r)&&typeof r[0]!="object"?r.length===3?new we(r[0],r[1],r[2]):r.length===2?new we(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new we(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new we(r,a,d)}var Ze={latLngToPoint:function(r,a){var d=this.projection.project(r),m=this.scale(a);return this.transformation._transform(d,m)},pointToLatLng:function(r,a){var d=this.scale(a),m=this.transformation.untransform(r,d);return this.projection.unproject(m)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,d=this.scale(r),m=this.transformation.transform(a.min,d),w=this.transformation.transform(a.max,d);return new z(m,w)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?C(r.lng,this.wrapLng,!0):r.lng,d=this.wrapLat?C(r.lat,this.wrapLat,!0):r.lat,m=r.alt;return new we(d,a,m)},wrapLatLngBounds:function(r){var a=r.getCenter(),d=this.wrapLatLng(a),m=a.lat-d.lat,w=a.lng-d.lng;if(m===0&&w===0)return r;var P=r.getSouthWest(),D=r.getNorthEast(),W=new we(P.lat-m,P.lng-w),$=new we(D.lat-m,D.lng-w);return new Ae(W,$)}},He=l({},Ze,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var d=Math.PI/180,m=r.lat*d,w=a.lat*d,P=Math.sin((a.lat-r.lat)*d/2),D=Math.sin((a.lng-r.lng)*d/2),W=P*P+Math.cos(m)*Math.cos(w)*D*D,$=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*$}}),ft=6378137,Gt={R:ft,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,r.lat),-d),w=Math.sin(m*a);return new J(this.R*r.lng*a,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(r){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:(function(){var r=ft*Math.PI;return new z([-r,-r],[r,r])})()};function oi(r,a,d,m){if(De(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=d,this._d=m}oi.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new J((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Br(r,a,d,m){return new oi(r,a,d,m)}var hr=l({},He,{code:"EPSG:3857",projection:Gt,transformation:(function(){var r=.5/(Math.PI*Gt.R);return Br(r,.5,-r,.5)})()}),Cs=l({},hr,{code:"EPSG:900913"});function bo(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function zi(r,a){var d="",m,w,P,D,W,$;for(m=0,P=r.length;m<P;m++){for(W=r[m],w=0,D=W.length;w<D;w++)$=W[w],d+=(w?"L":"M")+$.x+" "+$.y;d+=a?ye.svg?"z":"x":""}return d||"M0 0"}var jr=document.documentElement.style,ai="ActiveXObject"in window,Nt=ai&&!document.addEventListener,St="msLaunchUri"in navigator&&!("documentMode"in document),Rn=Ft("webkit"),Rs=Ft("android"),ks=Ft("android 2")||Ft("android 3"),Ra=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),li=Rs&&Ft("Google")&&Ra<537&&!("AudioNode"in window),Ui=!!window.opera,Bi=!St&&Ft("chrome"),Hr=Ft("gecko")&&!Rn&&!Ui&&!ai,ka=!Bi&&Ft("safari"),ui=Ft("phantom"),Wr="OTransition"in jr,xa=navigator.platform.indexOf("Win")===0,qr=ai&&"transition"in jr,ci="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ks,xs="MozPerspective"in jr,er=!window.L_DISABLE_3D&&(qr||ci||xs)&&!Wr&&!ui,dr=typeof orientation<"u"||Ft("mobile"),hi=dr&&Rn,Ls=dr&&ci,fr=!window.PointerEvent&&window.MSPointerEvent,pr=!!(window.PointerEvent||fr),Et="ontouchstart"in window||!!window.TouchEvent,Vo=!window.L_NO_TOUCH&&(Et||pr),di=dr&&Ui,fi=dr&&Hr,La=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Na=(function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",k,a),window.removeEventListener("testPassiveEventSupport",k,a)}catch{}return r})(),mr=(function(){return!!document.createElement("canvas").getContext})(),Ns=!!(document.createElementNS&&bo("svg").createSVGRect),ji=!!Ns&&(function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),pi=!Ns&&(function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}})(),mi=navigator.platform.indexOf("Mac")===0,Oa=navigator.platform.indexOf("Linux")===0;function Ft(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ye={ie:ai,ielt9:Nt,edge:St,webkit:Rn,android:Rs,android23:ks,androidStock:li,opera:Ui,chrome:Bi,gecko:Hr,safari:ka,phantom:ui,opera12:Wr,win:xa,ie3d:qr,webkit3d:ci,gecko3d:xs,any3d:er,mobile:dr,mobileWebkit:hi,mobileWebkit3d:Ls,msPointer:fr,pointer:pr,touch:Vo,touchNative:Et,mobileOpera:di,mobileGecko:fi,retina:La,passiveEvents:Na,canvas:mr,svg:Ns,vml:pi,inlineSvg:ji,mac:mi,linux:Oa},Hi=ye.msPointer?"MSPointerDown":"pointerdown",kn=ye.msPointer?"MSPointerMove":"pointermove",Fo=ye.msPointer?"MSPointerUp":"pointerup",zo=ye.msPointer?"MSPointerCancel":"pointercancel",Wi={touchstart:Hi,touchmove:kn,touchend:Fo,touchcancel:zo},Un={touchstart:_t,touchmove:Bn,touchend:Bn,touchcancel:Bn},gr={},Uo=!1;function Da(r,a,d){return a==="touchstart"&&Zi(),Un[a]?(d=Un[a].bind(this,d),r.addEventListener(Wi[a],d,!1),d):(console.warn("wrong event specified:",a),k)}function Ma(r,a,d){if(!Wi[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Wi[a],d,!1)}function qi(r){gr[r.pointerId]=r}function Bo(r){gr[r.pointerId]&&(gr[r.pointerId]=r)}function Gi(r){delete gr[r.pointerId]}function Zi(){Uo||(document.addEventListener(Hi,qi,!0),document.addEventListener(kn,Bo,!0),document.addEventListener(Fo,Gi,!0),document.addEventListener(zo,Gi,!0),Uo=!0)}function Bn(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var d in gr)a.touches.push(gr[d]);a.changedTouches=[a],r(a)}}function _t(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&yt(a),Bn(r,a)}function Ml(r){var a={},d,m;for(m in r)d=r[m],a[m]=d&&d.bind?d.bind(r):d;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Os=200;function jo(r,a){r.addEventListener("dblclick",a);var d=0,m;function w(P){if(P.detail!==1){m=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var D=Er(P);if(!(D.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!D.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var W=Date.now();W-d<=Os?(m++,m===2&&a(Ml(P))):m=1,d=W}}}return r.addEventListener("click",w),{dblclick:a,simDblclick:w}}function Ki(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var $i=yi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),_r=yi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gi=_r==="webkitTransition"||_r==="OTransition"?_r+"End":"transitionend";function pn(r){return typeof r=="string"?document.getElementById(r):r}function _i(r,a){var d=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(r,null);d=m?m[a]:null}return d==="auto"?null:d}function ze(r,a,d){var m=document.createElement(r);return m.className=a||"",d&&d.appendChild(m),m}function nt(r){var a=r.parentNode;a&&a.removeChild(r)}function on(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function jn(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function an(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function yr(r,a){if(r.classList!==void 0)return r.classList.contains(a);var d=vr(r);return d.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(d)}function fe(r,a){if(r.classList!==void 0)for(var d=ee(a),m=0,w=d.length;m<w;m++)r.classList.add(d[m]);else if(!yr(r,a)){var P=vr(r);Gr(r,(P?P+" ":"")+a)}}function lt(r,a){r.classList!==void 0?r.classList.remove(a):Gr(r,Z((" "+vr(r)+" ").replace(" "+a+" "," ")))}function Gr(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function vr(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Xt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Ho(r,a)}function Ho(r,a){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=r.filters.item(m)}catch{if(a===1)return}a=Math.round(a*100),d?(d.Enabled=a!==100,d.Opacity=a):r.style.filter+=" progid:"+m+"(opacity="+a+")"}function yi(r){for(var a=document.documentElement.style,d=0;d<r.length;d++)if(r[d]in a)return r[d];return!1}function xn(r,a,d){var m=a||new J(0,0);r.style[$i]=(ye.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function Pt(r,a){r._leaflet_pos=a,ye.any3d?xn(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function tr(r){return r._leaflet_pos||new J(0,0)}var qe,mn,Qi;if("onselectstart"in document)qe=function(){xe(window,"selectstart",yt)},mn=function(){ut(window,"selectstart",yt)};else{var wr=yi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qe=function(){if(wr){var r=document.documentElement.style;Qi=r[wr],r[wr]="none"}},mn=function(){wr&&(document.documentElement.style[wr]=Qi,Qi=void 0)}}function Yi(){xe(window,"dragstart",yt)}function Ji(){ut(window,"dragstart",yt)}var vi,Hn;function wi(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Ln(),vi=r,Hn=r.style.outlineStyle,r.style.outlineStyle="none",xe(window,"keydown",Ln))}function Ln(){vi&&(vi.style.outlineStyle=Hn,vi=void 0,Hn=void 0,ut(window,"keydown",Ln))}function nr(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Dt(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Xi={__proto__:null,TRANSFORM:$i,TRANSITION:_r,TRANSITION_END:gi,get:pn,getStyle:_i,create:ze,remove:nt,empty:on,toFront:jn,toBack:an,hasClass:yr,addClass:fe,removeClass:lt,setClass:Gr,getClass:vr,setOpacity:Xt,testProp:yi,setTransform:xn,setPosition:Pt,getPosition:tr,get disableTextSelection(){return qe},get enableTextSelection(){return mn},disableImageDrag:Yi,enableImageDrag:Ji,preventOutline:wi,restoreOutline:Ln,getSizedParentNode:nr,getScale:Dt};function xe(r,a,d,m){if(a&&typeof a=="object")for(var w in a)Ds(r,w,a[w],d);else{a=ee(a);for(var P=0,D=a.length;P<D;P++)Ds(r,a[P],d,m)}return this}var At="_leaflet_events";function ut(r,a,d,m){if(arguments.length===1)Zr(r),delete r[At];else if(a&&typeof a=="object")for(var w in a)Ei(r,w,a[w],d);else if(a=ee(a),arguments.length===2)Zr(r,function(W){return et(a,W)!==-1});else for(var P=0,D=a.length;P<D;P++)Ei(r,a[P],d,m);return this}function Zr(r,a){for(var d in r[At]){var m=d.split(/\d/)[0];(!a||a(m))&&Ei(r,m,null,null,d)}}var Nn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ds(r,a,d,m){var w=a+E(d)+(m?"_"+E(m):"");if(r[At]&&r[At][w])return this;var P=function(W){return d.call(m||r,W||window.event)},D=P;!ye.touchNative&&ye.pointer&&a.indexOf("touch")===0?P=Da(r,a,P):ye.touch&&a==="dblclick"?P=jo(r,P):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(Nn[a]||a,P,ye.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(P=function(W){W=W||window.event,ts(r,W)&&D(W)},r.addEventListener(Nn[a],P,!1)):r.addEventListener(a,D,!1):r.attachEvent("on"+a,P),r[At]=r[At]||{},r[At][w]=P}function Ei(r,a,d,m,w){w=w||a+E(d)+(m?"_"+E(m):"");var P=r[At]&&r[At][w];if(!P)return this;!ye.touchNative&&ye.pointer&&a.indexOf("touch")===0?Ma(r,a,P):ye.touch&&a==="dblclick"?Ki(r,P):"removeEventListener"in r?r.removeEventListener(Nn[a]||a,P,!1):r.detachEvent("on"+a,P),r[At][w]=null}function tt(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Ms(r){return Ds(r,"wheel",tt),this}function es(r){return xe(r,"mousedown touchstart dblclick contextmenu",tt),r._leaflet_disable_click=!0,this}function yt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function gn(r){return yt(r),tt(r),this}function Er(r){if(r.composedPath)return r.composedPath();for(var a=[],d=r.target;d;)a.push(d),d=d.parentNode;return a}function Tr(r,a){if(!a)return new J(r.clientX,r.clientY);var d=Dt(a),m=d.boundingClientRect;return new J((r.clientX-m.left)/d.x-a.clientLeft,(r.clientY-m.top)/d.y-a.clientTop)}var Ir=ye.linux&&ye.chrome?window.devicePixelRatio:ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Wo(r){return ye.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Ir:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ts(r,a){var d=a.relatedTarget;if(!d)return!0;try{for(;d&&d!==r;)d=d.parentNode}catch{return!1}return d!==r}var Sr={__proto__:null,on:xe,off:ut,stopPropagation:tt,disableScrollPropagation:Ms,disableClickPropagation:es,preventDefault:yt,stop:gn,getPropagationPath:Er,getMousePosition:Tr,getWheelDelta:Wo,isExternalTarget:ts,addListener:xe,removeListener:ut},ns=dt.extend({run:function(r,a,d,m){this.stop(),this._el=r,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=tr(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=b(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,d=this._duration*1e3;a<d?this._runFrame(this._easeOut(a/d),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var d=this._startPos.add(this._offset.multiplyBy(r));a&&d._round(),Pt(this._el,d),this.fire("step")},_complete:function(){j(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ge=dt.extend({options:{crs:hr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=Y(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(pe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=_r&&ye.any3d&&!ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),xe(this._proxy,gi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,d){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(pe(r),a,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=l({animate:d.animate},d.zoom),d.pan=l({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,d.zoom):this._tryAnimatedPan(r,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,d.pan&&d.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,d){var m=this.getZoomScale(a),w=this.getSize().divideBy(2),P=r instanceof J?r:this.latLngToContainerPoint(r),D=P.subtract(w).multiplyBy(1-1/m),W=this.containerPointToLatLng(w.add(D));return this.setView(W,a,{zoom:d})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Te(r);var d=ne(a.paddingTopLeft||a.padding||[0,0]),m=ne(a.paddingBottomRight||a.padding||[0,0]),w=this.getBoundsZoom(r,!1,d.add(m));if(w=typeof a.maxZoom=="number"?Math.min(a.maxZoom,w):w,w===1/0)return{center:r.getCenter(),zoom:w};var P=m.subtract(d).divideBy(2),D=this.project(r.getSouthWest(),w),W=this.project(r.getNorthEast(),w),$=this.unproject(D.add(W).divideBy(2).add(P),w);return{center:$,zoom:w}},fitBounds:function(r,a){if(r=Te(r),!r.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(r,a);return this.setView(d.center,d.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=ne(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ns,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){fe(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,d,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,d){if(d=d||{},d.animate===!1||!ye.any3d)return this.setView(r,a,d);this._stop();var m=this.project(this.getCenter()),w=this.project(r),P=this.getSize(),D=this._zoom;r=pe(r),a=a===void 0?D:a;var W=Math.max(P.x,P.y),$=W*this.getZoomScale(D,a),ie=w.distanceTo(m)||1,de=1.42,ke=de*de;function We(pt){var eo=pt?-1:1,ed=pt?$:W,td=$*$-W*W+eo*ke*ke*ie*ie,ls=2*ed*ke*ie,us=td/ls,cs=Math.sqrt(us*us+1)-us,Za=cs<1e-9?-18:Math.log(cs);return Za}function Kt(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function Ut(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function Vn(pt){return Kt(pt)/Ut(pt)}var vn=We(0);function Js(pt){return W*(Ut(vn)/Ut(vn+de*pt))}function Zl(pt){return W*(Ut(vn)*Vn(vn+de*pt)-Kt(vn))/ke}function Ri(pt){return 1-Math.pow(1-pt,1.5)}var ic=Date.now(),as=(We(1)-vn)/de,Lr=d.duration?1e3*d.duration:1e3*as*.8;function Xs(){var pt=(Date.now()-ic)/Lr,eo=Ri(pt)*as;pt<=1?(this._flyToFrame=b(Xs,this),this._move(this.unproject(m.add(w.subtract(m).multiplyBy(Zl(eo)/ie)),D),this.getScaleZoom(W/Js(eo),D),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Xs.call(this),this},flyToBounds:function(r,a){var d=this._getBoundsCenterZoom(r,a);return this.flyTo(d.center,d.zoom,a)},setMaxBounds:function(r){return r=Te(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,Te(r));return d.equals(m)||this.panTo(m,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var d=ne(a.paddingTopLeft||a.padding||[0,0]),m=ne(a.paddingBottomRight||a.padding||[0,0]),w=this.project(this.getCenter()),P=this.project(r),D=this.getPixelBounds(),W=X([D.min.add(d),D.max.subtract(m)]),$=W.getSize();if(!W.contains(P)){this._enforcingBounds=!0;var ie=P.subtract(W.getCenter()),de=W.extend(P).getSize().subtract($);w.x+=ie.x<0?-de.x:de.x,w.y+=ie.y<0?-de.y:de.y,this.panTo(this.unproject(w),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=l({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=a.divideBy(2).round(),w=d.divideBy(2).round(),P=m.subtract(w);return!P.x&&!P.y?this:(r.animate&&r.pan?this.panBy(P):(r.pan&&this._rawPanBy(P),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=l({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=p(this._handleGeolocationResponse,this),d=p(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,d,r):navigator.geolocation.getCurrentPosition(a,d,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,d=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,d=r.coords.longitude,m=new we(a,d),w=m.toBounds(r.coords.accuracy*2),P=this._locateOptions;if(P.setView){var D=this.getBoundsZoom(w);this.setView(m,P.maxZoom?Math.min(D,P.maxZoom):D)}var W={latlng:m,bounds:w,timestamp:r.timestamp};for(var $ in r.coords)typeof r.coords[$]=="number"&&(W[$]=r.coords[$]);this.fire("locationfound",W)}},addHandler:function(r,a){if(!a)return this;var d=this[r]=new a(this);return this._handlers.push(d),this.options[r]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),nt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(j(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)nt(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var d="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),m=ze("div",d,a||this._mapPane);return r&&(this._panes[r]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),d=this.unproject(r.getTopRight());return new Ae(a,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,d){r=Te(r),d=ne(d||[0,0]);var m=this.getZoom()||0,w=this.getMinZoom(),P=this.getMaxZoom(),D=r.getNorthWest(),W=r.getSouthEast(),$=this.getSize().subtract(d),ie=X(this.project(W,m),this.project(D,m)).getSize(),de=ye.any3d?this.options.zoomSnap:1,ke=$.x/ie.x,We=$.y/ie.y,Kt=a?Math.max(ke,We):Math.min(ke,We);return m=this.getScaleZoom(Kt,m),de&&(m=Math.round(m/(de/100))*(de/100),m=a?Math.ceil(m/de)*de:Math.floor(m/de)*de),Math.max(w,Math.min(P,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var d=this._getTopLeftPoint(r,a);return new z(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var d=this.options.crs;return a=a===void 0?this._zoom:a,d.scale(r)/d.scale(a)},getScaleZoom:function(r,a){var d=this.options.crs;a=a===void 0?this._zoom:a;var m=d.zoom(r*d.scale(a));return isNaN(m)?1/0:m},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(pe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(ne(r),a)},layerPointToLatLng:function(r){var a=ne(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(pe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(pe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Te(r))},distance:function(r,a){return this.options.crs.distance(pe(r),pe(a))},containerPointToLayerPoint:function(r){return ne(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return ne(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(ne(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(r)))},mouseEventToContainerPoint:function(r){return Tr(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=pn(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");xe(a,"scroll",this._onScroll,this),this._containerId=E(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ye.any3d,fe(r,"leaflet-container"+(ye.touch?" leaflet-touch":"")+(ye.retina?" leaflet-retina":"")+(ye.ielt9?" leaflet-oldie":"")+(ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=_i(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pt(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fe(r.markerPane,"leaflet-zoom-hide"),fe(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,d){Pt(this._mapPane,new J(0,0));var m=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var w=this._zoom!==a;this._moveStart(w,d)._move(r,a)._moveEnd(w),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,d,m){a===void 0&&(a=this._zoom);var w=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),m?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return j(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Pt(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[E(this._container)]=this;var a=r?ut:xe;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ye.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){j(this._resizeRequest),this._resizeRequest=b(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var d=[],m,w=a==="mouseout"||a==="mouseover",P=r.target||r.srcElement,D=!1;P;){if(m=this._targets[E(P)],m&&(a==="click"||a==="preclick")&&this._draggableMoved(m)){D=!0;break}if(m&&m.listens(a,!0)&&(w&&!ts(P,r)||(d.push(m),w))||P===this._container)break;P=P.parentNode}return!d.length&&!D&&!w&&this.listens(a,!0)&&(d=[this]),d},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var d=r.type;d==="mousedown"&&wi(a),this._fireDOMEvent(r,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,d){if(r.type==="click"){var m=l({},r);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var w=this._findEventTargets(r,a);if(d){for(var P=[],D=0;D<d.length;D++)d[D].listens(a,!0)&&P.push(d[D]);w=P.concat(w)}if(w.length){a==="contextmenu"&&yt(r);var W=w[0],$={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var ie=W.getLatLng&&(!W._radius||W._radius<=10);$.containerPoint=ie?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(r),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=ie?W.getLatLng():this.layerPointToLatLng($.layerPoint)}for(D=0;D<w.length;D++)if(w[D].fire(a,$,!0),$.originalEvent._stopped||w[D].options.bubblingMouseEvents===!1&&et(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return tr(this._mapPane)||new J(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var d=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var d=this.getSize()._divideBy(2);return this.project(r,a)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,d){var m=this._getNewPixelOrigin(d,a);return this.project(r,a)._subtract(m)},_latLngBoundsToNewLayerBounds:function(r,a,d){var m=this._getNewPixelOrigin(d,a);return X([this.project(r.getSouthWest(),a)._subtract(m),this.project(r.getNorthWest(),a)._subtract(m),this.project(r.getSouthEast(),a)._subtract(m),this.project(r.getNorthEast(),a)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,d){if(!d)return r;var m=this.project(r,a),w=this.getSize().divideBy(2),P=new z(m.subtract(w),m.add(w)),D=this._getBoundsOffset(P,d,a);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?r:this.unproject(m.add(D),a)},_limitOffset:function(r,a){if(!a)return r;var d=this.getPixelBounds(),m=new z(d.min.add(r),d.max.add(r));return r.add(this._getBoundsOffset(m,a))},_getBoundsOffset:function(r,a,d){var m=X(this.project(a.getNorthEast(),d),this.project(a.getSouthWest(),d)),w=m.min.subtract(r.min),P=m.max.subtract(r.max),D=this._rebound(w.x,-P.x),W=this._rebound(w.y,-P.y);return new J(D,W)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),d=this.getMaxZoom(),m=ye.any3d?this.options.zoomSnap:1;return m&&(r=Math.round(r/m)*m),Math.max(a,Math.min(d,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){lt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var d=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,a),!0)},_createAnimProxy:function(){var r=this._proxy=ze("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var d=$i,m=this._proxy.style[d];xn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){nt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();xn(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(a),w=this._getCenterOffset(r)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(w)?!1:(b(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&lt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function On(r,a){return new Ge(r,a)}var en=Qe.extend({options:{position:"topright"},initialize:function(r){Y(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),d=this.getPosition(),m=r._controlCorners[d];return fe(a,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(a,m.firstChild):m.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(nt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Dn=function(r){return new en(r)};Ge.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",d=this._controlContainer=ze("div",a+"control-container",this._container);function m(w,P){var D=a+w+" "+a+P;r[w+P]=ze("div",D,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)nt(this._controlCorners[r]);nt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var qo=en.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,d,m){return d<m?-1:m<d?1:0}},initialize:function(r,a,d){Y(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in r)this._addLayer(r[m],m);for(m in a)this._addLayer(a[m],m,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return en.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(E(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):lt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return lt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=ze("div",r),d=this.options.collapsed;a.setAttribute("aria-haspopup",!0),es(a),Ms(a);var m=this._section=ze("section",r+"-list");d&&(this._map.on("click",this.collapse,this),xe(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=ze("a",r+"-toggle",a);w.href="#",w.title="Layers",w.setAttribute("role","button"),xe(w,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){yt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=ze("div",r+"-base",m),this._separator=ze("div",r+"-separator",m),this._overlaysList=ze("div",r+"-overlays",m),a.appendChild(m)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&E(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,d){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:d}),this.options.sortLayers&&this._layers.sort(p(function(m,w){return this.options.sortFunction(m.layer,w.layer,m.name,w.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;on(this._baseLayersList),on(this._overlaysList),this._layerControlInputs=[];var r,a,d,m,w=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),a=a||m.overlay,r=r||!m.overlay,w+=m.overlay?0:1;return this.options.hideSingleBase&&(r=r&&w>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(E(r.target)),d=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;d&&this._map.fire(d,a)},_createRadioElement:function(r,a){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(r){var a=document.createElement("label"),d=this._map.hasLayer(r.layer),m;r.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+E(this),d),this._layerControlInputs.push(m),m.layerId=E(r.layer),xe(m,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+r.name;var P=document.createElement("span");a.appendChild(P),P.appendChild(m),P.appendChild(w);var D=r.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,d,m=[],w=[];this._handlingClick=!0;for(var P=r.length-1;P>=0;P--)a=r[P],d=this._getLayer(a.layerId).layer,a.checked?m.push(d):a.checked||w.push(d);for(P=0;P<w.length;P++)this._map.hasLayer(w[P])&&this._map.removeLayer(w[P]);for(P=0;P<m.length;P++)this._map.hasLayer(m[P])||this._map.addLayer(m[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,d,m=this._map.getZoom(),w=r.length-1;w>=0;w--)a=r[w],d=this._getLayer(a.layerId).layer,a.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,xe(r,"click",yt),this.expand();var a=this;setTimeout(function(){ut(r,"click",yt),a._preventClick=!1})}}),rs=function(r,a,d){return new qo(r,a,d)},Wn=en.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",d=ze("div",a+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,a+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,a+"-out",d,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,d,m,w){var P=ze("a",d,m);return P.innerHTML=r,P.href="#",P.title=a,P.setAttribute("role","button"),P.setAttribute("aria-label",a),es(P),xe(P,"click",gn),xe(P,"click",w,this),xe(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";lt(this._zoomInButton,a),lt(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(fe(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(fe(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ge.mergeOptions({zoomControl:!0}),Ge.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Wn,this.addControl(this.zoomControl))});var Go=function(r){return new Wn(r)},Zt=en.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",d=ze("div",a),m=this.options;return this._addScales(m,a+"-line",d),r.on(m.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),d},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,d){r.metric&&(this._mScale=ze("div",a,d)),r.imperial&&(this._iScale=ze("div",a,d))},_update:function(){var r=this._map,a=r.getSize().y/2,d=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(d)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),d=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,d,a/r)},_updateImperial:function(r){var a=r*3.2808399,d,m,w;a>5280?(d=a/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(w=this._getRoundNum(a),this._updateScale(this._iScale,w+" ft",w/a))},_updateScale:function(r,a,d){r.style.width=Math.round(this.options.maxWidth*d)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),d=r/a;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,a*d}}),Pr=function(r){return new Zt(r)},is='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ar=en.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ye.inlineSvg?is+" ":"")+"Leaflet</a>"},initialize:function(r){Y(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=ze("div","leaflet-control-attribution"),es(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var d=[];this.options.prefix&&d.push(this.options.prefix),r.length&&d.push(r.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ge.mergeOptions({attributionControl:!0}),Ge.addInitHook(function(){this.options.attributionControl&&new Ar().addTo(this)});var bs=function(r){return new Ar(r)};en.Layers=qo,en.Zoom=Wn,en.Scale=Zt,en.Attribution=Ar,Dn.layers=rs,Dn.zoom=Go,Dn.scale=Pr,Dn.attribution=bs;var ln=Qe.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ln.addTo=function(r,a){return r.addHandler(a,this),this};var Vs={Events:ht},_n=ye.touch?"touchstart mousedown":"mousedown",yn=dt.extend({options:{clickTolerance:3},initialize:function(r,a,d,m){Y(this,m),this._element=r,this._dragStartTarget=a||r,this._preventOutline=d},enable:function(){this._enabled||(xe(this._dragStartTarget,_n,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yn._dragging===this&&this.finishDrag(!0),ut(this._dragStartTarget,_n,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!yr(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){yn._dragging===this&&this.finishDrag();return}if(!(yn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(yn._dragging=this,this._preventOutline&&wi(this._element),Yi(),qe(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,d=nr(this._element);this._startPoint=new J(a.clientX,a.clientY),this._startPos=tr(this._element),this._parentScale=Dt(d);var m=r.type==="mousedown";xe(document,m?"mousemove":"touchmove",this._onMove,this),xe(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,d=new J(a.clientX,a.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,yt(r),this._moved||(this.fire("dragstart"),this._moved=!0,fe(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Pt(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){lt(document.body,"leaflet-dragging"),this._lastTarget&&(lt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ut(document,"mousemove touchmove",this._onMove,this),ut(document,"mouseup touchend touchcancel",this._onUp,this),Ji(),mn();var a=this._moved&&this._moving;this._moving=!1,yn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Fs(r,a,d){var m,w=[1,4,2,8],P,D,W,$,ie,de,ke,We;for(P=0,de=r.length;P<de;P++)r[P]._code=K(r[P],a);for(W=0;W<4;W++){for(ke=w[W],m=[],P=0,de=r.length,D=de-1;P<de;D=P++)$=r[P],ie=r[D],$._code&ke?ie._code&ke||(We=H(ie,$,ke,a,d),We._code=K(We,a),m.push(We)):(ie._code&ke&&(We=H(ie,$,ke,a,d),We._code=K(We,a),m.push(We)),m.push($));r=m}return r}function Zo(r,a){var d,m,w,P,D,W,$,ie,de;if(!r||r.length===0)throw new Error("latlngs not passed");rt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ke=pe([0,0]),We=Te(r),Kt=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());Kt<1700&&(ke=zs(r));var Ut=r.length,Vn=[];for(d=0;d<Ut;d++){var vn=pe(r[d]);Vn.push(a.project(pe([vn.lat-ke.lat,vn.lng-ke.lng])))}for(W=$=ie=0,d=0,m=Ut-1;d<Ut;m=d++)w=Vn[d],P=Vn[m],D=w.y*P.x-P.y*w.x,$+=(w.x+P.x)*D,ie+=(w.y+P.y)*D,W+=D*3;W===0?de=Vn[0]:de=[$/W,ie/W];var Js=a.unproject(ne(de));return pe([Js.lat+ke.lat,Js.lng+ke.lng])}function zs(r){for(var a=0,d=0,m=0,w=0;w<r.length;w++){var P=pe(r[w]);a+=P.lat,d+=P.lng,m++}return pe([a/m,d/m])}var Us={__proto__:null,clipPolygon:Fs,polygonCenter:Zo,centroid:zs};function zt(r,a){if(!a||!r.length)return r.slice();var d=a*a;return r=y(r,d),r=Ti(r,d),r}function Ko(r,a,d){return Math.sqrt(Oe(r,a,d,!0))}function ba(r,a,d){return Oe(r,a,d)}function Ti(r,a){var d=r.length,m=typeof Uint8Array<"u"?Uint8Array:Array,w=new m(d);w[0]=w[d-1]=1,h(r,w,a,0,d-1);var P,D=[];for(P=0;P<d;P++)w[P]&&D.push(r[P]);return D}function h(r,a,d,m,w){var P=0,D,W,$;for(W=m+1;W<=w-1;W++)$=Oe(r[W],r[m],r[w],!0),$>P&&(D=W,P=$);P>d&&(a[D]=1,h(r,a,d,m,D),h(r,a,d,D,w))}function y(r,a){for(var d=[r[0]],m=1,w=0,P=r.length;m<P;m++)he(r[m],r[w])>a&&(d.push(r[m]),w=m);return w<P-1&&d.push(r[P-1]),d}var T;function A(r,a,d,m,w){var P=m?T:K(r,d),D=K(a,d),W,$,ie;for(T=D;;){if(!(P|D))return[r,a];if(P&D)return!1;W=P||D,$=H(r,a,W,d,w),ie=K($,d),W===P?(r=$,P=ie):(a=$,D=ie)}}function H(r,a,d,m,w){var P=a.x-r.x,D=a.y-r.y,W=m.min,$=m.max,ie,de;return d&8?(ie=r.x+P*($.y-r.y)/D,de=$.y):d&4?(ie=r.x+P*(W.y-r.y)/D,de=W.y):d&2?(ie=$.x,de=r.y+D*($.x-r.x)/P):d&1&&(ie=W.x,de=r.y+D*(W.x-r.x)/P),new J(ie,de,w)}function K(r,a){var d=0;return r.x<a.min.x?d|=1:r.x>a.max.x&&(d|=2),r.y<a.min.y?d|=4:r.y>a.max.y&&(d|=8),d}function he(r,a){var d=a.x-r.x,m=a.y-r.y;return d*d+m*m}function Oe(r,a,d,m){var w=a.x,P=a.y,D=d.x-w,W=d.y-P,$=D*D+W*W,ie;return $>0&&(ie=((r.x-w)*D+(r.y-P)*W)/$,ie>1?(w=d.x,P=d.y):ie>0&&(w+=D*ie,P+=W*ie)),D=r.x-w,W=r.y-P,m?D*D+W*W:new J(w,P)}function rt(r){return!De(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function ot(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),rt(r)}function Rt(r,a){var d,m,w,P,D,W,$,ie;if(!r||r.length===0)throw new Error("latlngs not passed");rt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var de=pe([0,0]),ke=Te(r),We=ke.getNorthWest().distanceTo(ke.getSouthWest())*ke.getNorthEast().distanceTo(ke.getNorthWest());We<1700&&(de=zs(r));var Kt=r.length,Ut=[];for(d=0;d<Kt;d++){var Vn=pe(r[d]);Ut.push(a.project(pe([Vn.lat-de.lat,Vn.lng-de.lng])))}for(d=0,m=0;d<Kt-1;d++)m+=Ut[d].distanceTo(Ut[d+1])/2;if(m===0)ie=Ut[0];else for(d=0,P=0;d<Kt-1;d++)if(D=Ut[d],W=Ut[d+1],w=D.distanceTo(W),P+=w,P>m){$=(P-m)/w,ie=[W.x-$*(W.x-D.x),W.y-$*(W.y-D.y)];break}var vn=a.unproject(ne(ie));return pe([vn.lat+de.lat,vn.lng+de.lng])}var Mn={__proto__:null,simplify:zt,pointToSegmentDistance:Ko,closestPointOnSegment:ba,clipSegment:A,_getEdgeIntersection:H,_getBitCode:K,_sqClosestPointOnSegment:Oe,isFlat:rt,_flat:ot,polylineCenter:Rt},rr={project:function(r){return new J(r.lng,r.lat)},unproject:function(r){return new we(r.y,r.x)},bounds:new z([-180,-90],[180,90])},qn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,d=this.R,m=r.lat*a,w=this.R_MINOR/d,P=Math.sqrt(1-w*w),D=P*Math.sin(m),W=Math.tan(Math.PI/4-m/2)/Math.pow((1-D)/(1+D),P/2);return m=-d*Math.log(Math.max(W,1e-10)),new J(r.lng*a*d,m)},unproject:function(r){for(var a=180/Math.PI,d=this.R,m=this.R_MINOR/d,w=Math.sqrt(1-m*m),P=Math.exp(-r.y/d),D=Math.PI/2-2*Math.atan(P),W=0,$=.1,ie;W<15&&Math.abs($)>1e-7;W++)ie=w*Math.sin(D),ie=Math.pow((1-ie)/(1+ie),w/2),$=Math.PI/2-2*Math.atan(P*ie)-D,D+=$;return new we(D*a,r.x*a/d)}},Cr={__proto__:null,LonLat:rr,Mercator:qn,SphericalMercator:Gt},Bs=l({},He,{code:"EPSG:3395",projection:qn,transformation:(function(){var r=.5/(Math.PI*qn.R);return Br(r,.5,-r,.5)})()}),js=l({},He,{code:"EPSG:4326",projection:rr,transformation:Br(1/180,1,-1/180,.5)}),$h=l({},Ze,{projection:rr,transformation:Br(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var d=a.lng-r.lng,m=a.lat-r.lat;return Math.sqrt(d*d+m*m)},infinite:!0});Ze.Earth=He,Ze.EPSG3395=Bs,Ze.EPSG3857=hr,Ze.EPSG900913=Cs,Ze.EPSG4326=js,Ze.Simple=$h;var ir=dt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[E(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[E(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var d=this.getEvents();a.on(d,this),this.once("remove",function(){a.off(d,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ge.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=E(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=E(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return E(r)in this._layers},eachLayer:function(r,a){for(var d in this._layers)r.call(a,this._layers[d]);return this},_addLayers:function(r){r=r?De(r)?r:[r]:[];for(var a=0,d=r.length;a<d;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[E(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=E(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var w=this._zoomBoundLayers[m].options;r=w.minZoom===void 0?r:Math.min(r,w.minZoom),a=w.maxZoom===void 0?a:Math.max(a,w.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ii=ir.extend({initialize:function(r,a){Y(this,a),this._layers={};var d,m;if(r)for(d=0,m=r.length;d<m;d++)this.addLayer(r[d])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[r]&&m[r].apply(m,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var d in this._layers)r.call(a,this._layers[d]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return E(r)}}),$o=function(r,a){return new Ii(r,a)},Kr=Ii.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Ii.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Ii.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ae;for(var a in this._layers){var d=this._layers[a];r.extend(d.getBounds?d.getBounds():d.getLatLng())}return r}}),Gu=function(r,a){return new Kr(r,a)},ss=Qe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){Y(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var d=this._getIconUrl(r);if(!d){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(m,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(r,a){var d=this.options,m=d[a+"Size"];typeof m=="number"&&(m=[m,m]);var w=ne(m),P=ne(a==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(d.className||""),P&&(r.style.marginLeft=-P.x+"px",r.style.marginTop=-P.y+"px"),w&&(r.style.width=w.x+"px",r.style.height=w.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return ye.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Zu(r){return new ss(r)}var Hs=ss.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Hs.imagePath!="string"&&(Hs.imagePath=this._detectIconPath()),(this.options.imagePath||Hs.imagePath)+ss.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(d,m,w){var P=m.exec(d);return P&&P[w]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=ze("div","leaflet-default-icon-path",document.body),a=_i(r,"background-image")||_i(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),bl=ln.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new yn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fe(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&lt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,d=a._map,m=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,P=tr(a._icon),D=d.getPixelBounds(),W=d.getPixelOrigin(),$=X(D.min._subtract(W).add(w),D.max._subtract(W).subtract(w));if(!$.contains(P)){var ie=ne((Math.max($.max.x,P.x)-$.max.x)/(D.max.x-$.max.x)-(Math.min($.min.x,P.x)-$.min.x)/(D.min.x-$.min.x),(Math.max($.max.y,P.y)-$.max.y)/(D.max.y-$.max.y)-(Math.min($.min.y,P.y)-$.min.y)/(D.min.y-$.min.y)).multiplyBy(m);d.panBy(ie,{animate:!1}),this._draggable._newPos._add(ie),this._draggable._startPos._add(ie),Pt(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=b(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(j(this._panRequest),this._panRequest=b(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,d=a._shadow,m=tr(a._icon),w=a._map.layerPointToLatLng(m);d&&Pt(d,m),a._latlng=w,r.latlng=w,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){j(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),$r=ir.extend({options:{icon:new Hs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){Y(this,a),this._latlng=pe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=pe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=r.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,r.title&&(d.title=r.title),d.tagName==="IMG"&&(d.alt=r.alt||"")),fe(d,a),r.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xe(d,"focus",this._panOnFocus,this);var w=r.icon.createShadow(this._shadow),P=!1;w!==this._shadow&&(this._removeShadow(),P=!0),w&&(fe(w,a),w.alt=""),this._shadow=w,r.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&P&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(this._icon,"focus",this._panOnFocus,this),nt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&nt(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Pt(this._icon,r),this._shadow&&Pt(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bl)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bl(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Xt(this._icon,r),this._shadow&&Xt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,d=a.iconSize?ne(a.iconSize):ne(0,0),m=a.iconAnchor?ne(a.iconAnchor):ne(0,0);r.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qh(r,a){return new $r(r,a)}var Si=ir.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return Y(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Va=Si.extend({options:{fill:!0,radius:10},initialize:function(r,a){Y(this,a),this._latlng=pe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=pe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return Si.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,d=this._clickTolerance(),m=[r+d,a+d];this._pxBounds=new z(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ku(r,a){return new Va(r,a)}var Fa=Va.extend({initialize:function(r,a,d){if(typeof a=="number"&&(a=l({},d,{radius:a})),Y(this,a),this._latlng=pe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ae(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Si.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===He.distance){var w=Math.PI/180,P=this._mRadius/He.R/w,D=d.project([a+P,r]),W=d.project([a-P,r]),$=D.add(W).divideBy(2),ie=d.unproject($).lat,de=Math.acos((Math.cos(P*w)-Math.sin(a*w)*Math.sin(ie*w))/(Math.cos(a*w)*Math.cos(ie*w)))/w;(isNaN(de)||de===0)&&(de=P/Math.cos(Math.PI/180*a)),this._point=$.subtract(d.getPixelOrigin()),this._radius=isNaN(de)?0:$.x-d.project([ie,r-de]).x,this._radiusY=$.y-D.y}else{var ke=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ke).x}this._updateBounds()}});function Qo(r,a,d){return new Fa(r,a,d)}var bn=Si.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){Y(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,d=null,m=Oe,w,P,D=0,W=this._parts.length;D<W;D++)for(var $=this._parts[D],ie=1,de=$.length;ie<de;ie++){w=$[ie-1],P=$[ie];var ke=m(r,w,P,!0);ke<a&&(a=ke,d=m(r,w,P))}return d&&(d.distance=Math.sqrt(a)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=pe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ae,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return rt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],d=rt(r),m=0,w=r.length;m<w;m++)d?(a[m]=pe(r[m]),this._bounds.extend(a[m])):a[m]=this._convertLatLngs(r[m]);return a},_project:function(){var r=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new J(r,r);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,d){var m=r[0]instanceof we,w=r.length,P,D;if(m){for(D=[],P=0;P<w;P++)D[P]=this._map.latLngToLayerPoint(r[P]),d.extend(D[P]);a.push(D)}else for(P=0;P<w;P++)this._projectLatlngs(r[P],a,d)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,d,m,w,P,D,W,$;for(d=0,w=0,P=this._rings.length;d<P;d++)for($=this._rings[d],m=0,D=$.length;m<D-1;m++)W=A($[m],$[m+1],r,m,!0),W&&(a[w]=a[w]||[],a[w].push(W[0]),(W[1]!==$[m+1]||m===D-2)&&(a[w].push(W[1]),w++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,d=0,m=r.length;d<m;d++)r[d]=zt(r[d],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var d,m,w,P,D,W,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(d=0,P=this._parts.length;d<P;d++)for(W=this._parts[d],m=0,D=W.length,w=D-1;m<D;w=m++)if(!(!a&&m===0)&&Ko(r,W[w],W[m])<=$)return!0;return!1}});function Yh(r,a){return new bn(r,a)}bn._flat=ot;var Qr=bn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Zo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=bn.prototype._convertLatLngs.call(this,r),d=a.length;return d>=2&&a[0]instanceof we&&a[0].equals(a[d-1])&&a.pop(),a},_setLatLngs:function(r){bn.prototype._setLatLngs.call(this,r),rt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return rt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,d=new J(a,a);if(r=new z(r.min.subtract(d),r.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,w=this._rings.length,P;m<w;m++)P=Fs(this._rings[m],r,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,d,m,w,P,D,W,$,ie;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(P=0,$=this._parts.length;P<$;P++)for(d=this._parts[P],D=0,ie=d.length,W=ie-1;D<ie;W=D++)m=d[D],w=d[W],m.y>r.y!=w.y>r.y&&r.x<(w.x-m.x)*(r.y-m.y)/(w.y-m.y)+m.x&&(a=!a);return a||bn.prototype._containsPoint.call(this,r,!0)}});function Jh(r,a){return new Qr(r,a)}var Rr=Kr.extend({initialize:function(r,a){Y(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=De(r)?r:r.features,d,m,w;if(a){for(d=0,m=a.length;d<m;d++)w=a[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var P=this.options;if(P.filter&&!P.filter(r))return this;var D=Ws(r,P);return D?(D.feature=Ha(r),D.defaultOptions=D.options,this.resetStyle(D),P.onEachFeature&&P.onEachFeature(r,D),this.addLayer(D)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=l({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Ws(r,a){var d=r.type==="Feature"?r.geometry:r,m=d?d.coordinates:null,w=[],P=a&&a.pointToLayer,D=a&&a.coordsToLatLng||Ua,W,$,ie,de;if(!m&&!d)return null;switch(d.type){case"Point":return W=D(m),za(P,r,W,a);case"MultiPoint":for(ie=0,de=m.length;ie<de;ie++)W=D(m[ie]),w.push(za(P,r,W,a));return new Kr(w);case"LineString":case"MultiLineString":return $=Yo(m,d.type==="LineString"?0:1,D),new bn($,a);case"Polygon":case"MultiPolygon":return $=Yo(m,d.type==="Polygon"?1:2,D),new Qr($,a);case"GeometryCollection":for(ie=0,de=d.geometries.length;ie<de;ie++){var ke=Ws({geometry:d.geometries[ie],type:"Feature",properties:r.properties},a);ke&&w.push(ke)}return new Kr(w);case"FeatureCollection":for(ie=0,de=d.features.length;ie<de;ie++){var We=Ws(d.features[ie],a);We&&w.push(We)}return new Kr(w);default:throw new Error("Invalid GeoJSON object.")}}function za(r,a,d,m){return r?r(a,d):new $r(d,m&&m.markersInheritOptions&&m)}function Ua(r){return new we(r[1],r[0],r[2])}function Yo(r,a,d){for(var m=[],w=0,P=r.length,D;w<P;w++)D=a?Yo(r[w],a-1,d):(d||Ua)(r[w]),m.push(D);return m}function Ba(r,a){return r=pe(r),r.alt!==void 0?[R(r.lng,a),R(r.lat,a),R(r.alt,a)]:[R(r.lng,a),R(r.lat,a)]}function ja(r,a,d,m){for(var w=[],P=0,D=r.length;P<D;P++)w.push(a?ja(r[P],rt(r[P])?0:a-1,d,m):Ba(r[P],m));return!a&&d&&w.length>0&&w.push(w[0].slice()),w}function qs(r,a){return r.feature?l({},r.feature,{geometry:a}):Ha(a)}function Ha(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Vl={toGeoJSON:function(r){return qs(this,{type:"Point",coordinates:Ba(this.getLatLng(),r)})}};$r.include(Vl),Fa.include(Vl),Va.include(Vl),bn.include({toGeoJSON:function(r){var a=!rt(this._latlngs),d=ja(this._latlngs,a?1:0,!1,r);return qs(this,{type:(a?"Multi":"")+"LineString",coordinates:d})}}),Qr.include({toGeoJSON:function(r){var a=!rt(this._latlngs),d=a&&!rt(this._latlngs[0]),m=ja(this._latlngs,d?2:a?1:0,!0,r);return a||(m=[m]),qs(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),Ii.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(d){a.push(d.toGeoJSON(r).geometry.coordinates)}),qs(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var d=a==="GeometryCollection",m=[];return this.eachLayer(function(w){if(w.toGeoJSON){var P=w.toGeoJSON(r);if(d)m.push(P.geometry);else{var D=Ha(P);D.type==="FeatureCollection"?m.push.apply(m,D.features):m.push(D)}}}),d?qs(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function $u(r,a){return new Rr(r,a)}var sr=$u,Pi=ir.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,d){this._url=r,this._bounds=Te(a),Y(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){nt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&jn(this._image),this},bringToBack:function(){return this._map&&an(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Te(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:ze("img");if(fe(a,"leaflet-image-layer"),this._zoomAnimated&&fe(a,"leaflet-zoom-animated"),this.options.className&&fe(a,this.options.className),a.onselectstart=k,a.onmousemove=k,a.onload=p(this.fire,this,"load"),a.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;xn(this._image,d,a)},_reset:function(){var r=this._image,a=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=a.getSize();Pt(r,a.min),r.style.width=d.x+"px",r.style.height=d.y+"px"},_updateOpacity:function(){Xt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),Qu=function(r,a,d){return new Pi(r,a,d)},Fl=Pi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:ze("video");if(fe(a,"leaflet-image-layer"),this._zoomAnimated&&fe(a,"leaflet-zoom-animated"),this.options.className&&fe(a,this.options.className),a.onselectstart=k,a.onmousemove=k,a.onloadeddata=p(this.fire,this,"load"),r){for(var d=a.getElementsByTagName("source"),m=[],w=0;w<d.length;w++)m.push(d[w].src);this._url=d.length>0?m:[a.src];return}De(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var D=ze("source");D.src=this._url[P],a.appendChild(D)}}});function Yu(r,a,d){return new Fl(r,a,d)}var zl=Pi.extend({_initImage:function(){var r=this._image=this._url;fe(r,"leaflet-image-layer"),this._zoomAnimated&&fe(r,"leaflet-zoom-animated"),this.options.className&&fe(r,this.options.className),r.onselectstart=k,r.onmousemove=k}});function Ul(r,a,d){return new zl(r,a,d)}var kr=ir.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof we||De(r))?(this._latlng=pe(r),Y(this,a)):(Y(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Xt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Xt(this._container,1),this.bringToFront(),this.options.interactive&&(fe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Xt(this._container,0),this._removeTimeout=setTimeout(p(nt,void 0,this._container),200)):nt(this._container),this.options.interactive&&(lt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=pe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jn(this._container),this},bringToBack:function(){return this._map&&an(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Kr){a=null;var d=this._source._layers;for(var m in d)if(d[m]._map){a=d[m];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=ne(this.options.offset),d=this._getAnchor();this._zoomAnimated?Pt(this._container,r.add(d)):a=a.add(r).add(d);var m=this._containerBottom=-a.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=m+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Ge.include({_initOverlay:function(r,a,d,m){var w=a;return w instanceof r||(w=new r(m).setContent(a)),d&&w.setLatLng(d),w}}),ir.include({_initOverlay:function(r,a,d,m){var w=d;return w instanceof r?(Y(w,m),w._source=this):(w=a&&!m?a:new r(m,this),w.setContent(d)),w}});var Wa=kr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,kr.prototype.openOn.call(this,r)},onAdd:function(r){kr.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Si||this._source.on("preclick",tt))},onRemove:function(r){kr.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Si||this._source.off("preclick",tt))},getEvents:function(){var r=kr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=ze("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=ze("div",r+"-content-wrapper",a);if(this._contentNode=ze("div",r+"-content",d),es(a),Ms(this._contentNode),xe(a,"contextmenu",tt),this._tipContainer=ze("div",r+"-tip-container",a),this._tip=ze("div",r+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=ze("a",r+"-close-button",a);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',xe(m,"click",function(w){yt(w),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var d=r.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),a.width=d+1+"px",a.whiteSpace="",a.height="";var m=r.offsetHeight,w=this.options.maxHeight,P="leaflet-popup-scrolled";w&&m>w?(a.height=w+"px",fe(r,P)):lt(r,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),d=this._getAnchor();Pt(this._container,a.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(_i(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+a,m=this._containerWidth,w=new J(this._containerLeft,-d-this._containerBottom);w._add(tr(this._container));var P=r.layerPointToContainerPoint(w),D=ne(this.options.autoPanPadding),W=ne(this.options.autoPanPaddingTopLeft||D),$=ne(this.options.autoPanPaddingBottomRight||D),ie=r.getSize(),de=0,ke=0;P.x+m+$.x>ie.x&&(de=P.x+m-ie.x+$.x),P.x-de-W.x<0&&(de=P.x-W.x),P.y+d+$.y>ie.y&&(ke=P.y+d-ie.y+$.y),P.y-ke-W.y<0&&(ke=P.y-W.y),(de||ke)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([de,ke]))}},_getAnchor:function(){return ne(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gs=function(r,a){return new Wa(r,a)};Ge.mergeOptions({closePopupOnClick:!0}),Ge.include({openPopup:function(r,a,d){return this._initOverlay(Wa,r,a,d).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),ir.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Wa,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Kr||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){gn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof Si)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Zs=kr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){kr.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){kr.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=kr.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ze("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+E(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,d,m=this._map,w=this._container,P=m.latLngToContainerPoint(m.getCenter()),D=m.layerPointToContainerPoint(r),W=this.options.direction,$=w.offsetWidth,ie=w.offsetHeight,de=ne(this.options.offset),ke=this._getAnchor();W==="top"?(a=$/2,d=ie):W==="bottom"?(a=$/2,d=0):W==="center"?(a=$/2,d=ie/2):W==="right"?(a=0,d=ie/2):W==="left"?(a=$,d=ie/2):D.x<P.x?(W="right",a=0,d=ie/2):(W="left",a=$+(de.x+ke.x)*2,d=ie/2),r=r.subtract(ne(a,d,!0)).add(de).add(ke),lt(w,"leaflet-tooltip-right"),lt(w,"leaflet-tooltip-left"),lt(w,"leaflet-tooltip-top"),lt(w,"leaflet-tooltip-bottom"),fe(w,"leaflet-tooltip-"+W),Pt(w,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Xt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return ne(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Jo=function(r,a){return new Zs(r,a)};Ge.include({openTooltip:function(r,a,d){return this._initOverlay(Zs,r,a,d).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),ir.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zs,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[a](d),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Kr||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(xe(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),xe(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,d,m;this._tooltip.options.sticky&&r.originalEvent&&(d=this._map.mouseEventToContainerPoint(r.originalEvent),m=this._map.containerPointToLayerPoint(d),a=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(a)}});var qa=ss.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),d=this.options;if(d.html instanceof Element?(on(a),a.appendChild(d.html)):a.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=ne(d.bgPos);a.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function Ju(r){return new qa(r)}ss.Default=Hs;var Ai=ir.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){Y(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),nt(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(an(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=I(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof J?r:new J(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,d=-r(-1/0,1/0),m=0,w=a.length,P;m<w;m++)P=a[m].style.zIndex,a[m]!==this._container&&P&&(d=r(d,+P));isFinite(d)&&(this.options.zIndex=d+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ye.ielt9){Xt(this._container,this.options.opacity);var r=+new Date,a=!1,d=!1;for(var m in this._tiles){var w=this._tiles[m];if(!(!w.current||!w.loaded)){var P=Math.min(1,(r-w.loaded)/200);Xt(w.el,P),P<1?a=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),a&&(j(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this))}},_onOpaqueTile:k,_initContainer:function(){this._container||(this._container=ze("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===r?(this._levels[d].el.style.zIndex=a-Math.abs(r-d),this._onUpdateLevel(d)):(nt(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[r],w=this._map;return m||(m=this._levels[r]={},m.el=ze("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=a,m.origin=w.project(w.unproject(w.getPixelOrigin()),r).round(),m.zoom=r,this._setZoomTransform(m,w.getCenter(),w.getZoom()),k(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:k,_onRemoveLevel:k,_onCreateLevel:k,_pruneTiles:function(){if(this._map){var r,a,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var m=a.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)nt(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,d,m){var w=Math.floor(r/2),P=Math.floor(a/2),D=d-1,W=new J(+w,+P);W.z=+D;var $=this._tileCoordsToKey(W),ie=this._tiles[$];return ie&&ie.active?(ie.retain=!0,!0):(ie&&ie.loaded&&(ie.retain=!0),D>m?this._retainParent(w,P,D,m):!1)},_retainChildren:function(r,a,d,m){for(var w=2*r;w<2*r+2;w++)for(var P=2*a;P<2*a+2;P++){var D=new J(w,P);D.z=d+1;var W=this._tileCoordsToKey(D),$=this._tiles[W];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);d+1<m&&this._retainChildren(w,P,d+1,m)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,d,m){var w=Math.round(a);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var P=this.options.updateWhenZooming&&w!==this._tileZoom;(!m||P)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(r),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var d in this._levels)this._setZoomTransform(this._levels[d],r,a)},_setZoomTransform:function(r,a,d){var m=this._map.getZoomScale(d,r.zoom),w=r.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(a,d)).round();ye.any3d?xn(r.el,w,m):Pt(r.el,w)},_resetGrid:function(){var r=this._map,a=r.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],m).x/d.x),Math.ceil(r.project([0,a.wrapLng[1]],m).x/d.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],m).y/d.x),Math.ceil(r.project([a.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,d=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),m=a.getZoomScale(d,this._tileZoom),w=a.project(r,this._tileZoom).floor(),P=a.getSize().divideBy(m*2);return new z(w.subtract(P),w.add(P))},_update:function(r){var a=this._map;if(a){var d=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(r),w=this._pxBoundsToTileRange(m),P=w.getCenter(),D=[],W=this.options.keepBuffer,$=new z(w.getBottomLeft().subtract([W,-W]),w.getTopRight().add([W,-W]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ie in this._tiles){var de=this._tiles[ie].coords;(de.z!==this._tileZoom||!$.contains(new J(de.x,de.y)))&&(this._tiles[ie].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(r,d);return}for(var ke=w.min.y;ke<=w.max.y;ke++)for(var We=w.min.x;We<=w.max.x;We++){var Kt=new J(We,ke);if(Kt.z=this._tileZoom,!!this._isValidTile(Kt)){var Ut=this._tiles[this._tileCoordsToKey(Kt)];Ut?Ut.current=!0:D.push(Kt)}}if(D.sort(function(vn,Js){return vn.distanceTo(P)-Js.distanceTo(P)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Vn=document.createDocumentFragment();for(We=0;We<D.length;We++)this._addTile(D[We],Vn);this._level.el.appendChild(Vn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var d=this._globalTileRange;if(!a.wrapLng&&(r.x<d.min.x||r.x>d.max.x)||!a.wrapLat&&(r.y<d.min.y||r.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(r);return Te(this.options.bounds).overlaps(m)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,d=this.getTileSize(),m=r.scaleBy(d),w=m.add(d),P=a.unproject(m,r.z),D=a.unproject(w,r.z);return[P,D]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),d=new Ae(a[0],a[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),d=new J(+a[0],+a[1]);return d.z=+a[2],d},_removeTile:function(r){var a=this._tiles[r];a&&(nt(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){fe(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=k,r.onmousemove=k,ye.ielt9&&this.options.opacity<1&&Xt(r,this.options.opacity)},_addTile:function(r,a){var d=this._getTilePos(r),m=this._tileCoordsToKey(r),w=this.createTile(this._wrapCoords(r),p(this._tileReady,this,r));this._initTile(w),this.createTile.length<2&&b(p(this._tileReady,this,r,null,w)),Pt(w,d),this._tiles[m]={el:w,coords:r,current:!0},a.appendChild(w),this.fire("tileloadstart",{tile:w,coords:r})},_tileReady:function(r,a,d){a&&this.fire("tileerror",{error:a,tile:d,coords:r});var m=this._tileCoordsToKey(r);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(Xt(d.el,0),j(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),a||(fe(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ye.ielt9||!this._map._fadeAnimated?b(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new J(this._wrapX?C(r.x,this._wrapX):r.x,this._wrapY?C(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new z(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Ks(r){return new Ai(r)}var Ci=Ai.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=Y(this,a),a.detectRetina&&ye.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var d=document.createElement("img");return xe(d,"load",p(this._tileOnLoad,this,a,d)),xe(d,"error",p(this._tileOnError,this,a,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(r),d},getTileUrl:function(r){var a={r:ye.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=d),a["-y"]=d}return Re(this._url,l(a,this.options))},_tileOnLoad:function(r,a){ye.ielt9?setTimeout(p(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,d){var m=this.options.errorTileUrl;m&&a.getAttribute("src")!==m&&(a.src=m),r(d,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(r=a-r),r+m},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=k,a.onerror=k,!a.complete)){a.src=ct;var d=this._tiles[r].coords;nt(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:d})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",ct),Ai.prototype._removeTile.call(this,r)},_tileReady:function(r,a,d){if(!(!this._map||d&&d.getAttribute("src")===ct))return Ai.prototype._tileReady.call(this,r,a,d)}});function Bl(r,a){return new Ci(r,a)}var Xo=Ci.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var d=l({},this.defaultWmsParams);for(var m in a)m in this.options||(d[m]=a[m]);a=Y(this,a);var w=a.detectRetina&&ye.retina?2:1,P=this.getTileSize();d.width=P.x*w,d.height=P.y*w,this.wmsParams=d},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Ci.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),d=this._crs,m=X(d.project(a[0]),d.project(a[1])),w=m.min,P=m.max,D=(this._wmsVersion>=1.3&&this._crs===js?[w.y,w.x,P.y,P.x]:[w.x,w.y,P.x,P.y]).join(","),W=Ci.prototype.getTileUrl.call(this,r);return W+le(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(r,a){return l(this.wmsParams,r),a||this.redraw(),this}});function Xu(r,a){return new Xo(r,a)}Ci.WMS=Xo,Bl.wms=Xu;var xr=ir.extend({options:{padding:.1},initialize:function(r){Y(this,r),E(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var d=this._map.getZoomScale(a,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,a),P=m.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(r,a));ye.any3d?xn(this._container,P,d):Pt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),d=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new z(d,d.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),jl=xr.extend({options:{tolerance:0},getEvents:function(){var r=xr.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){xr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");xe(r,"mousemove",this._onMouseMove,this),xe(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),xe(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){j(this._redrawRequest),delete this._ctx,nt(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xr.prototype._update.call(this);var r=this._bounds,a=this._container,d=r.getSize(),m=ye.retina?2:1;Pt(a,r.min),a.width=m*d.x,a.height=m*d.y,a.style.width=d.x+"px",a.style.height=d.y+"px",ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){xr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[E(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,d=a.next,m=a.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete r._order,delete this._layers[E(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),d=[],m,w;for(w=0;w<a.length;w++){if(m=Number(a[w]),isNaN(m))return;d.push(m)}r.options._dashArray=d}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||b(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var d=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)r=m.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var d,m,w,P,D=r._parts,W=D.length,$=this._ctx;if(W){for($.beginPath(),d=0;d<W;d++){for(m=0,w=D[d].length;m<w;m++)P=D[d][m],$[m?"lineTo":"moveTo"](P.x,P.y);a&&$.closePath()}this._fillStroke($,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,d=this._ctx,m=Math.max(Math.round(r._radius),1),w=(Math.max(Math.round(r._radiusY),1)||m)/m;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(a.x,a.y/w,m,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,r)}},_fillStroke:function(r,a){var d=a.options;d.fill&&(r.globalAlpha=d.fillOpacity,r.fillStyle=d.fillColor||d.color,r.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=d.opacity,r.lineWidth=d.weight,r.strokeStyle=d.color,r.lineCap=d.lineCap,r.lineJoin=d.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),d,m,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(lt(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var d,m,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(a)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(r),m&&(fe(this._container,"leaflet-interactive"),this._fireEvent([m],r,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,d){this._map._fireDOMEvent(a,d||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var d=a.next,m=a.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var d=a.next,m=a.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Hl(r){return ye.canvas?new jl(r):null}var $s=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ec={_initContainer:function(){this._container=ze("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(xr.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=$s("shape");fe(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=$s("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[E(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;nt(a),r.removeInteractiveTarget(a),delete this._layers[E(r)]},_updateStyle:function(r){var a=r._stroke,d=r._fill,m=r.options,w=r._container;w.stroked=!!m.stroke,w.filled=!!m.fill,m.stroke?(a||(a=r._stroke=$s("stroke")),w.appendChild(a),a.weight=m.weight+"px",a.color=m.color,a.opacity=m.opacity,m.dashArray?a.dashStyle=De(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=m.lineCap.replace("butt","flat"),a.joinstyle=m.lineJoin):a&&(w.removeChild(a),r._stroke=null),m.fill?(d||(d=r._fill=$s("fill")),w.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(w.removeChild(d),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),d=Math.round(r._radius),m=Math.round(r._radiusY||d);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){jn(r._container)},_bringToBack:function(r){an(r._container)}},or=ye.vml?$s:bo,os=xr.extend({_initContainer:function(){this._container=or("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=or("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){nt(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xr.prototype._update.call(this);var r=this._bounds,a=r.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,d.setAttribute("width",a.x),d.setAttribute("height",a.y)),Pt(d,r.min),d.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=or("path");r.options.className&&fe(a,r.options.className),r.options.interactive&&fe(a,"leaflet-interactive"),this._updateStyle(r),this._layers[E(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){nt(r._path),r.removeInteractiveTarget(r._path),delete this._layers[E(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,d=r.options;a&&(d.stroke?(a.setAttribute("stroke",d.color),a.setAttribute("stroke-opacity",d.opacity),a.setAttribute("stroke-width",d.weight),a.setAttribute("stroke-linecap",d.lineCap),a.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?a.setAttribute("stroke-dasharray",d.dashArray):a.removeAttribute("stroke-dasharray"),d.dashOffset?a.setAttribute("stroke-dashoffset",d.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),d.fill?(a.setAttribute("fill",d.fillColor||d.color),a.setAttribute("fill-opacity",d.fillOpacity),a.setAttribute("fill-rule",d.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,zi(r._parts,a))},_updateCircle:function(r){var a=r._point,d=Math.max(Math.round(r._radius),1),m=Math.max(Math.round(r._radiusY),1)||d,w="a"+d+","+m+" 0 1,0 ",P=r._empty()?"M0 0":"M"+(a.x-d)+","+a.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(r,P)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){jn(r._path)},_bringToBack:function(r){an(r._path)}});ye.vml&&os.include(ec);function Ga(r){return ye.svg||ye.vml?new os(r):null}Ge.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Hl(r)||Ga(r)}});var tc=Qr.extend({initialize:function(r,a){Qr.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Te(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Xh(r,a){return new tc(r,a)}os.create=or,os.pointsToPath=zi,Rr.geometryToLayer=Ws,Rr.coordsToLatLng=Ua,Rr.coordsToLatLngs=Yo,Rr.latLngToCoords=Ba,Rr.latLngsToCoords=ja,Rr.getFeature=qs,Rr.asFeature=Ha,Ge.mergeOptions({boxZoom:!0});var Qs=ln.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){xe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){nt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qe(),Yi(),this._startPoint=this._map.mouseEventToContainerPoint(r),xe(document,{contextmenu:gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=ze("div","leaflet-zoom-box",this._container),fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new z(this._point,this._startPoint),d=a.getSize();Pt(this._box,a.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(nt(this._box),lt(this._container,"leaflet-crosshair")),mn(),Ji(),ut(document,{contextmenu:gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var a=new Ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ge.addInitHook("addHandler","boxZoom",Qs),Ge.mergeOptions({doubleClickZoom:!0});var nc=ln.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,d=a.getZoom(),m=a.options.zoomDelta,w=r.originalEvent.shiftKey?d-m:d+m;a.options.doubleClickZoom==="center"?a.setZoom(w):a.setZoomAround(r.containerPoint,w)}});Ge.addInitHook("addHandler","doubleClickZoom",nc),Ge.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Wl=ln.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new yn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){lt(this._map._container,"leaflet-grab"),lt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Te(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,w=(m-a+d)%r+a-d,P=(m+a+d)%r-a-d,D=Math.abs(w+d)<Math.abs(P+d)?w:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(r){var a=this._map,d=a.options,m=!d.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),m)a.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,D=d.easeLinearity,W=w.multiplyBy(D/P),$=W.distanceTo([0,0]),ie=Math.min(d.inertiaMaxSpeed,$),de=W.multiplyBy(ie/$),ke=ie/(d.inertiaDeceleration*D),We=de.multiplyBy(-ke/2).round();!We.x&&!We.y?a.fire("moveend"):(We=a._limitOffset(We,a.options.maxBounds),b(function(){a.panBy(We,{duration:ke,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});Ge.addInitHook("addHandler","dragging",Wl),Ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ql=ln.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),xe(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,d=r.scrollTop||a.scrollTop,m=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},d=this.keyCodes,m,w;for(m=0,w=d.left.length;m<w;m++)a[d.left[m]]=[-1*r,0];for(m=0,w=d.right.length;m<w;m++)a[d.right[m]]=[r,0];for(m=0,w=d.down.length;m<w;m++)a[d.down[m]]=[0,r];for(m=0,w=d.up.length;m<w;m++)a[d.up[m]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},d=this.keyCodes,m,w;for(m=0,w=d.zoomIn.length;m<w;m++)a[d.zoomIn[m]]=r;for(m=0,w=d.zoomOut.length;m<w;m++)a[d.zoomOut[m]]=-r},_addHooks:function(){xe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,d=this._map,m;if(a in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[a],r.shiftKey&&(m=ne(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(ne(m),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(w)}else d.panBy(m)}else if(a in this._zoomKeys)d.setZoom(d.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;gn(r)}}});Ge.addInitHook("addHandler","keyboard",ql),Ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var gt=ln.extend({addHooks:function(){xe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Wo(r),d=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),m),gn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),d=this._map.options.zoomSnap||0;r._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,P=d?Math.ceil(w/d)*d:w,D=r._limitZoom(a+(this._delta>0?P:-P))-a;this._delta=0,this._startTime=null,D&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+D):r.setZoomAround(this._lastMousePos,a+D))}});Ge.addInitHook("addHandler","scrollWheelZoom",gt);var Gl=600;Ge.mergeOptions({tapHold:ye.touchNative&&ye.safari&&ye.mobile,tapTolerance:15});var ea=ln.extend({addHooks:function(){xe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new J(a.clientX,a.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(xe(document,"touchend",yt),xe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),Gl),xe(document,"touchend touchcancel contextmenu",this._cancel,this),xe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){ut(document,"touchend",yt),ut(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new J(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var d=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});d._simulated=!0,a.target.dispatchEvent(d)}});Ge.addInitHook("addHandler","tapHold",ea),Ge.mergeOptions({touchZoom:ye.touch,bounceAtZoomLimits:!0});var Ys=ln.extend({addHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),xe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){lt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var d=a.mouseEventToContainerPoint(r.touches[0]),m=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),xe(document,"touchmove",this._onTouchMove,this),xe(document,"touchend touchcancel",this._onTouchEnd,this),yt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,d=a.mouseEventToContainerPoint(r.touches[0]),m=a.mouseEventToContainerPoint(r.touches[1]),w=d.distanceTo(m)/this._startDist;if(this._zoom=a.getScaleZoom(w,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&w<1||this._zoom>a.getMaxZoom()&&w>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var P=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(w===1&&P.x===0&&P.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),j(this._animRequest);var D=p(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=b(D,this,!0),yt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,j(this._animRequest),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ge.addInitHook("addHandler","touchZoom",Ys),Ge.BoxZoom=Qs,Ge.DoubleClickZoom=nc,Ge.Drag=Wl,Ge.Keyboard=ql,Ge.ScrollWheelZoom=gt,Ge.TapHold=ea,Ge.TouchZoom=Ys,t.Bounds=z,t.Browser=ye,t.CRS=Ze,t.Canvas=jl,t.Circle=Fa,t.CircleMarker=Va,t.Class=Qe,t.Control=en,t.DivIcon=qa,t.DivOverlay=kr,t.DomEvent=Sr,t.DomUtil=Xi,t.Draggable=yn,t.Evented=dt,t.FeatureGroup=Kr,t.GeoJSON=Rr,t.GridLayer=Ai,t.Handler=ln,t.Icon=ss,t.ImageOverlay=Pi,t.LatLng=we,t.LatLngBounds=Ae,t.Layer=ir,t.LayerGroup=Ii,t.LineUtil=Mn,t.Map=Ge,t.Marker=$r,t.Mixin=Vs,t.Path=Si,t.Point=J,t.PolyUtil=Us,t.Polygon=Qr,t.Polyline=bn,t.Popup=Wa,t.PosAnimation=ns,t.Projection=Cr,t.Rectangle=tc,t.Renderer=xr,t.SVG=os,t.SVGOverlay=zl,t.TileLayer=Ci,t.Tooltip=Zs,t.Transformation=oi,t.Util=O,t.VideoOverlay=Fl,t.bind=p,t.bounds=X,t.canvas=Hl,t.circle=Qo,t.circleMarker=Ku,t.control=Dn,t.divIcon=Ju,t.extend=l,t.featureGroup=Gu,t.geoJSON=$u,t.geoJson=sr,t.gridLayer=Ks,t.icon=Zu,t.imageOverlay=Qu,t.latLng=pe,t.latLngBounds=Te,t.layerGroup=$o,t.map=On,t.marker=Qh,t.point=ne,t.polygon=Jh,t.polyline=Yh,t.popup=Gs,t.rectangle=Xh,t.setOptions=Y,t.stamp=E,t.svg=Ga,t.svgOverlay=Ul,t.tileLayer=Bl,t.tooltip=Jo,t.transformation=Br,t.version=o,t.videoOverlay=Yu;var rc=window.L;t.noConflict=function(){return window.L=rc,this},window.L=t}))})(gu,gu.exports)),gu.exports}var qu=DC();const tE=Yf(qu);function Qp(i,e,t){return Object.freeze({instance:i,context:e,container:t})}function Yp(i,e){return e==null?function(o,l){const c=Be.useRef();return c.current||(c.current=i(o,l)),c}:function(o,l){const c=Be.useRef();c.current||(c.current=i(o,l));const p=Be.useRef(o),{instance:v}=c.current;return Be.useEffect(function(){p.current!==o&&(e(v,o,p.current),p.current=o)},[v,o,l]),c}}function nE(i,e){Be.useEffect(function(){return(e.layerContainer??e.map).addLayer(i.instance),function(){var c;(c=e.layerContainer)==null||c.removeLayer(i.instance),e.map.removeLayer(i.instance)}},[e,i])}function rE(i){return function(t){const o=Kp(),l=i($p(t,o),o);return RC(o.map,t.attribution),eE(l.current,t.eventHandlers),nE(l.current,o),l}}function MC(i,e){const t=Be.useRef();Be.useEffect(function(){if(e.pathOptions!==t.current){const l=e.pathOptions??{};i.instance.setStyle(l),t.current=l}},[i,e])}function bC(i){return function(t){const o=Kp(),l=i($p(t,o),o);return eE(l.current,t.eventHandlers),nE(l.current,o),MC(l.current,t),l}}function VC(i,e){const t=Yp(i,e),o=rE(t);return Xw(o)}function FC(i,e){const t=Yp(i,e),o=bC(t);return Xw(o)}function zC(i,e){const t=Yp(i,e),o=rE(t);return NC(o)}function UC(i,e,t){const{opacity:o,zIndex:l}=e;o!=null&&o!==t.opacity&&i.setOpacity(o),l!=null&&l!==t.zIndex&&i.setZIndex(l)}function BC(){return Kp().map}function jC(i){const e=BC();return Be.useEffect(function(){return e.on(i),function(){e.off(i)}},[e,i]),e}const iE=FC(function({center:e,children:t,...o},l){const c=new qu.Circle(e,o);return Qp(c,Qw(l,{overlayContainer:c}))},kC);function $f(){return $f=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o])}return i},$f.apply(this,arguments)}function HC({bounds:i,boundsOptions:e,center:t,children:o,className:l,id:c,placeholder:p,style:v,whenReady:E,zoom:I,...C},k){const[R]=Be.useState({className:l,id:c,style:v}),[Z,ee]=Be.useState(null);Be.useImperativeHandle(k,()=>(Z==null?void 0:Z.map)??null,[Z]);const Y=Be.useCallback(Ve=>{if(Ve!==null&&Z===null){const Re=new qu.Map(Ve,C);t!=null&&I!=null?Re.setView(t,I):i!=null&&Re.fitBounds(i,e),E!=null&&Re.whenReady(E),ee(LC(Re))}},[]);Be.useEffect(()=>()=>{Z==null||Z.map.remove()},[Z]);const le=Z?oh.createElement(Jw,{value:Z},o):p??null;return oh.createElement("div",$f({},R,{ref:Y}),le)}const WC=Be.forwardRef(HC),sE=VC(function({position:e,...t},o){const l=new qu.Marker(e,t);return Qp(l,Qw(o,{overlayContainer:l}))},function(e,t,o){t.position!==o.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==o.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==o.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==o.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==o.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),qC=zC(function({url:e,...t},o){const l=new qu.TileLayer(e,$p(t,o));return Qp(l,o)},function(e,t,o){UC(e,t,o);const{url:l}=t;l!=null&&l!==o.url&&e.setUrl(l)});delete tE.Icon.Default.prototype._getIconUrl;tE.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function GC({onLocationSelect:i,radius:e}){const[t,o]=Be.useState(null);return jC({click(l){const{lat:c,lng:p}=l.latlng;o([c,p]),i({lat:c,lng:p})}}),t===null?null:oe.jsxs(oe.Fragment,{children:[oe.jsx(sE,{position:t}),oe.jsx(iE,{center:t,radius:e})]})}const ZC=({onLocationSelect:i,initialLocation:e=null,radius:t=50})=>{const[o,l]=Be.useState([40.7128,-74.006]);return Be.useEffect(()=>{e&&l([e.lat,e.lng])},[e]),oe.jsx("div",{style:{width:"100%",height:"384px",border:"1px solid #d1d5db",borderRadius:"0.5rem",overflow:"hidden"},children:oe.jsxs(WC,{center:o,zoom:16,style:{height:"100%",width:"100%"},children:[oe.jsx(qC,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),oe.jsx(GC,{onLocationSelect:i,radius:t}),e&&oe.jsxs(oe.Fragment,{children:[oe.jsx(sE,{position:[e.lat,e.lng]}),oe.jsx(iE,{center:[e.lat,e.lng],radius:t})]})]})})},KC=()=>{const[i,e]=Be.useState([]),[t,o]=Be.useState({}),[l,c]=Be.useState(!1),[p,v]=Be.useState({name:"",startTime:"",endTime:"",radius:50,location:null});Be.useEffect(()=>{E()},[]);const E=async()=>{try{const R=await wC();e(R);const Z={};for(const ee of R)Z[ee.id]=await SC(ee.id);o(Z)}catch(R){console.error("Error loading sessions:",R)}},I=async R=>{if(R.preventDefault(),!p.location){alert("Please select a location on the map");return}try{await vC({...p,startTime:new Date(p.startTime),endTime:new Date(p.endTime),createdAt:new Date,isActive:!0}),v({name:"",startTime:"",endTime:"",radius:50,location:null}),c(!1),E()}catch(Z){console.error("Error creating session:",Z)}},C=async R=>{try{await TC(R,{isActive:!1}),E()}catch(Z){console.error("Error closing session:",Z)}},k=R=>{v({...p,location:R})};return oe.jsxs("div",{children:[oe.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[oe.jsx("h2",{children:"Admin Dashboard"}),oe.jsx("button",{onClick:()=>c(!l),style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer"},children:l?"Cancel":"Create New Session"})]}),l&&oe.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"2rem"},children:[oe.jsx("h3",{children:"Create Attendance Session"}),oe.jsxs("form",{onSubmit:I,children:[oe.jsxs("div",{style:{marginBottom:"1rem"},children:[oe.jsx("label",{children:"Session Name:"}),oe.jsx("input",{type:"text",value:p.name,onChange:R=>v({...p,name:R.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #d1d5db",borderRadius:"0.25rem"}})]}),oe.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[oe.jsxs("div",{style:{flex:1},children:[oe.jsx("label",{children:"Start Time:"}),oe.jsx("input",{type:"datetime-local",value:p.startTime,onChange:R=>v({...p,startTime:R.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #d1d5db",borderRadius:"0.25rem"}})]}),oe.jsxs("div",{style:{flex:1},children:[oe.jsx("label",{children:"End Time:"}),oe.jsx("input",{type:"datetime-local",value:p.endTime,onChange:R=>v({...p,endTime:R.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #d1d5db",borderRadius:"0.25rem"}})]})]}),oe.jsxs("div",{style:{marginBottom:"1rem"},children:[oe.jsx("label",{children:"Allowed Radius (meters):"}),oe.jsx("input",{type:"number",value:p.radius,onChange:R=>v({...p,radius:parseInt(R.target.value)}),min:"10",max:"500",required:!0,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #d1d5db",borderRadius:"0.25rem"}})]}),oe.jsxs("div",{style:{marginBottom:"1rem"},children:[oe.jsx("label",{children:"Select Location:"}),oe.jsx(ZC,{onLocationSelect:k,radius:p.radius})]}),oe.jsx("button",{type:"submit",style:{width:"100%",padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer"},children:"Create Session"})]})]}),oe.jsxs("div",{children:[oe.jsx("h3",{children:"Active Sessions"}),i.filter(R=>R.isActive).length===0?oe.jsx("p",{children:"No active sessions"}):i.filter(R=>R.isActive).map(R=>{var Z,ee;return oe.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"1rem"},children:[oe.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[oe.jsx("h4",{children:R.name}),oe.jsxs("div",{children:[oe.jsxs("span",{style:{marginRight:"1rem"},children:["Time remaining: ",CC(R.endTime.toDate())]}),oe.jsx("button",{onClick:()=>C(R.id),style:{padding:"0.25rem 0.5rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer"},children:"Close Session"})]})]}),oe.jsxs("div",{style:{marginBottom:"1rem"},children:[oe.jsxs("p",{children:[oe.jsx("strong",{children:"Time:"})," ",$w(R.startTime.toDate())," ",Iu(R.startTime.toDate())," - ",Iu(R.endTime.toDate())]}),oe.jsxs("p",{children:[oe.jsx("strong",{children:"Radius:"})," ",R.radius," meters"]}),oe.jsxs("p",{children:[oe.jsx("strong",{children:"Location:"})," ",R.location.lat.toFixed(6),", ",R.location.lng.toFixed(6)]})]}),oe.jsxs("div",{children:[oe.jsxs("h5",{children:["Present Students (",((Z=t[R.id])==null?void 0:Z.length)||0,")"]}),((ee=t[R.id])==null?void 0:ee.length)>0?oe.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:t[R.id].map(Y=>oe.jsx("div",{style:{padding:"0.5rem",borderBottom:"1px solid #e5e7eb"},children:oe.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[oe.jsx("span",{children:Y.userName||Y.userEmail}),oe.jsxs("span",{children:[Iu(Y.timestamp.toDate())," (",Y.distance.toFixed(1),"m away)"]})]})},Y.id))}):oe.jsx("p",{children:"No students have marked attendance yet"})]})]},R.id)})]})]})},Qf=(i,e,t,o)=>{const c=i*Math.PI/180,p=t*Math.PI/180,v=(t-i)*Math.PI/180,E=(o-e)*Math.PI/180,I=Math.sin(v/2)*Math.sin(v/2)+Math.cos(c)*Math.cos(p)*Math.sin(E/2)*Math.sin(E/2);return 6371e3*(2*Math.atan2(Math.sqrt(I),Math.sqrt(1-I)))},$C=(i,e,t,o,l)=>Qf(i,e,t,o)<=l,QC=({user:i})=>{const[e,t]=Be.useState(null),[o,l]=Be.useState(!1),[c,p]=Be.useState(""),[v,E]=Be.useState(null),[I,C]=Be.useState("");Be.useEffect(()=>{const Z=EC(ee=>{t(ee)});return()=>Z()},[]);const k=()=>new Promise((Z,ee)=>{if(!navigator.geolocation){ee(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(Y=>{Z({lat:Y.coords.latitude,lng:Y.coords.longitude})},Y=>{ee(Y)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),R=async()=>{if(!e){p("No active session available");return}l(!0),p(""),C("");try{if(await PC(e.id,i.uid)){p("You have already marked attendance for this session");return}const ee=await k();if(E(ee),!AC(e.startTime.toDate(),e.endTime.toDate())){p("Session is not currently active");return}if(!$C(ee.lat,ee.lng,e.location.lat,e.location.lng,e.radius)){const le=Qf(ee.lat,ee.lng,e.location.lat,e.location.lng);p(`You are ${le.toFixed(1)} meters away. Must be within ${e.radius} meters.`);return}await IC({sessionId:e.id,userId:i.uid,userName:i.displayName,userEmail:i.email,timestamp:new Date,location:ee,distance:Qf(ee.lat,ee.lng,e.location.lat,e.location.lng)}),p("Attendance marked successfully!")}catch(Z){console.error("Error marking attendance:",Z),Z.message.includes("Geolocation")?C("Unable to get your location. Please enable location services and try again."):p("Error marking attendance. Please try again.")}finally{l(!1)}};return oe.jsxs("div",{children:[oe.jsx("h2",{children:"Mark Attendance"}),e?oe.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[oe.jsx("h3",{children:e.name}),oe.jsxs("div",{style:{marginBottom:"1rem"},children:[oe.jsxs("p",{children:[oe.jsx("strong",{children:"Time:"})," ",$w(e.startTime.toDate())," ",Iu(e.startTime.toDate())," - ",Iu(e.endTime.toDate())]}),oe.jsxs("p",{children:[oe.jsx("strong",{children:"Allowed Radius:"})," ",e.radius," meters"]})]}),c&&oe.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",borderRadius:"0.25rem",backgroundColor:c.includes("successfully")?"#d1fae5":"#fee2e2",color:c.includes("successfully")?"#065f46":"#991b1b"},children:c}),I&&oe.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",borderRadius:"0.25rem",backgroundColor:"#fef3c7",color:"#92400e"},children:I}),oe.jsx("button",{onClick:R,disabled:o,style:{width:"100%",padding:"0.75rem",backgroundColor:o?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"0.25rem",cursor:o?"not-allowed":"pointer",fontSize:"1rem"},children:o?"Getting Location...":"Mark Present"}),v&&oe.jsx("div",{style:{marginTop:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:oe.jsxs("p",{children:["Your location: ",v.lat.toFixed(6),", ",v.lng.toFixed(6)]})})]}):oe.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",textAlign:"center"},children:[oe.jsx("h3",{children:"No Active Session"}),oe.jsx("p",{children:"There is currently no active attendance session. Please check back later."})]})]})};function YC(){const[i,e]=Be.useState(null),[t,o]=Be.useState(null);Be.useEffect(()=>DI(Ch,p=>{e(p),o(p?p.email==="aryark2102@gmail.com"?"admin":"client":null)}),[]);const l=async()=>{await MI(Ch)};return i?oe.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",padding:"1rem"},children:oe.jsxs("div",{style:{maxWidth:"1024px",margin:"0 auto"},children:[oe.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[oe.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:"bold"},children:"Geo-Verified Attendance System"}),oe.jsxs("div",{children:[oe.jsxs("span",{children:["Welcome, ",i.displayName||i.email]}),oe.jsx("button",{onClick:l,style:{marginLeft:"1rem",padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer"},children:"Logout"})]})]}),t==="admin"?oe.jsx(KC,{}):oe.jsx(QC,{user:i})]})}):oe.jsx(yC,{onLogin:e})}$E.createRoot(document.getElementById("root")).render(oe.jsx(oh.StrictMode,{children:oe.jsx(YC,{})}));
